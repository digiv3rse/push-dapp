import{aZ as t,bm as K,bk as w,bl as F,be as oe,cj as Jt,eX as J,bT as W,dx as Ve,fP as ja,ei as Ea,ck as Yt,ba as Y,b8 as T,bf as re,bg as V,bh as ie,fQ as Ba,fR as _a,cN as Da,fS as Sa,fT as ka,fU as Qa,fV as Ma,fW as La,fX as Ra,fY as Ua,fZ as Kt,f_ as Ta,f$ as Pa,g0 as Fa,g1 as Vt,g2 as Oa,dH as Le,g3 as $t,g4 as Na,dI as Ha,g5 as Ga,g6 as za,a_ as le,b1 as Xt,cW as $e,b$ as Wa,c0 as qa,b9 as en,dz as fe,cS as Za,g7 as ce,bj as Ce,g8 as tn,g9 as Xe,fM as Re,ga as Ja,gb as nn,bo as de,fr as me,dv as he,dw as rn,dE as Ya,bW as ue,d9 as et,bS as tt,fp as Ka,bc as an,gc as Va,db as sn,gd as on,bq as $a,ge as Xa,gf as es,gg as nt,fI as ln,cl as ts,cn as ns,gh as rs,bi as is,gi as as,bH as q,bI as ge,bJ as cn,bM as dn,cU as ss,bV as os,dU as ls,gj as cs,gk as ds,gl as hs,gm as Ue,gn as us,go as hn,e4 as gs,bL as As,bb as rt,a$ as ps,__tla as fs}from"./index-BVCZN7ZR.js";import{N as ms,__tla as xs}from"./NotificationToast-Co9FQkj2.js";import{w as bs,m as ws,l as Cs,e as vs,u as ys,r as Is,n as js,t as Es,x as Bs,v as _s,o as Ds}from"./_Uint8Array-DoJxpxb2.js";import{E as Ae,C as un,__tla as Ss}from"./ErrorFilled-wu0GcUlV.js";import{c as Te,m as ks,a as gn,i as Qs,__tla as Ms}from"./PushTokenContractHelper-BA25hLU1.js";import{u as ae,__tla as Ls}from"./useMutation-DgDHaiuI.js";import{c as Pe,a as X,u as Fe,F as An,b as pn,__tla as Rs}from"./index.esm-URbckxLf.js";import{g as ee,a as Oe,U as fn}from"./Common.form-LPxQflxb.js";import{C as Us,__tla as Ts}from"./Cross-BwoTj3Pp.js";import{A as Ps,__tla as Fs}from"./Add-B31OlPW4.js";import{S as Os,__tla as Ns}from"./Stepper-DF3uTbN4.js";let mn,Hs=Promise.all([(()=>{try{return fs}catch{}})(),(()=>{try{return xs}catch{}})(),(()=>{try{return Ss}catch{}})(),(()=>{try{return Ms}catch{}})(),(()=>{try{return Ls}catch{}})(),(()=>{try{return Rs}catch{}})(),(()=>{try{return Ts}catch{}})(),(()=>{try{return Fs}catch{}})(),(()=>{try{return Ns}catch{}})()]).then(async()=>{const xn=e=>{const{svgProps:n,...r}=e;return t.jsx(K,{componentName:"BellSimple",icon:t.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:[t.jsx("path",{d:"M9 20.9999H15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),t.jsx("path",{d:"M14.1313 3.34529L13.142 3.49112C13.197 3.86442 13.4575 4.17496 13.8155 4.29412L14.1313 3.34529ZM16.7729 4.97697L17.48 4.26986V4.26986L16.7729 4.97697ZM20.1468 16.8749L21.0128 16.3749L21.0122 16.3739L20.1468 16.8749ZM20.2472 17.2493L19.2472 17.2502V17.2502L20.2472 17.2493ZM19.874 17.8985L19.3717 17.0338L19.3717 17.0338L19.874 17.8985ZM19.4999 17.9999V18.9999L19.5034 18.9999L19.4999 17.9999ZM4.49988 17.9999L4.49387 18.9999H4.49988V17.9999ZM4.12646 17.8978L4.63038 17.034L4.63037 17.034L4.12646 17.8978ZM3.85375 17.623L2.98622 18.1204H2.98622L3.85375 17.623ZM3.85488 16.8749L2.98913 16.3745L2.98887 16.3749L3.85488 16.8749ZM7.22691 4.97697L6.51981 4.26986L7.22691 4.97697ZM9.86833 3.34533L10.1841 4.29415C10.5422 4.17499 10.8026 3.86444 10.8576 3.49114L9.86833 3.34533ZM13.8155 4.29412C14.6557 4.57375 15.4279 5.04625 16.0657 5.68407L17.48 4.26986C16.6203 3.41016 15.5793 2.77329 14.4471 2.39646L13.8155 4.29412ZM16.0657 5.68407C17.1441 6.76241 17.7499 8.22494 17.7499 9.74994H19.7499C19.7499 7.69451 18.9334 5.72327 17.48 4.26986L16.0657 5.68407ZM17.7499 9.74994C17.7499 13.2175 18.5462 16.1062 19.2813 17.376L21.0122 16.3739C20.5098 15.5062 19.7499 12.9986 19.7499 9.74994H17.7499ZM19.2807 17.3749C19.2588 17.337 19.2473 17.294 19.2472 17.2502L21.2472 17.2484C21.247 16.9417 21.1661 16.6405 21.0128 16.3749L19.2807 17.3749ZM19.2472 17.2502C19.2472 17.2064 19.2587 17.1633 19.2805 17.1253L21.0143 18.1223C21.1672 17.8564 21.2475 17.5551 21.2472 17.2484L19.2472 17.2502ZM19.2805 17.1253C19.3024 17.0874 19.3338 17.0558 19.3717 17.0338L20.3762 18.7632C20.6414 18.6091 20.8615 18.3881 21.0143 18.1223L19.2805 17.1253ZM19.3717 17.0338C19.4096 17.0118 19.4526 17.0001 19.4964 16.9999L19.5034 18.9999C19.8101 18.9989 20.1111 18.9172 20.3762 18.7632L19.3717 17.0338ZM19.4999 16.9999H4.49988V18.9999H19.4999V16.9999ZM4.5059 17C4.54965 17.0002 4.59257 17.012 4.63038 17.034L3.62255 18.7615C3.88713 18.9159 4.18758 18.9981 4.49387 18.9999L4.5059 17ZM4.63037 17.034C4.66817 17.0561 4.69951 17.0876 4.72128 17.1256L2.98622 18.1204C3.13856 18.3861 3.35799 18.6072 3.62256 18.7615L4.63037 17.034ZM4.72128 17.1256C4.74304 17.1636 4.75446 17.2066 4.75439 17.2503L2.7544 17.2473C2.75393 17.5536 2.83387 17.8547 2.98622 18.1204L4.72128 17.1256ZM4.75439 17.2503C4.75433 17.2941 4.74278 17.3371 4.7209 17.375L2.98887 16.3749C2.83571 16.6402 2.75486 16.941 2.7544 17.2473L4.75439 17.2503ZM4.72064 17.3754C5.45456 16.1058 6.24988 13.2164 6.24988 9.74994H4.24988C4.24988 12.9979 3.49084 15.5066 2.98913 16.3745L4.72064 17.3754ZM6.24988 9.74994C6.24988 8.22494 6.85568 6.76241 7.93402 5.68407L6.51981 4.26986C5.0664 5.72327 4.24988 7.69451 4.24988 9.74994H6.24988ZM7.93402 5.68407C8.57182 5.04627 9.344 4.57378 10.1841 4.29415L9.55252 2.3965C8.42035 2.77334 7.37948 3.41019 6.51981 4.26986L7.93402 5.68407ZM10.8576 3.49114C10.9453 2.89646 11.4397 2.47119 11.9998 2.47119V0.471191C10.3991 0.471191 9.10409 1.67243 8.87902 3.19951L10.8576 3.49114ZM11.9998 2.47119C12.5599 2.47119 13.0544 2.89645 13.142 3.49112L15.1206 3.19946C14.8955 1.67241 13.6005 0.471191 11.9998 0.471191V2.47119Z",fill:"currentColor"})]}),...r})},bn=e=>{const{svgProps:n,...r}=e;return t.jsx(K,{componentName:"BellSimpleSlash",icon:t.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:[t.jsx("path",{d:"M5.52783 4.4353L19.3386 19.6",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),t.jsx("path",{d:"M7.42357 6.49341C7.04446 6.90863 6.28622 8.18319 6.28622 9.95964C6.28622 12.1802 5.85294 15.8631 4.39062 17.4337H17.2265",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),t.jsx("path",{d:"M9.59013 20.25H15.3852M9.31934 4.70613C10.6192 3.80347 13.9554 2.73472 16.9017 5.68101C17.2912 6.07049 18.4295 7.23159 18.5807 10.9345C18.6168 11.8191 18.8731 14.0541 19.6097 15.9172",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})]}),...r})},it=e=>{const{svgProps:n,...r}=e;return t.jsx(K,{componentName:"CircleFilled",icon:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"inherit",height:"inherit",viewBox:"0 0 8 8",fill:"none",...n,children:t.jsx("circle",{cx:"4",cy:"4",r:"4",fill:"currentColor"})}),...r})},wn=e=>{const{svgProps:n,...r}=e;return t.jsx(K,{componentName:"CloudUpload",icon:t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"inherit",height:"inherit",viewBox:"0 0 53 52",fill:"none",...n,children:[t.jsx("path",{d:"M16.1888 26.3978L26.7966 15.7901L37.4043 26.3978",stroke:"#C4CBD5","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"}),t.jsx("path",{d:"M27.0618 50.0001V16.8509",stroke:"#C4CBD5","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"}),t.jsx("path",{d:"M21.4927 35.4144H11.1502C8.05625 35.0608 1.86841 32.4972 1.86841 25.0718C1.86841 17.6464 8.05625 14.9061 11.1502 14.4641C11.769 10.3094 15.6585 2 26.2662 2C39.2607 2 41.0286 10.8398 41.9126 16.0553C45.0065 15.9669 51.4596 19.2906 51.4596 26.9282C51.2828 29.7569 49.6032 35.4144 44.2993 35.4144C38.9955 35.4144 34.1336 35.4144 32.3656 35.4144",stroke:"#C4CBD5","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"})]}),...r})},Cn=e=>{const{svgProps:n,...r}=e;return t.jsx(K,{componentName:"CrownSimple",icon:t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"inherit",height:"inherit",viewBox:"0 0 32 33",fill:"none",...n,children:[t.jsx("g",{"clip-path":"url(#clip0_5441_8171)",children:t.jsx("path",{d:"M5.84358 26.76H26.1623C26.4231 26.7601 26.6755 26.6792 26.8752 26.5315C27.075 26.3838 27.2093 26.1789 27.2546 25.9526L30.4013 13.2489C30.4408 13.0399 30.4021 12.8252 30.2911 12.6372C30.18 12.4492 30.0027 12.2981 29.7857 12.2067C29.5687 12.1153 29.3239 12.0885 29.0881 12.1305C28.8523 12.1724 28.6384 12.2807 28.4786 12.4391L22.6567 17.9652L17.0093 6.80669C16.9204 6.63745 16.7784 6.49416 16.6001 6.39374C16.4218 6.29332 16.2146 6.23996 16.003 6.23996C15.7913 6.23996 15.5841 6.29332 15.4058 6.39374C15.2275 6.49416 15.0855 6.63745 14.9966 6.80669L9.34925 17.9652L3.52726 12.4391C3.36781 12.2784 3.15302 12.1681 2.91574 12.1251C2.67846 12.0821 2.43173 12.1088 2.21327 12.201C1.99481 12.2933 1.81663 12.446 1.70597 12.6359C1.59531 12.8258 1.55825 13.0424 1.60046 13.2526L4.74711 25.9563C4.79341 26.1825 4.92872 26.3871 5.12926 26.5341C5.3298 26.6811 5.58273 26.7611 5.84358 26.76Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})}),t.jsx("defs",{children:t.jsx("clipPath",{id:"clip0_5441_8171",children:t.jsx("rect",{width:"32",height:"32",fill:"white",transform:"translate(0 0.5)"})})})]}),...r})},vn=e=>{const{svgProps:n,...r}=e;return t.jsx(K,{componentName:"Cube",icon:t.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:[t.jsx("path",{d:"M11.8471 12.1528L4.6665 7.95139L11.8471 3.75L19.3332 7.95139L11.8471 12.1528Z",stroke:"currentColor","stroke-width":"1.5","stroke-linejoin":"round"}),t.jsx("path",{d:"M4.6665 8.02783V16.457L11.8471 20.2501L19.3332 16.457V8.02783",stroke:"currentColor","stroke-width":"1.5","stroke-linejoin":"round"}),t.jsx("path",{d:"M11.8472 20.2501V12.1528",stroke:"currentColor","stroke-width":"1.5","stroke-linejoin":"round"})]}),...r})},yn=e=>{const{svgProps:n,...r}=e;return t.jsx(K,{componentName:"KebabMenuHorizontal",icon:t.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:[t.jsxs("g",{"clip-path":"url(#clip0_372_37305)",children:[t.jsx("path",{d:"M23 16C23 17.3807 24.1193 18.5 25.5 18.5C26.8807 18.5 28 17.3807 28 16C28 14.6193 26.8807 13.5 25.5 13.5C24.1193 13.5 23 14.6193 23 16Z",fill:"currentColor"}),t.jsx("path",{d:"M13.5 16C13.5 17.3807 14.6193 18.5 16 18.5C17.3807 18.5 18.5 17.3807 18.5 16C18.5 14.6193 17.3807 13.5 16 13.5C14.6193 13.5 13.5 14.6193 13.5 16Z",fill:"currentColor"}),t.jsx("path",{d:"M3.99999 16C3.99999 17.3807 5.11928 18.5 6.5 18.5C7.88071 18.5 9 17.3807 9 16C9 14.6193 7.88071 13.5 6.5 13.5C5.11928 13.5 3.99999 14.6193 3.99999 16Z",fill:"currentColor"})]}),t.jsx("defs",{children:t.jsx("clipPath",{id:"clip0_372_37305",children:t.jsx("rect",{width:"32",height:"32",fill:"white",transform:"translate(32) rotate(90)"})})})]}),...r})},In=e=>{const{svgProps:n,...r}=e;return t.jsx(K,{componentName:"OptOut",icon:t.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:[t.jsx("circle",{cx:"16.87",cy:"16",r:"12",stroke:"currentColor","stroke-width":"2"}),t.jsx("path",{d:"M21.87 16L11.87 16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]}),...r})},jn=e=>{const{svgProps:n,...r}=e;return t.jsx(K,{componentName:"ReceiveNotification",icon:t.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:[t.jsx("path",{d:"M25.1818 11.6364C27.2906 11.6364 29 9.92691 29 7.81818C29 5.70946 27.2906 4 25.1818 4C23.0731 4 21.3636 5.70946 21.3636 7.81818C21.3636 9.92691 23.0731 11.6364 25.1818 11.6364Z",stroke:"currentColor","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"}),t.jsx("path",{d:"M18.0909 5.09088H10C7.23857 5.09088 5 7.32946 5 10.0909V23C5 25.7614 7.23858 28 10 28H22.9091C25.6705 28 27.9091 25.7614 27.9091 23V14.9091",stroke:"currentColor","stroke-width":"1.33333","stroke-linecap":"round"})]}),...r})},En=e=>{const{svgProps:n,...r}=e;return t.jsx(K,{componentName:"Settings",icon:t.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:[t.jsx("path",{d:"M26.6931 16.5931C26.7164 16.198 26.7164 15.802 26.6931 15.407H26.689C26.671 15.1342 26.7559 14.8646 26.9268 14.6513L28.8659 12.2271C28.6436 11.5199 28.3587 10.8339 28.0146 10.1773L24.929 9.83433C24.66 9.80448 24.4117 9.67594 24.2321 9.47357C23.969 9.17774 23.6889 8.89758 23.393 8.63454C23.1907 8.45489 23.0621 8.20657 23.0323 7.93762L22.6824 4.85341C22.0258 4.50947 21.3398 4.22457 20.6327 4.00207L18.2044 5.94115C17.9929 6.11047 17.726 6.1952 17.4555 6.17892C17.0605 6.15569 16.6645 6.15569 16.2694 6.17892C15.999 6.1952 15.7321 6.11047 15.5206 5.94115L13.0964 4.00207C12.3892 4.2244 11.7032 4.50931 11.0466 4.85341L10.7036 7.93762C10.6737 8.20725 10.5447 8.45614 10.3415 8.6359C10.0457 8.89894 9.7655 9.1791 9.50246 9.47494C9.32281 9.6773 9.07449 9.80584 8.80554 9.8357L5.72133 10.1855C5.3774 10.8422 5.0925 11.5282 4.87 12.2353L6.80907 14.6636C6.97839 14.8751 7.06313 15.142 7.04685 15.4124C7.02362 15.8075 7.02362 16.2035 7.04685 16.5986C7.06313 16.869 6.97839 17.1359 6.80907 17.3474L4.87 19.7716C5.09233 20.4788 5.37723 21.1647 5.72133 21.8214L8.80691 22.1657C9.07586 22.1956 9.32418 22.3241 9.50383 22.5265C9.76687 22.8223 10.047 23.1025 10.3429 23.3655C10.5452 23.5452 10.6738 23.7935 10.7036 24.0624L11.0534 27.1466C11.7101 27.4906 12.3961 27.7755 13.1032 27.998L15.5329 26.0575C15.7444 25.8882 16.0113 25.8035 16.2817 25.8198C16.6767 25.843 17.0728 25.843 17.4678 25.8198H17.5334C17.7817 25.8196 18.0227 25.9039 18.2167 26.0589L20.6409 27.998C21.3481 27.7756 22.034 27.4907 22.6906 27.1466L23.0336 24.0611C23.0635 23.7921 23.192 23.5438 23.3944 23.3641C23.6902 23.1011 23.9704 22.8209 24.2334 22.5251C24.4131 22.3227 24.6614 22.1942 24.9303 22.1643L28.0187 21.8145C28.3626 21.1578 28.6475 20.4719 28.87 19.7648L26.9309 17.3419C26.7616 17.1304 26.6769 16.8635 26.6931 16.5931Z",stroke:"currentColor","stroke-width":"2","stroke-linejoin":"round"}),t.jsx("path",{d:"M14.4385 19.6359C15.1576 20.1164 16.0031 20.3729 16.8679 20.3729C18.0277 20.3729 19.1399 19.9121 19.96 19.0921C20.7801 18.272 21.2408 17.1598 21.2408 16C21.2408 15.1352 20.9843 14.2897 20.5038 13.5706C20.0233 12.8515 19.3404 12.291 18.5414 11.9601C17.7423 11.6291 16.8631 11.5425 16.0149 11.7112C15.1666 11.8799 14.3874 12.2964 13.7759 12.908C13.1643 13.5195 12.7479 14.2987 12.5791 15.1469C12.4104 15.9952 12.497 16.8744 12.828 17.6734C13.159 18.4725 13.7194 19.1554 14.4385 19.6359Z",stroke:"currentColor","stroke-width":"2","stroke-linejoin":"round"})]}),...r})},Bn=e=>{const{svgProps:n,...r}=e;return t.jsx(K,{componentName:"Swap",icon:t.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:[t.jsx("path",{d:"M13.25 5L5 13.25H27",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),t.jsx("path",{d:"M18.75 27L27 18.75H5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]}),...r})},at=e=>{const{svgProps:n,...r}=e;return t.jsx(K,{componentName:"TickCircleFilled",icon:t.jsx("svg",{width:"inherit",height:"inherit",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:t.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 16C4 12.8174 5.26428 9.76516 7.51472 7.51472C9.76516 5.26428 12.8174 4 16 4C19.1826 4 22.2348 5.26428 24.4853 7.51472C26.7357 9.76516 28 12.8174 28 16C28 19.1826 26.7357 22.2348 24.4853 24.4853C22.2348 26.7357 19.1826 28 16 28C12.8174 28 9.76516 26.7357 7.51472 24.4853C5.26428 22.2348 4 19.1826 4 16ZM15.3152 21.136L22.224 12.4992L20.976 11.5008L15.0848 18.8624L10.912 15.3856L9.888 16.6144L15.3152 21.1376V21.136Z",fill:"currentColor"})}),...r})},ve=({title:e,description:n})=>t.jsxs(w,{display:"flex",flexDirection:"column",alignItems:"center",gap:"s1",alignSelf:"stretch",children:[t.jsx(F,{variant:"h3-semibold",color:"text-primary",display:{ml:"none",dp:"block"},children:e}),t.jsx(F,{variant:"bs-regular",color:"text-tertiary",display:{ml:"none",dp:"block"},textAlign:"center",children:n}),t.jsx(F,{variant:"h4-semibold",color:"text-primary",display:{ml:"block",dp:"none"},children:e}),t.jsx(F,{variant:"bes-regular",color:"text-tertiary",display:{ml:"block",dp:"none"},textAlign:"center",children:n})]}),_n=({noOfPushTokensToCheck:e,mintPushToken:n,mintingPush:r})=>{const i=oe.appEnv==="prod",{isModalOpen:h,showModal:g,ModalComponent:o}=Jt();return t.jsxs(w,{display:"flex",padding:"spacing-sm spacing-md",backgroundColor:"surface-brand-subtle",borderRadius:"radius-none radius-none radius-sm radius-sm",justifyContent:"space-between",alignItems:"center",flexDirection:{ml:"column",initial:"row"},gap:"spacing-xs",children:[t.jsx(J,{isLoading:r,children:t.jsx(F,{variant:"c-regular",color:"text-primary",children:i?"Your balance is low. Swap to get PUSH Tokens.":"Follow these steps to get Testnet PUSH."})}),i?t.jsx(W,{size:"extraSmall",leadingIcon:t.jsx(Bn,{}),onClick:g,children:"Swap PUSH Token"}):t.jsxs(w,{display:"flex",gap:"s3",children:[t.jsx(J,{isLoading:r,children:t.jsx(Ve,{to:ja,target:"_blank",children:t.jsxs(w,{display:"flex",gap:"spacing-xxs",alignItems:"baseline",color:"text-brand-medium",cursor:"pointer",children:[t.jsx(w,{border:"border-sm solid stroke-brand-medium",width:"16px",height:"15px",borderRadius:"radius-xl",display:"flex",justifyContent:"center",color:"text-brand-medium",children:t.jsx(F,{variant:"c-regular",color:"text-brand-medium",children:"1"})}),t.jsx(F,{color:"text-brand-medium",children:"Sepolia ETH Faucet"})]})})}),t.jsx(J,{isLoading:r,children:t.jsxs(w,{display:"flex",gap:"spacing-xxs",alignItems:"baseline",color:"text-brand-medium",cursor:"pointer",onClick:()=>n(1e3),children:[t.jsx(w,{border:"border-sm solid stroke-brand-medium",width:"16px",height:"15px",borderRadius:"radius-xl",display:"flex",justifyContent:"center",children:t.jsx(F,{variant:"c-regular",color:"text-brand-medium",children:"2"})}),t.jsx(F,{color:"text-brand-medium",children:"Get Testnet Push"})]})})]}),h&&t.jsx(o,{InnerComponent:Ea,InnerComponentProps:{defaultPushTokenAmount:e},modalPadding:"0px",modalPosition:Yt.ON_ROOT})]})},ye=({fees:e,pushApprovalAmount:n,title:r,description:i,balance:h=0,setBalance:g=()=>{},showFaucet:o=!1,showBalance:l=!1})=>{const{provider:c,account:d}=Y(),[s,a]=T.useState(!1),[A,u]=T.useState(!1),p=async()=>{a(!0);const b=await Te({address:d,provider:c});a(!1),g(b)};T.useEffect(()=>{!d||!c||p()},[h,d]);const f=async b=>{u(!0);try{const x=await ks({noOfTokens:b,provider:c,account:d});u(!1),g(x)}catch(x){console.log("Error >>",x),u(!1)}};return t.jsx(w,{display:"flex",flexDirection:"column",gap:"spacing-sm",width:"-webkit-fill-available",children:t.jsxs(w,{display:"flex",flexDirection:"column",alignSelf:"stretch",children:[t.jsxs(w,{display:"flex",flexDirection:"row",justifyContent:"space-between",backgroundColor:"surface-secondary",borderRadius:h<e?"radius-sm radius-sm radius-none radius-none":"radius-sm",padding:"spacing-sm spacing-md",alignItems:"center",children:[t.jsxs(w,{width:{initial:"inherit",ml:"200px"},children:[t.jsx(F,{variant:"h4-semibold",color:"text-primary",display:{ml:"none",dp:"block"},children:r}),t.jsx(F,{variant:"h5-semibold",color:"text-primary",display:{ml:"block",dp:"none"},children:r}),t.jsx(F,{variant:"c-regular",color:"text-tertiary",display:{ml:"none",dp:"block"},children:i}),t.jsx(F,{variant:"c-regular",color:"text-tertiary",display:{ml:"block",dp:"none"},children:i})]}),t.jsxs(w,{display:"flex",children:[!!n&&n>=e&&t.jsx(at,{color:"icon-brand-medium",size:22}),t.jsxs(w,{children:[t.jsxs(F,{variant:"h4-semibold",color:"text-brand-medium",display:{ml:"none",dp:"block"},children:[e," PUSH"]}),t.jsxs(F,{variant:"h5-semibold",color:"text-brand-medium",display:{ml:"block",dp:"none"},children:[e," PUSH"]}),l&&t.jsx(J,{isLoading:s,children:t.jsxs(F,{variant:"bes-semibold",color:"text-tertiary",children:["Balance:","",h==null?void 0:h.toLocaleString()]})})]})]})]}),h<e&&o&&t.jsx(_n,{mintPushToken:f,noOfPushTokensToCheck:50,mintingPush:A})]})})},Dn=e=>e,Sn=e=>e,kn=e=>e,Qn=({userPushSDKInstance:e})=>e.channel.delegate.get().then(Sn),Mn=({userPushSDKInstance:e,delegateAddress:n})=>e.channel.delegate.remove(n).then(Dn),Ln=({userPushSDKInstance:e,delegateAddress:n})=>e.channel.delegate.add(n).then(kn),Rn=async({identityBytes:e,signer:n})=>(await new re(V.epnscore,ie.epnscore,n).addSubGraph(e)).wait(),Un=async({fees:e,signer:n})=>(await new re(V.epnscore,ie.epnscore,n).reactivateChannel(e)).wait(),Tn=async({signer:e})=>(await new re(V.epnscore,ie.epnscore,e).deactivateChannel()).wait(),Pn=async e=>{const{signer:n,account:r,identityBytes:i,fees:h}=e;return(await new re(V.epnscore,ie.epnscore,n).updateChannelMeta(r,i,h,{gasLimit:1e6})).wait()},Fn=async e=>{const{channelType:n,identityBytes:r,fees:i,signer:h}=e;return(await new re(V.epnscore,ie.epnscore,h).createChannelWithPUSH(n,r,i,0,{gasLimit:6e5})).wait()},On=async e=>{const{noOfTokenToApprove:n,signer:r}=e;return(await new re(V.pushToken,ie.pushToken,r).approve(V.epnscore,n)).wait()},Ne=()=>ae({mutationKey:[Ba],mutationFn:On}),Nn=()=>ae({mutationKey:[_a],mutationFn:Fn}),st=e=>Da({queryKey:[Sa,e==null?void 0:e.account],queryFn:()=>Qn({userPushSDKInstance:e})}),Hn=()=>ae({mutationKey:[ka],mutationFn:Mn}),Gn=()=>ae({mutationKey:[Qa],mutationFn:Ln}),zn=()=>ae({mutationKey:[Ma],mutationFn:Rn}),Wn=()=>ae({mutationKey:[La],mutationFn:Un}),qn=()=>ae({mutationKey:[Ra],mutationFn:Tn}),Zn=()=>ae({mutationKey:[Ua],mutationFn:Pn});function Jn(e,n=0,r=1){return Ta(e,n,r)}function Yn(e){e=e.slice(1);const n=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(n);return r&&r[0].length===1&&(r=r.map(i=>i+i)),r?`rgb${r.length===4?"a":""}(${r.map((i,h)=>h<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function ot(e){if(e.type)return e;if(e.charAt(0)==="#")return ot(Yn(e));const n=e.indexOf("("),r=e.substring(0,n);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error(Kt(9,e));let i=e.substring(n+1,e.length-1),h;if(r==="color"){if(i=i.split(" "),h=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(h)===-1)throw new Error(Kt(10,h))}else i=i.split(",");return i=i.map(g=>parseFloat(g)),{type:r,values:i,colorSpace:h}}function Kn(e){const{type:n,colorSpace:r}=e;let{values:i}=e;return n.indexOf("rgb")!==-1?i=i.map((h,g)=>g<3?parseInt(h,10):h):n.indexOf("hsl")!==-1&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),n.indexOf("color")!==-1?i=`${r} ${i.join(" ")}`:i=`${i.join(", ")}`,`${n}(${i})`}function Vn(e,n){return e=ot(e),n=Jn(n),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${n}`:e.values[3]=n,Kn(e)}function $n(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function Xn(e){return parseFloat(e)}function er(e){return Pa("MuiSkeleton",e)}Fa("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const tr=["animation","className","component","height","style","variant","width"];let Ie=e=>e,lt,ct,dt,ht;const nr=e=>{const{classes:n,variant:r,animation:i,hasChildren:h,width:g,height:o}=e;return za({root:["root",r,i,h&&"withChildren",h&&!g&&"fitContent",h&&!o&&"heightAuto"]},er,n)},rr=Vt(lt||(lt=Ie`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),ir=Vt(ct||(ct=Ie`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),ar=Oa("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:r}=e;return[n.root,n[r.variant],r.animation!==!1&&n[r.animation],r.hasChildren&&n.withChildren,r.hasChildren&&!r.width&&n.fitContent,r.hasChildren&&!r.height&&n.heightAuto]}})(({theme:e,ownerState:n})=>{const r=$n(e.shape.borderRadius)||"px",i=Xn(e.shape.borderRadius);return Le({display:"block",backgroundColor:e.vars?e.vars.palette.Skeleton.bg:Vn(e.palette.text.primary,e.palette.mode==="light"?.11:.13),height:"1.2em"},n.variant==="text"&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${i}${r}/${Math.round(i/.6*10)/10}${r}`,"&:empty:before":{content:'"\\00a0"'}},n.variant==="circular"&&{borderRadius:"50%"},n.variant==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius},n.hasChildren&&{"& > *":{visibility:"hidden"}},n.hasChildren&&!n.width&&{maxWidth:"fit-content"},n.hasChildren&&!n.height&&{height:"auto"})},({ownerState:e})=>e.animation==="pulse"&&$t(dt||(dt=Ie`
      animation: ${0} 2s ease-in-out 0.5s infinite;
    `),rr),({ownerState:e,theme:n})=>e.animation==="wave"&&$t(ht||(ht=Ie`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 2s linear 0.5s infinite;
        background: linear-gradient(
          90deg,
          transparent,
          ${0},
          transparent
        );
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),ir,(n.vars||n).palette.action.hover)),je=T.forwardRef(function(e,n){const r=Na({props:e,name:"MuiSkeleton"}),{animation:i="pulse",className:h,component:g="span",height:o,style:l,variant:c="text",width:d}=r,s=Ha(r,tr),a=Le({},r,{animation:i,component:g,variant:c,hasChildren:!!s.children}),A=nr(a);return t.jsx(ar,Le({as:g,ref:n,className:Ga(A.root,h),ownerState:a},s,{style:Le({width:d,height:o},l)}))}),ut=()=>(Xt(),t.jsxs($e,{children:[t.jsxs(sr,{children:[t.jsxs(or,{children:[t.jsx(je,{variant:"rectangular",sx:{bgcolor:"#F4F5FA"},style:{width:"8rem",height:"8rem",borderRadius:"32px",marginRight:"2%"}}),t.jsxs(lr,{children:[t.jsx(je,{variant:"rectangular",sx:{bgcolor:"#F4F5FA"},style:{width:"40%",height:"2.2rem",borderRadius:"5px",marginTop:"3%"}}),t.jsx(je,{variant:"rectangular",sx:{bgcolor:"#F4F5FA"},style:{width:"20%",height:"1.1rem",borderRadius:"5px",marginTop:"2%"}})]})]}),t.jsx(je,{variant:"rectangular",sx:{bgcolor:"#F4F5FA"},style:{width:"100%",height:"2.7rem",borderRadius:"9px",marginTop:"4%"}})]}),t.jsx($e,{padding:"40px 0 40px 0",children:t.jsx(Wa,{type:qa.SEAMLESS,title:"Loading Channel Details. Please wait..."})})]})),sr=le.div`
  width: 100%;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
`,or=le.div`
  width: 100%;
  height: fit-content;
  display: flex;
`,lr=le.div`
  width: 80%;
  height: fit-content;
  display: flex;
  flex-direction: column;
`;var cr="__lodash_hash_undefined__";function dr(e){return this.__data__.set(e,cr),this}var hr=dr;function ur(e){return this.__data__.has(e)}var gr=ur,Ar=bs,pr=hr,fr=gr;function Ee(e){var n=-1,r=e==null?0:e.length;for(this.__data__=new Ar;++n<r;)this.add(e[n])}Ee.prototype.add=Ee.prototype.push=pr,Ee.prototype.has=fr;var mr=Ee;function xr(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}var br=xr;function wr(e,n){return e.has(n)}var Cr=wr,vr=mr,yr=br,Ir=Cr,jr=1,Er=2;function Br(e,n,r,i,h,g){var o=r&jr,l=e.length,c=n.length;if(l!=c&&!(o&&c>l))return!1;var d=g.get(e),s=g.get(n);if(d&&s)return d==n&&s==e;var a=-1,A=!0,u=r&Er?new vr:void 0;for(g.set(e,n),g.set(n,e);++a<l;){var p=e[a],f=n[a];if(i)var b=o?i(f,p,a,n,e,g):i(p,f,a,e,n,g);if(b!==void 0){if(b)continue;A=!1;break}if(u){if(!yr(n,function(x,v){if(!Ir(u,v)&&(p===x||h(p,x,r,i,g)))return u.push(v)})){A=!1;break}}else if(!(p===f||h(p,f,r,i,g))){A=!1;break}}return g.delete(e),g.delete(n),A}var gt=Br;function _r(e){var n=-1,r=Array(e.size);return e.forEach(function(i,h){r[++n]=[h,i]}),r}var Dr=_r;function Sr(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}var kr=Sr,At=ws,pt=Cs,Qr=vs,Mr=gt,Lr=Dr,Rr=kr,Ur=1,Tr=2,Pr="[object Boolean]",Fr="[object Date]",Or="[object Error]",Nr="[object Map]",Hr="[object Number]",Gr="[object RegExp]",zr="[object Set]",Wr="[object String]",qr="[object Symbol]",Zr="[object ArrayBuffer]",Jr="[object DataView]",ft=At?At.prototype:void 0,He=ft?ft.valueOf:void 0;function Yr(e,n,r,i,h,g,o){switch(r){case Jr:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case Zr:return!(e.byteLength!=n.byteLength||!g(new pt(e),new pt(n)));case Pr:case Fr:case Hr:return Qr(+e,+n);case Or:return e.name==n.name&&e.message==n.message;case Gr:case Wr:return e==n+"";case Nr:var l=Lr;case zr:var c=i&Ur;if(l||(l=Rr),e.size!=n.size&&!c)return!1;var d=o.get(e);if(d)return d==n;i|=Tr,o.set(e,n);var s=Mr(l(e),l(n),i,h,g,o);return o.delete(e),s;case qr:if(He)return He.call(e)==He.call(n)}return!1}var Kr=Yr,mt=ys,Vr=1,$r=Object.prototype,Xr=$r.hasOwnProperty;function ei(e,n,r,i,h,g){var o=r&Vr,l=mt(e),c=l.length,d=mt(n),s=d.length;if(c!=s&&!o)return!1;for(var a=c;a--;){var A=l[a];if(!(o?A in n:Xr.call(n,A)))return!1}var u=g.get(e),p=g.get(n);if(u&&p)return u==n&&p==e;var f=!0;g.set(e,n),g.set(n,e);for(var b=o;++a<c;){A=l[a];var x=e[A],v=n[A];if(i)var E=o?i(v,x,A,n,e,g):i(x,v,A,e,n,g);if(!(E===void 0?x===v||h(x,v,r,i,g):E)){f=!1;break}b||(b=A=="constructor")}if(f&&!b){var j=e.constructor,D=n.constructor;j!=D&&"constructor"in e&&"constructor"in n&&!(typeof j=="function"&&j instanceof j&&typeof D=="function"&&D instanceof D)&&(f=!1)}return g.delete(e),g.delete(n),f}var ti=ei,Ge=Is,ni=gt,ri=Kr,ii=ti,xt=js,bt=_s,wt=Es,ai=Bs,si=1,Ct="[object Arguments]",vt="[object Array]",Be="[object Object]",oi=Object.prototype,yt=oi.hasOwnProperty;function li(e,n,r,i,h,g){var o=bt(e),l=bt(n),c=o?vt:xt(e),d=l?vt:xt(n);c=c==Ct?Be:c,d=d==Ct?Be:d;var s=c==Be,a=d==Be,A=c==d;if(A&&wt(e)){if(!wt(n))return!1;o=!0,s=!1}if(A&&!s)return g||(g=new Ge),o||ai(e)?ni(e,n,r,i,h,g):ri(e,n,c,r,i,h,g);if(!(r&si)){var u=s&&yt.call(e,"__wrapped__"),p=a&&yt.call(n,"__wrapped__");if(u||p){var f=u?e.value():e,b=p?n.value():n;return g||(g=new Ge),h(f,b,r,i,g)}}return A?(g||(g=new Ge),ii(e,n,r,i,h,g)):!1}var ci=li,di=ci,It=Ds;function jt(e,n,r,i,h){return e===n?!0:e==null||n==null||!It(e)&&!It(n)?e!==e&&n!==n:di(e,n,r,i,jt,h)}var hi=jt,ui=hi;function gi(e,n){return ui(e,n)}var Ai=gi;const pi=en(Ai),fi=({children:e,channelDetails:n})=>{const r=Pe().shape({channelName:X().required(ee("Channel Name")).max(32,Oe(32)),channelDesc:X().required(ee("Channel Description")).max(250,Oe(250)),channelURL:X().required(ee("Channel URL")).test("url","Please enter a valid channel url",h=>fn.test(h))}),i=Fe({initialValues:{channelName:n.name,channelDesc:n.info,channelURL:n.url,channelIcon:n.iconV2,imageSrc:"",imageType:""},validationSchema:r,onSubmit:()=>{}});return t.jsx(An,{value:i,children:e})},ze=()=>{const e=pn();if(!e)throw new Error("useEditChannelFormikContext must be used within a FormikChainAliasProvider");return e},mi=50,xi=({setActiveState:e})=>{const{account:n,provider:r,chainId:i}=Y(),{values:h,isValid:g,initialValues:o}=ze(),{data:l,refetch:c}=fe(n),{mutate:d,isPending:s}=Ne(),{mutate:a,isPending:A}=Zn(),[u,p]=T.useState(0),[f,b]=T.useState(0),[x,v]=T.useState(""),[E,j]=T.useState(0),[D,S]=T.useState(!1),I=async()=>{S(!0);const R=await Te({address:n,provider:r});S(!1),j(R)};T.useEffect(()=>{!n||!r||(y(),_(),I())},[n,r]);const y=async()=>{const R=oe.coreContractChain===i?r:new Za(oe.coreRPC),P=await new re(V.epnscore,ie.epnscore,R).channelUpdateCounter(n);p(mi*(Number(P)+1))},_=async()=>{const R=await gn({address:n,provider:r,contractAddress:V.epnscore});b(parseInt(R))},M=T.useMemo(()=>!!pi(h,o),[h]),L=()=>{if(v(""),u==0)return;var R=r.getSigner(n);console.debug(R);const P=Ce(u.toString(),18);d({noOfTokenToApprove:P,signer:R},{onSuccess:()=>{console.log("Successfully Approved PUSH"),_()},onError:N=>{console.log("Error in Approving PUSH",N),N.code=="ACTION_REJECTED"?v("User rejected signature. Please try again."):v("Error in approving PUSH Tokens")}})},O=async()=>{if(v(""),!!g){var R=r.getSigner(n);if(console.debug(R),l){const P=JSON.stringify({name:h.channelName,info:h.channelDesc,url:h.channelURL,icon:h.channelIcon}),N=await tn(P);console.debug("IPFS storagePointer:",N);const m="1+"+N,B=Xe(m),C=Ce(u.toString(),18);a({account:n,identityBytes:B,fees:C,signer:R},{onSuccess:()=>{console.log("Successfully edited channel"),c(),e("dashboard")},onError:k=>{console.log("Error in updating channel details",k),k.code=="ACTION_REJECTED"?v("User rejected signature. Please try again."):v("Error in updating Channel. Check console for more reasons.")}})}}};return t.jsxs(w,{display:"flex",flexDirection:"column",alignSelf:"stretch",children:[x&&t.jsx(ce,{variant:"error",icon:t.jsx(Ae,{color:"icon-state-danger-bold",size:24}),message:x,width:"100%"}),t.jsx(ye,{title:"Channel edit fee",description:"Editing channel details requires fees to be deposited",fees:u,pushApprovalAmount:f,showFaucet:!0,showBalance:!0,balance:E,setBalance:j}),t.jsxs(w,{display:"flex",justifyContent:"end",gap:"spacing-sm",margin:"spacing-lg spacing-none spacing-none spacing-none",children:[t.jsx(W,{size:"medium",variant:"outline",onClick:()=>e("dashboard"),children:"Back"}),u&&f>=u?t.jsx(W,{disabled:M||A||!g,onClick:O,children:A?"Updating":"Save Changes"}):t.jsx(W,{variant:"primary",size:"medium",disabled:s,onClick:L,children:s?"Approving":"Approve PUSH"})]})]})};var Et={exports:{}};(function(e,n){(function(r){e.exports=r()})(function(){return function(){function r(i,h,g){function o(d,s){if(!h[d]){if(!i[d]){var a=typeof Re=="function"&&Re;if(!s&&a)return a(d,!0);if(l)return l(d,!0);var A=new Error("Cannot find module '"+d+"'");throw A.code="MODULE_NOT_FOUND",A}var u=h[d]={exports:{}};i[d][0].call(u.exports,function(p){var f=i[d][1][p];return o(f||p)},u,u.exports,r,i,h,g)}return h[d].exports}for(var l=typeof Re=="function"&&Re,c=0;c<g.length;c++)o(g[c]);return o}return r}()({1:[function(r,i,h){var g=r("multimath"),o=r("./mm_unsharp_mask"),l=r("./mm_resize");function c(d){var s=d||[],a={js:s.indexOf("js")>=0,wasm:s.indexOf("wasm")>=0};g.call(this,a),this.features={js:a.js,wasm:a.wasm&&this.has_wasm()},this.use(o),this.use(l)}c.prototype=Object.create(g.prototype),c.prototype.constructor=c,c.prototype.resizeAndUnsharp=function(d,s){var a=this.resize(d,s);return d.unsharpAmount&&this.unsharp_mask(a,d.toWidth,d.toHeight,d.unsharpAmount,d.unsharpRadius,d.unsharpThreshold),a},i.exports=c},{"./mm_resize":4,"./mm_unsharp_mask":9,multimath:19}],2:[function(r,i,h){function g(a){return a<0?0:a>255?255:a}function o(a){return a>=0?a:0}function l(a,A,u,p,f,b){var x,v,E,j,D,S,I,y,_,M,L,O=0,R=0;for(_=0;_<p;_++){for(D=0,M=0;M<f;M++){for(S=b[D++],I=b[D++],y=O+S*4|0,x=v=E=j=0;I>0;I--)L=b[D++],j=j+L*a[y+3]|0,E=E+L*a[y+2]|0,v=v+L*a[y+1]|0,x=x+L*a[y]|0,y=y+4|0;A[R+3]=o(j>>7),A[R+2]=o(E>>7),A[R+1]=o(v>>7),A[R]=o(x>>7),R=R+p*4|0}R=(_+1)*4|0,O=(_+1)*u*4|0}}function c(a,A,u,p,f,b){var x,v,E,j,D,S,I,y,_,M,L,O=0,R=0;for(_=0;_<p;_++){for(D=0,M=0;M<f;M++){for(S=b[D++],I=b[D++],y=O+S*4|0,x=v=E=j=0;I>0;I--)L=b[D++],j=j+L*a[y+3]|0,E=E+L*a[y+2]|0,v=v+L*a[y+1]|0,x=x+L*a[y]|0,y=y+4|0;x>>=7,v>>=7,E>>=7,j>>=7,A[R+3]=g(j+8192>>14),A[R+2]=g(E+8192>>14),A[R+1]=g(v+8192>>14),A[R]=g(x+8192>>14),R=R+p*4|0}R=(_+1)*4|0,O=(_+1)*u*4|0}}function d(a,A,u,p,f,b){var x,v,E,j,D,S,I,y,_,M,L,O,R=0,P=0;for(M=0;M<p;M++){for(S=0,L=0;L<f;L++){for(I=b[S++],y=b[S++],_=R+I*4|0,x=v=E=j=0;y>0;y--)O=b[S++],D=a[_+3],j=j+O*D|0,E=E+O*a[_+2]*D|0,v=v+O*a[_+1]*D|0,x=x+O*a[_]*D|0,_=_+4|0;E=E/255|0,v=v/255|0,x=x/255|0,A[P+3]=o(j>>7),A[P+2]=o(E>>7),A[P+1]=o(v>>7),A[P]=o(x>>7),P=P+p*4|0}P=(M+1)*4|0,R=(M+1)*u*4|0}}function s(a,A,u,p,f,b){var x,v,E,j,D,S,I,y,_,M,L,O=0,R=0;for(_=0;_<p;_++){for(D=0,M=0;M<f;M++){for(S=b[D++],I=b[D++],y=O+S*4|0,x=v=E=j=0;I>0;I--)L=b[D++],j=j+L*a[y+3]|0,E=E+L*a[y+2]|0,v=v+L*a[y+1]|0,x=x+L*a[y]|0,y=y+4|0;x>>=7,v>>=7,E>>=7,j>>=7,j=g(j+8192>>14),j>0&&(x=x*255/j|0,v=v*255/j|0,E=E*255/j|0),A[R+3]=j,A[R+2]=g(E+8192>>14),A[R+1]=g(v+8192>>14),A[R]=g(x+8192>>14),R=R+p*4|0}R=(_+1)*4|0,O=(_+1)*u*4|0}}i.exports={convolveHor:l,convolveVert:c,convolveHorWithPre:d,convolveVertWithPre:s}},{}],3:[function(r,i,h){i.exports="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"},{}],4:[function(r,i,h){i.exports={name:"resize",fn:r("./resize"),wasm_fn:r("./resize_wasm"),wasm_src:r("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(r,i,h){var g=r("./resize_filter_gen"),o=r("./convolve"),l=o.convolveHor,c=o.convolveVert,d=o.convolveHorWithPre,s=o.convolveVertWithPre;function a(u,p,f){for(var b=3,x=p*f*4|0;b<x;){if(u[b]!==255)return!0;b=b+4|0}return!1}function A(u,p,f){for(var b=3,x=p*f*4|0;b<x;)u[b]=255,b=b+4|0}i.exports=function(u){var p=u.src,f=u.width,b=u.height,x=u.toWidth,v=u.toHeight,E=u.scaleX||u.toWidth/u.width,j=u.scaleY||u.toHeight/u.height,D=u.offsetX||0,S=u.offsetY||0,I=u.dest||new Uint8Array(x*v*4),y=typeof u.filter>"u"?"mks2013":u.filter,_=g(y,f,x,E,D),M=g(y,b,v,j,S),L=new Uint16Array(x*b*4);return a(p,f,b)?(d(p,L,f,b,x,_),s(L,I,b,x,v,M)):(l(p,L,f,b,x,_),c(L,I,b,x,v,M),A(I,x,v)),I}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(r,i,h){var g=r("./resize_filter_info"),o=14;function l(c){return Math.round(c*((1<<o)-1))}i.exports=function(c,d,s,a,A){var u=g.filter[c].fn,p=1/a,f=Math.min(1,a),b=g.filter[c].win/f,x,v,E,j,D,S,I,y,_,M,L,O,R,P,N,m,B,C=Math.floor((b+1)*2),k=new Int16Array((C+2)*s),Q=0,H=!k.subarray||!k.set;for(x=0;x<s;x++){for(v=(x+.5)*p+A,E=Math.max(0,Math.floor(v-b)),j=Math.min(d-1,Math.ceil(v+b)),D=j-E+1,S=new Float32Array(D),I=new Int16Array(D),y=0,_=E,M=0;_<=j;_++,M++)L=u((_+.5-v)*f),y+=L,S[M]=L;for(O=0,M=0;M<S.length;M++)R=S[M]/y,O+=R,I[M]=l(R);for(I[s>>1]+=l(1-O),P=0;P<I.length&&I[P]===0;)P++;if(P<I.length){for(N=I.length-1;N>0&&I[N]===0;)N--;if(m=E+P,B=N-P+1,k[Q++]=m,k[Q++]=B,!H)k.set(I.subarray(P,N+1),Q),Q+=B;else for(M=P;M<=N;M++)k[Q++]=I[M]}else k[Q++]=0,k[Q++]=0}return k}},{"./resize_filter_info":7}],7:[function(r,i,h){var g={box:{win:.5,fn:function(o){return o<0&&(o=-o),o<.5?1:0}},hamming:{win:1,fn:function(o){if(o<0&&(o=-o),o>=1)return 0;if(o<11920929e-14)return 1;var l=o*Math.PI;return Math.sin(l)/l*(.54+.46*Math.cos(l/1))}},lanczos2:{win:2,fn:function(o){if(o<0&&(o=-o),o>=2)return 0;if(o<11920929e-14)return 1;var l=o*Math.PI;return Math.sin(l)/l*Math.sin(l/2)/(l/2)}},lanczos3:{win:3,fn:function(o){if(o<0&&(o=-o),o>=3)return 0;if(o<11920929e-14)return 1;var l=o*Math.PI;return Math.sin(l)/l*Math.sin(l/3)/(l/3)}},mks2013:{win:2.5,fn:function(o){return o<0&&(o=-o),o>=2.5?0:o>=1.5?-.125*(o-2.5)*(o-2.5):o>=.5?.25*(4*o*o-11*o+7):1.0625-1.75*o*o}}};i.exports={filter:g,f2q:{box:0,hamming:1,lanczos2:2,lanczos3:3},q2f:["box","hamming","lanczos2","lanczos3"]}},{}],8:[function(r,i,h){var g=r("./resize_filter_gen");function o(a,A,u){for(var p=3,f=A*u*4|0;p<f;){if(a[p]!==255)return!0;p=p+4|0}return!1}function l(a,A,u){for(var p=3,f=A*u*4|0;p<f;)a[p]=255,p=p+4|0}function c(a){return new Uint8Array(a.buffer,0,a.byteLength)}var d=!0;try{d=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1}catch{}function s(a,A,u){if(d){A.set(c(a),u);return}for(var p=u,f=0;f<a.length;f++){var b=a[f];A[p++]=b&255,A[p++]=b>>8&255}}i.exports=function(a){var A=a.src,u=a.width,p=a.height,f=a.toWidth,b=a.toHeight,x=a.scaleX||a.toWidth/a.width,v=a.scaleY||a.toHeight/a.height,E=a.offsetX||0,j=a.offsetY||0,D=a.dest||new Uint8Array(f*b*4),S=typeof a.filter>"u"?"mks2013":a.filter,I=g(S,u,f,x,E),y=g(S,p,b,v,j),_=0,M=Math.max(A.byteLength,D.byteLength),L=this.__align(_+M),O=p*f*4*2,R=this.__align(L+O),P=this.__align(R+I.byteLength),N=P+y.byteLength,m=this.__instance("resize",N),B=new Uint8Array(this.__memory.buffer),C=new Uint32Array(this.__memory.buffer),k=new Uint32Array(A.buffer);C.set(k),s(I,B,R),s(y,B,P);var Q=m.exports.convolveHV||m.exports._convolveHV;o(A,u,p)?Q(R,P,L,u,p,f,b,1):(Q(R,P,L,u,p,f,b,0),l(D,f,b));var H=new Uint32Array(D.buffer);return H.set(new Uint32Array(this.__memory.buffer,0,b*f)),D}},{"./resize_filter_gen":6}],9:[function(r,i,h){i.exports={name:"unsharp_mask",fn:r("./unsharp_mask"),wasm_fn:r("./unsharp_mask_wasm"),wasm_src:r("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":10,"./unsharp_mask_wasm":11,"./unsharp_mask_wasm_base64":12}],10:[function(r,i,h){var g=r("glur/mono16");function o(l,c,d){for(var s=c*d,a=new Uint16Array(s),A,u,p,f,b=0;b<s;b++)A=l[4*b],u=l[4*b+1],p=l[4*b+2],f=A>=u&&A>=p?A:u>=p&&u>=A?u:p,a[b]=f<<8;return a}i.exports=function(l,c,d,s,a,A){var u,p,f,b,x;if(!(s===0||a<.5)){a>2&&(a=2);var v=o(l,c,d),E=new Uint16Array(v);g(E,c,d,a);for(var j=s/100*4096+.5|0,D=A<<8,S=c*d,I=0;I<S;I++)u=v[I],b=u-E[I],Math.abs(b)>=D&&(p=u+(j*b+2048>>12),p=p>65280?65280:p,p=p<0?0:p,u=u!==0?u:1,f=(p<<12)/u|0,x=I*4,l[x]=l[x]*f+2048>>12,l[x+1]=l[x+1]*f+2048>>12,l[x+2]=l[x+2]*f+2048>>12)}}},{"glur/mono16":18}],11:[function(r,i,h){i.exports=function(g,o,l,c,d,s){if(!(c===0||d<.5)){d>2&&(d=2);var a=o*l,A=a*4,u=a*2,p=a*2,f=Math.max(o,l)*4,b=8*4,x=0,v=A,E=v+u,j=E+p,D=j+p,S=D+f,I=this.__instance("unsharp_mask",A+u+p*2+f+b,{exp:Math.exp}),y=new Uint32Array(g.buffer),_=new Uint32Array(this.__memory.buffer);_.set(y);var M=I.exports.hsv_v16||I.exports._hsv_v16;M(x,v,o,l),M=I.exports.blurMono16||I.exports._blurMono16,M(v,E,j,D,S,o,l,d),M=I.exports.unsharp||I.exports._unsharp,M(x,x,v,E,o,l,c,s),y.set(new Uint32Array(this.__memory.buffer,0,a))}}},{}],12:[function(r,i,h){i.exports="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"},{}],13:[function(r,i,h){var g=100;function o(l,c){this.create=l,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=c||2e3}o.prototype.acquire=function(){var l=this,c;return this.available.length!==0?c=this.available.pop():(c=this.create(),c.id=this.lastId++,c.release=function(){return l.release(c)}),this.acquired[c.id]=c,c},o.prototype.release=function(l){var c=this;delete this.acquired[l.id],l.lastUsed=Date.now(),this.available.push(l),this.timeoutId===0&&(this.timeoutId=setTimeout(function(){return c.gc()},g))},o.prototype.gc=function(){var l=this,c=Date.now();this.available=this.available.filter(function(d){return c-d.lastUsed>l.idle?(d.destroy(),!1):!0}),this.available.length!==0?this.timeoutId=setTimeout(function(){return l.gc()},g):this.timeoutId=0},i.exports=o},{}],14:[function(r,i,h){var g=2;i.exports=function(o,l,c,d,s,a){var A=c/o,u=d/l,p=(2*a+g+1)/s;if(p>.5)return[[c,d]];var f=Math.ceil(Math.log(Math.min(A,u))/Math.log(p));if(f<=1)return[[c,d]];for(var b=[],x=0;x<f;x++){var v=Math.round(Math.pow(Math.pow(o,f-x-1)*Math.pow(c,x+1),1/f)),E=Math.round(Math.pow(Math.pow(l,f-x-1)*Math.pow(d,x+1),1/f));b.push([v,E])}return b}},{}],15:[function(r,i,h){var g=1e-5;function o(c){var d=Math.round(c);return Math.abs(c-d)<g?d:Math.floor(c)}function l(c){var d=Math.round(c);return Math.abs(c-d)<g?d:Math.ceil(c)}i.exports=function(c){var d=c.toWidth/c.width,s=c.toHeight/c.height,a=o(c.srcTileSize*d)-2*c.destTileBorder,A=o(c.srcTileSize*s)-2*c.destTileBorder;if(a<1||A<1)throw new Error("Internal error in pica: target tile width/height is too small.");var u,p,f,b,x,v,E=[],j;for(b=0;b<c.toHeight;b+=A)for(f=0;f<c.toWidth;f+=a)u=f-c.destTileBorder,u<0&&(u=0),x=f+a+c.destTileBorder-u,u+x>=c.toWidth&&(x=c.toWidth-u),p=b-c.destTileBorder,p<0&&(p=0),v=b+A+c.destTileBorder-p,p+v>=c.toHeight&&(v=c.toHeight-p),j={toX:u,toY:p,toWidth:x,toHeight:v,toInnerX:f,toInnerY:b,toInnerWidth:a,toInnerHeight:A,offsetX:u/d-o(u/d),offsetY:p/s-o(p/s),scaleX:d,scaleY:s,x:o(u/d),y:o(p/s),width:l(x/d),height:l(v/s)},E.push(j);return E}},{}],16:[function(r,i,h){function g(o){return Object.prototype.toString.call(o)}i.exports.isCanvas=function(o){var l=g(o);return l==="[object HTMLCanvasElement]"||l==="[object OffscreenCanvas]"||l==="[object Canvas]"},i.exports.isImage=function(o){return g(o)==="[object HTMLImageElement]"},i.exports.isImageBitmap=function(o){return g(o)==="[object ImageBitmap]"},i.exports.limiter=function(o){var l=0,c=[];function d(){l<o&&c.length&&(l++,c.shift()())}return function(s){return new Promise(function(a,A){c.push(function(){s().then(function(u){a(u),l--,d()},function(u){A(u),l--,d()})}),d()})}},i.exports.cib_quality_name=function(o){switch(o){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},i.exports.cib_support=function(o){return Promise.resolve().then(function(){if(typeof createImageBitmap>"u")return!1;var l=o(100,100);return createImageBitmap(l,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then(function(c){var d=c.width===10;return c.close(),l=null,d})}).catch(function(){return!1})},i.exports.worker_offscreen_canvas_support=function(){return new Promise(function(o,l){if(typeof OffscreenCanvas>"u"){o(!1);return}function c(a){if(typeof createImageBitmap>"u"){a.postMessage(!1);return}Promise.resolve().then(function(){var A=new OffscreenCanvas(10,10),u=A.getContext("2d");return u.rect(0,0,1,1),createImageBitmap(A,0,0,1,1)}).then(function(){return a.postMessage(!0)},function(){return a.postMessage(!1)})}var d=btoa("(".concat(c.toString(),")(self);")),s=new Worker("data:text/javascript;base64,".concat(d));s.onmessage=function(a){return o(a.data)},s.onerror=l}).then(function(o){return o},function(){return!1})},i.exports.can_use_canvas=function(o){var l=!1;try{var c=o(2,1),d=c.getContext("2d"),s=d.createImageData(2,1);s.data[0]=12,s.data[1]=23,s.data[2]=34,s.data[3]=255,s.data[4]=45,s.data[5]=56,s.data[6]=67,s.data[7]=255,d.putImageData(s,0,0),s=null,s=d.getImageData(0,0,2,1),s.data[0]===12&&s.data[1]===23&&s.data[2]===34&&s.data[3]===255&&s.data[4]===45&&s.data[5]===56&&s.data[6]===67&&s.data[7]===255&&(l=!0)}catch{}return l},i.exports.cib_can_use_region=function(){return new Promise(function(o){if(typeof Image>"u"||typeof createImageBitmap>"u"){o(!1);return}var l=new Image;l.src="data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z",l.onload=function(){createImageBitmap(l,0,0,l.width,l.height).then(function(c){c.width===l.width&&c.height===l.height?o(!0):o(!1)},function(){return o(!1)})},l.onerror=function(){return o(!1)}})}},{}],17:[function(r,i,h){i.exports=function(){var g=r("./mathlib"),o;onmessage=function(l){var c=l.data.opts;if(!c.src&&c.srcBitmap){var d=new OffscreenCanvas(c.width,c.height),s=d.getContext("2d");s.drawImage(c.srcBitmap,0,0),c.src=s.getImageData(0,0,c.width,c.height).data,d.width=d.height=0,d=null,c.srcBitmap.close(),c.srcBitmap=null}o||(o=new g(l.data.features));var a=o.resizeAndUnsharp(c);postMessage({data:a},[a.buffer])}}},{"./mathlib":1}],18:[function(r,i,h){var g,o,l,c,d,s,a,A;function u(b){b<.5&&(b=.5);var x=Math.exp(.726*.726)/b,v=Math.exp(-x),E=Math.exp(-2*x),j=(1-v)*(1-v)/(1+2*x*v-E);return g=j,o=j*(x-1)*v,l=j*(x+1)*v,c=-j*E,d=2*v,s=-E,a=(g+o)/(1-d-s),A=(l+c)/(1-d-s),new Float32Array([g,o,l,c,d,s,a,A])}function p(b,x,v,E,j,D){var S,I,y,_,M,L,O,R,P,N,m,B,C,k;for(P=0;P<D;P++){for(L=P*j,O=P,R=0,S=b[L],M=S*E[6],_=M,m=E[0],B=E[1],C=E[4],k=E[5],N=0;N<j;N++)I=b[L],y=I*m+S*B+_*C+M*k,M=_,_=y,S=I,v[R]=_,R++,L++;for(L--,R--,O+=D*(j-1),S=b[L],M=S*E[7],_=M,I=S,m=E[2],B=E[3],N=j-1;N>=0;N--)y=I*m+S*B+_*C+M*k,M=_,_=y,S=I,I=b[L],x[O]=v[R]+_,L--,R--,O-=D}}function f(b,x,v,E){if(E){var j=new Uint16Array(b.length),D=new Float32Array(Math.max(x,v)),S=u(E);p(b,j,D,S,x,v),p(j,b,D,S,v,x)}}i.exports=f},{}],19:[function(r,i,h){var g=r("object-assign"),o=r("./lib/base64decode"),l=r("./lib/wa_detect"),c={js:!0,wasm:!0};function d(s){if(!(this instanceof d))return new d(s);var a=g({},c,s||{});if(this.options=a,this.__cache={},this.__init_promise=null,this.__modules=a.modules||{},this.__memory=null,this.__wasm={},this.__isLE=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1,!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}d.prototype.has_wasm=l,d.prototype.use=function(s){return this.__modules[s.name]=s,this.options.wasm&&this.has_wasm()&&s.wasm_fn?this[s.name]=s.wasm_fn:this[s.name]=s.fn,this},d.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(new Error(`mathlib: only "wasm" was enabled, but it's not supported`));var s=this;return this.__init_promise=Promise.all(Object.keys(s.__modules).map(function(a){var A=s.__modules[a];return!s.options.wasm||!s.has_wasm()||!A.wasm_fn||s.__wasm[a]?null:WebAssembly.compile(s.__base64decode(A.wasm_src)).then(function(u){s.__wasm[a]=u})})).then(function(){return s}),this.__init_promise},d.prototype.__base64decode=o,d.prototype.__reallocate=function(s){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(s/(64*1024))}),this.__memory;var a=this.__memory.buffer.byteLength;return a<s&&this.__memory.grow(Math.ceil((s-a)/(64*1024))),this.__memory},d.prototype.__instance=function(s,a,A){if(a&&this.__reallocate(a),!this.__wasm[s]){var u=this.__modules[s];this.__wasm[s]=new WebAssembly.Module(this.__base64decode(u.wasm_src))}if(!this.__cache[s]){var p={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[s]=new WebAssembly.Instance(this.__wasm[s],{env:g(p,A||{})})}return this.__cache[s]},d.prototype.__align=function(s,a){a=a||8;var A=s%a;return s+(A?a-A:0)},i.exports=d},{"./lib/base64decode":20,"./lib/wa_detect":21,"object-assign":22}],20:[function(r,i,h){var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";i.exports=function(o){for(var l=o.replace(/[\r\n=]/g,""),c=l.length,d=new Uint8Array(c*3>>2),s=0,a=0,A=0;A<c;A++)A%4===0&&A&&(d[a++]=s>>16&255,d[a++]=s>>8&255,d[a++]=s&255),s=s<<6|g.indexOf(l.charAt(A));var u=c%4*6;return u===0?(d[a++]=s>>16&255,d[a++]=s>>8&255,d[a++]=s&255):u===18?(d[a++]=s>>10&255,d[a++]=s>>2&255):u===12&&(d[a++]=s>>4&255),d}},{}],21:[function(r,i,h){var g;i.exports=function(){if(typeof g<"u"||(g=!1,typeof WebAssembly>"u"))return g;try{var o=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),l=new WebAssembly.Module(o),c=new WebAssembly.Instance(l,{});return c.exports.test(4)!==0&&(g=!0),g}catch{}return g}},{}],22:[function(r,i,h){var g=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;function c(s){if(s==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(s)}function d(){try{if(!Object.assign)return!1;var s=new String("abc");if(s[5]="de",Object.getOwnPropertyNames(s)[0]==="5")return!1;for(var a={},A=0;A<10;A++)a["_"+String.fromCharCode(A)]=A;var u=Object.getOwnPropertyNames(a).map(function(f){return a[f]});if(u.join("")!=="0123456789")return!1;var p={};return"abcdefghijklmnopqrst".split("").forEach(function(f){p[f]=f}),Object.keys(Object.assign({},p)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}i.exports=d()?Object.assign:function(s,a){for(var A,u=c(s),p,f=1;f<arguments.length;f++){A=Object(arguments[f]);for(var b in A)o.call(A,b)&&(u[b]=A[b]);if(g){p=g(A);for(var x=0;x<p.length;x++)l.call(A,p[x])&&(u[p[x]]=A[p[x]])}}return u}},{}],23:[function(r,i,h){var g=arguments[3],o=arguments[4],l=arguments[5],c=JSON.stringify;i.exports=function(d,s){for(var a,A=Object.keys(l),u=0,p=A.length;u<p;u++){var f=A[u],b=l[f].exports;if(b===d||b&&b.default===d){a=f;break}}if(!a){a=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var x={},u=0,p=A.length;u<p;u++){var f=A[u];x[f]=f}o[a]=["function(require,module,exports){"+d+"(self); }",x]}var v=Math.floor(Math.pow(16,8)*Math.random()).toString(16),E={};E[a]=a,o[v]=["function(require,module,exports){var f = require("+c(a)+");(f.default ? f.default : f)(self);}",E];var j={};D(v);function D(L){j[L]=!0;for(var O in o[L][1]){var R=o[L][1][O];j[R]||D(R)}}var S="("+g+")({"+Object.keys(j).map(function(L){return c(L)+":["+o[L][0]+","+c(o[L][1])+"]"}).join(",")+"},{},["+c(v)+"])",I=window.URL||window.webkitURL||window.mozURL||window.msURL,y=new Blob([S],{type:"text/javascript"});if(s&&s.bare)return y;var _=I.createObjectURL(y),M=new Worker(_);return M.objectURL=_,M}},{}],"/index.js":[function(r,i,h){function g(m,B){return s(m)||d(m,B)||l(m,B)||o()}function o(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l(m,B){if(m){if(typeof m=="string")return c(m,B);var C=Object.prototype.toString.call(m).slice(8,-1);if(C==="Object"&&m.constructor&&(C=m.constructor.name),C==="Map"||C==="Set")return Array.from(m);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return c(m,B)}}function c(m,B){(B==null||B>m.length)&&(B=m.length);for(var C=0,k=new Array(B);C<B;C++)k[C]=m[C];return k}function d(m,B){var C=m==null?null:typeof Symbol<"u"&&m[Symbol.iterator]||m["@@iterator"];if(C!=null){var k=[],Q=!0,H=!1,U,G;try{for(C=C.call(m);!(Q=(U=C.next()).done)&&(k.push(U.value),!(B&&k.length===B));Q=!0);}catch(z){H=!0,G=z}finally{try{!Q&&C.return!=null&&C.return()}finally{if(H)throw G}}return k}}function s(m){if(Array.isArray(m))return m}var a=r("object-assign"),A=r("webworkify"),u=r("./lib/mathlib"),p=r("./lib/pool"),f=r("./lib/utils"),b=r("./lib/worker"),x=r("./lib/stepper"),v=r("./lib/tiler"),E=r("./lib/mm_resize/resize_filter_info"),j={},D=!1;try{typeof navigator<"u"&&navigator.userAgent&&(D=navigator.userAgent.indexOf("Safari")>=0)}catch{}var S=1;typeof navigator<"u"&&(S=Math.min(navigator.hardwareConcurrency||1,4));var I={tile:1024,concurrency:S,features:["js","wasm","ww"],idle:2e3,createCanvas:function(m,B){var C=document.createElement("canvas");return C.width=m,C.height=B,C}},y={filter:"mks2013",unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},_=!1,M=!1,L=!1,O=!1,R=!1;function P(){return{value:A(b),destroy:function(){if(this.value.terminate(),typeof window<"u"){var m=window.URL||window.webkitURL||window.mozURL||window.msURL;m&&m.revokeObjectURL&&this.value.objectURL&&m.revokeObjectURL(this.value.objectURL)}}}}function N(m){if(!(this instanceof N))return new N(m);this.options=a({},I,m||{});var B="lk_".concat(this.options.concurrency);this.__limit=j[B]||f.limiter(this.options.concurrency),j[B]||(j[B]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}N.prototype.init=function(){var m=this;if(this.__initPromise)return this.__initPromise;if(typeof ImageData<"u"&&typeof Uint8ClampedArray<"u")try{new ImageData(new Uint8ClampedArray(400),10,10),_=!0}catch{}typeof ImageBitmap<"u"&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?M=!0:this.debug("ImageBitmap does not support .close(), disabled"));var B=this.options.features.slice();if(B.indexOf("all")>=0&&(B=["cib","wasm","js","ww"]),this.__requested_features=B,this.__mathlib=new u(B),B.indexOf("ww")>=0&&typeof window<"u"&&"Worker"in window)try{var C=r("webworkify")(function(){});C.terminate(),this.features.ww=!0;var k="wp_".concat(JSON.stringify(this.options));j[k]?this.__workersPool=j[k]:(this.__workersPool=new p(P,this.options.idle),j[k]=this.__workersPool)}catch{}var Q=this.__mathlib.init().then(function(z){a(m.features,z.features)}),H;M?H=f.cib_support(this.options.createCanvas).then(function(z){if(m.features.cib&&B.indexOf("cib")<0){m.debug("createImageBitmap() resize supported, but disabled by config");return}B.indexOf("cib")>=0&&(m.features.cib=z)}):H=Promise.resolve(!1),L=f.can_use_canvas(this.options.createCanvas);var U;M&&_&&B.indexOf("ww")!==-1?U=f.worker_offscreen_canvas_support():U=Promise.resolve(!1),U=U.then(function(z){O=z});var G=f.cib_can_use_region().then(function(z){R=z});return this.__initPromise=Promise.all([Q,H,U,G]).then(function(){return m}),this.__initPromise},N.prototype.__invokeResize=function(m,B){var C=this;return B.__mathCache=B.__mathCache||{},Promise.resolve().then(function(){return C.features.ww?new Promise(function(k,Q){var H=C.__workersPool.acquire();B.cancelToken&&B.cancelToken.catch(function(G){return Q(G)}),H.value.onmessage=function(G){H.release(),G.data.err?Q(G.data.err):k(G.data)};var U=[];m.src&&U.push(m.src.buffer),m.srcBitmap&&U.push(m.srcBitmap),H.value.postMessage({opts:m,features:C.__requested_features,preload:{wasm_nodule:C.__mathlib.__}},U)}):{data:C.__mathlib.resizeAndUnsharp(m,B.__mathCache)}})},N.prototype.__extractTileData=function(m,B,C,k,Q){if(this.features.ww&&O&&(f.isCanvas(B)||R))return this.debug("Create tile for OffscreenCanvas"),createImageBitmap(k.srcImageBitmap||B,m.x,m.y,m.width,m.height).then(function(G){return Q.srcBitmap=G,Q});if(f.isCanvas(B))return k.srcCtx||(k.srcCtx=B.getContext("2d")),this.debug("Get tile pixel data"),Q.src=k.srcCtx.getImageData(m.x,m.y,m.width,m.height).data,Q;this.debug("Draw tile imageBitmap/image to temporary canvas");var H=this.options.createCanvas(m.width,m.height),U=H.getContext("2d");return U.globalCompositeOperation="copy",U.drawImage(k.srcImageBitmap||B,m.x,m.y,m.width,m.height,0,0,m.width,m.height),this.debug("Get tile pixel data"),Q.src=U.getImageData(0,0,m.width,m.height).data,H.width=H.height=0,Q},N.prototype.__landTileData=function(m,B,C){var k;if(this.debug("Convert raw rgba tile result to ImageData"),B.bitmap)return C.toCtx.drawImage(B.bitmap,m.toX,m.toY),null;if(_)k=new ImageData(new Uint8ClampedArray(B.data),m.toWidth,m.toHeight);else if(k=C.toCtx.createImageData(m.toWidth,m.toHeight),k.data.set)k.data.set(B.data);else for(var Q=k.data.length-1;Q>=0;Q--)k.data[Q]=B.data[Q];return this.debug("Draw tile"),D?C.toCtx.putImageData(k,m.toX,m.toY,m.toInnerX-m.toX,m.toInnerY-m.toY,m.toInnerWidth+1e-5,m.toInnerHeight+1e-5):C.toCtx.putImageData(k,m.toX,m.toY,m.toInnerX-m.toX,m.toInnerY-m.toY,m.toInnerWidth,m.toInnerHeight),null},N.prototype.__tileAndResize=function(m,B,C){var k=this,Q={srcCtx:null,srcImageBitmap:null,isImageBitmapReused:!1,toCtx:null},H=function(U){return k.__limit(function(){if(C.canceled)return C.cancelToken;var G={width:U.width,height:U.height,toWidth:U.toWidth,toHeight:U.toHeight,scaleX:U.scaleX,scaleY:U.scaleY,offsetX:U.offsetX,offsetY:U.offsetY,filter:C.filter,unsharpAmount:C.unsharpAmount,unsharpRadius:C.unsharpRadius,unsharpThreshold:C.unsharpThreshold};return k.debug("Invoke resize math"),Promise.resolve(G).then(function(z){return k.__extractTileData(U,m,C,Q,z)}).then(function(z){return k.debug("Invoke resize math"),k.__invokeResize(z,C)}).then(function(z){return C.canceled?C.cancelToken:(Q.srcImageData=null,k.__landTileData(U,z,Q))})})};return Promise.resolve().then(function(){if(Q.toCtx=B.getContext("2d"),f.isCanvas(m))return null;if(f.isImageBitmap(m))return Q.srcImageBitmap=m,Q.isImageBitmapReused=!0,null;if(f.isImage(m))return M?(k.debug("Decode image via createImageBitmap"),createImageBitmap(m).then(function(U){Q.srcImageBitmap=U}).catch(function(U){return null})):null;throw new Error('Pica: ".from" should be Image, Canvas or ImageBitmap')}).then(function(){if(C.canceled)return C.cancelToken;k.debug("Calculate tiles");var U=v({width:C.width,height:C.height,srcTileSize:k.options.tile,toWidth:C.toWidth,toHeight:C.toHeight,destTileBorder:C.__destTileBorder}),G=U.map(function(Z){return H(Z)});function z(Z){Z.srcImageBitmap&&(Z.isImageBitmapReused||Z.srcImageBitmap.close(),Z.srcImageBitmap=null)}return k.debug("Process tiles"),Promise.all(G).then(function(){return k.debug("Finished!"),z(Q),B},function(Z){throw z(Q),Z})})},N.prototype.__processStages=function(m,B,C,k){var Q=this;if(k.canceled)return k.cancelToken;var H=m.shift(),U=g(H,2),G=U[0],z=U[1],Z=m.length===0,ne;Z||E.q2f.indexOf(k.filter)<0?ne=k.filter:k.filter==="box"?ne="box":ne="hamming",k=a({},k,{toWidth:G,toHeight:z,filter:ne});var $;return Z||($=this.options.createCanvas(G,z)),this.__tileAndResize(B,Z?C:$,k).then(function(){return Z?C:(k.width=G,k.height=z,Q.__processStages(m,$,C,k))}).then(function(Me){return $&&($.width=$.height=0),Me})},N.prototype.__resizeViaCreateImageBitmap=function(m,B,C){var k=this,Q=B.getContext("2d");return this.debug("Resize via createImageBitmap()"),createImageBitmap(m,{resizeWidth:C.toWidth,resizeHeight:C.toHeight,resizeQuality:f.cib_quality_name(E.f2q[C.filter])}).then(function(H){if(C.canceled)return C.cancelToken;if(!C.unsharpAmount)return Q.drawImage(H,0,0),H.close(),Q=null,k.debug("Finished!"),B;k.debug("Unsharp result");var U=k.options.createCanvas(C.toWidth,C.toHeight),G=U.getContext("2d");G.drawImage(H,0,0),H.close();var z=G.getImageData(0,0,C.toWidth,C.toHeight);return k.__mathlib.unsharp_mask(z.data,C.toWidth,C.toHeight,C.unsharpAmount,C.unsharpRadius,C.unsharpThreshold),Q.putImageData(z,0,0),U.width=U.height=0,z=G=U=Q=null,k.debug("Finished!"),B})},N.prototype.resize=function(m,B,C){var k=this;this.debug("Start resize...");var Q=a({},y);if(isNaN(C)?C&&(Q=a(Q,C)):Q=a(Q,{quality:C}),Q.toWidth=B.width,Q.toHeight=B.height,Q.width=m.naturalWidth||m.width,Q.height=m.naturalHeight||m.height,Object.prototype.hasOwnProperty.call(Q,"quality")){if(Q.quality<0||Q.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(Q.quality));Q.filter=E.q2f[Q.quality]}if(B.width===0||B.height===0)return Promise.reject(new Error("Invalid output size: ".concat(B.width,"x").concat(B.height)));Q.unsharpRadius>2&&(Q.unsharpRadius=2),Q.canceled=!1,Q.cancelToken&&(Q.cancelToken=Q.cancelToken.then(function(U){throw Q.canceled=!0,U},function(U){throw Q.canceled=!0,U}));var H=3;return Q.__destTileBorder=Math.ceil(Math.max(H,2.5*Q.unsharpRadius|0)),this.init().then(function(){if(Q.canceled)return Q.cancelToken;if(k.features.cib){if(E.q2f.indexOf(Q.filter)>=0)return k.__resizeViaCreateImageBitmap(m,B,Q);k.debug("cib is enabled, but not supports provided filter, fallback to manual math")}if(!L){var U=new Error("Pica: cannot use getImageData on canvas, make sure fingerprinting protection isn't enabled");throw U.code="ERR_GET_IMAGE_DATA",U}var G=x(Q.width,Q.height,Q.toWidth,Q.toHeight,k.options.tile,Q.__destTileBorder);return k.__processStages(G,m,B,Q)})},N.prototype.resizeBuffer=function(m){var B=this,C=a({},y,m);if(Object.prototype.hasOwnProperty.call(C,"quality")){if(C.quality<0||C.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(C.quality));C.filter=E.q2f[C.quality]}return this.init().then(function(){return B.__mathlib.resizeAndUnsharp(C)})},N.prototype.toBlob=function(m,B,C){return B=B||"image/png",new Promise(function(k){if(m.toBlob){m.toBlob(function(z){return k(z)},B,C);return}if(m.convertToBlob){k(m.convertToBlob({type:B,quality:C}));return}for(var Q=atob(m.toDataURL(B,C).split(",")[1]),H=Q.length,U=new Uint8Array(H),G=0;G<H;G++)U[G]=Q.charCodeAt(G);k(new Blob([U],{type:B}))})},N.prototype.debug=function(){},i.exports=N},{"./lib/mathlib":1,"./lib/mm_resize/resize_filter_info":7,"./lib/pool":13,"./lib/stepper":14,"./lib/tiler":15,"./lib/utils":16,"./lib/worker":17,"object-assign":22,webworkify:23}]},{},[])("/index.js")})})(Et);var bi=Et.exports;const wi=en(bi);function Bt(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),r.push.apply(r,i)}return r}function _e(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Bt(Object(r),!0).forEach(function(i){yi(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bt(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Ci(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Dt(i.key),i)}}function vi(e,n,r){return n&&_t(e.prototype,n),r&&_t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function yi(e,n,r){return n=Dt(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function De(){return De=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},De.apply(this,arguments)}function Ii(e,n){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function Dt(e){var n=Ii(e,"string");return typeof n=="symbol"?n:String(n)}var St={exports:{}};(function(e){typeof window>"u"||function(n){var r=n.HTMLCanvasElement&&n.HTMLCanvasElement.prototype,i=n.Blob&&function(){try{return!!new Blob}catch{return!1}}(),h=i&&n.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),g=n.BlobBuilder||n.WebKitBlobBuilder||n.MozBlobBuilder||n.MSBlobBuilder,o=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,l=(i||g)&&n.atob&&n.ArrayBuffer&&n.Uint8Array&&function(c){var d,s,a,A,u,p,f,b,x;if(d=c.match(o),!d)throw new Error("invalid data URI");for(s=d[2]?d[1]:"text/plain"+(d[3]||";charset=US-ASCII"),a=!!d[4],A=c.slice(d[0].length),a?u=atob(A):u=decodeURIComponent(A),p=new ArrayBuffer(u.length),f=new Uint8Array(p),b=0;b<u.length;b+=1)f[b]=u.charCodeAt(b);return i?new Blob([h?f:p],{type:s}):(x=new g,x.append(p),x.getBlob(s))};n.HTMLCanvasElement&&!r.toBlob&&(r.mozGetAsFile?r.toBlob=function(c,d,s){var a=this;setTimeout(function(){s&&r.toDataURL&&l?c(l(a.toDataURL(d,s))):c(a.mozGetAsFile("blob",d))})}:r.toDataURL&&l&&(r.msToBlob?r.toBlob=function(c,d,s){var a=this;setTimeout(function(){(d&&d!=="image/png"||s)&&r.toDataURL&&l?c(l(a.toDataURL(d,s))):c(a.msToBlob(d))})}:r.toBlob=function(c,d,s){var a=this;setTimeout(function(){c(l(a.toDataURL(d,s)))})})),e.exports?e.exports=l:n.dataURLtoBlob=l}(window)})(St);var kt=St.exports,ji=function(e){return typeof Blob>"u"?!1:e instanceof Blob||Object.prototype.toString.call(e)==="[object Blob]"},Qt={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},Ei=typeof window<"u"&&typeof window.document<"u",te=Ei?window:{},Se=function(e){return e>0&&e<1/0},Bi=Array.prototype.slice;function We(e){return Array.from?Array.from(e):Bi.call(e)}var _i=/^image\/.+$/;function qe(e){return _i.test(e)}function Di(e){var n=qe(e)?e.substr(6):"";return n==="jpeg"&&(n="jpg"),".".concat(n)}var Mt=String.fromCharCode;function Si(e,n,r){var i="",h;for(r+=n,h=n;h<r;h+=1)i+=Mt(e.getUint8(h));return i}var ki=te.btoa;function Lt(e,n){for(var r=[],i=8192,h=new Uint8Array(e);h.length>0;)r.push(Mt.apply(null,We(h.subarray(0,i)))),h=h.subarray(i);return"data:".concat(n,";base64,").concat(ki(r.join("")))}function Qi(e){var n=new DataView(e),r;try{var i,h,g;if(n.getUint8(0)===255&&n.getUint8(1)===216)for(var o=n.byteLength,l=2;l+1<o;){if(n.getUint8(l)===255&&n.getUint8(l+1)===225){h=l;break}l+=1}if(h){var c=h+4,d=h+10;if(Si(n,c,4)==="Exif"){var s=n.getUint16(d);if(i=s===18761,(i||s===19789)&&n.getUint16(d+2,i)===42){var a=n.getUint32(d+4,i);a>=8&&(g=d+a)}}}if(g){var A=n.getUint16(g,i),u,p;for(p=0;p<A;p+=1)if(u=g+p*12+2,n.getUint16(u,i)===274){u+=8,r=n.getUint16(u,i),n.setUint16(u,1,i);break}}}catch{r=1}return r}function Mi(e){var n=0,r=1,i=1;switch(e){case 2:r=-1;break;case 3:n=-180;break;case 4:i=-1;break;case 5:n=90,i=-1;break;case 6:n=90;break;case 7:n=90,r=-1;break;case 8:n=-90;break}return{rotate:n,scaleX:r,scaleY:i}}var Li=/\.\d*(?:0|9){12}\d*$/;function Rt(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Li.test(e)?Math.round(e*n)/n:e}function xe(e){var n=e.aspectRatio,r=e.height,i=e.width,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",g=Se(i),o=Se(r);if(g&&o){var l=r*n;(h==="contain"||h==="none")&&l>i||h==="cover"&&l<i?r=i/n:i=r*n}else g?r=i/n:o&&(i=r*n);return{width:i,height:r}}function Ri(e){for(var n=We(new Uint8Array(e)),r=n.length,i=[],h=0;h+3<r;){var g=n[h],o=n[h+1];if(g===255&&o===218)break;if(g===255&&o===216)h+=2;else{var l=n[h+2]*256+n[h+3],c=h+l+2,d=n.slice(h,c);i.push(d),h=c}}return i.reduce(function(s,a){return a[0]===255&&a[1]===225?s.concat(a):s},[])}function Ui(e,n){var r=We(new Uint8Array(e));if(r[2]!==255||r[3]!==224)return e;var i=r[4]*256+r[5],h=[255,216].concat(n,r.slice(4+i));return new Uint8Array(h)}var Ti=te.ArrayBuffer,Ze=te.FileReader,se=te.URL||te.webkitURL,Pi=/\.\w+$/,Fi=te.Compressor,Oi=function(){function e(n,r){Ci(this,e),this.file=n,this.exif=[],this.image=new Image,this.options=_e(_e({},Qt),r),this.aborted=!1,this.result=null,this.init()}return vi(e,[{key:"init",value:function(){var n=this,r=this.file,i=this.options;if(!ji(r)){this.fail(new Error("The first argument must be a File or Blob object."));return}var h=r.type;if(!qe(h)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!se||!Ze){this.fail(new Error("The current browser does not support image compression."));return}Ti||(i.checkOrientation=!1,i.retainExif=!1);var g=h==="image/jpeg",o=g&&i.checkOrientation,l=g&&i.retainExif;if(se&&!o&&!l)this.load({url:se.createObjectURL(r)});else{var c=new Ze;this.reader=c,c.onload=function(d){var s=d.target,a=s.result,A={},u=1;o&&(u=Qi(a),u>1&&De(A,Mi(u))),l&&(n.exif=Ri(a)),o||l?!se||u>1?A.url=Lt(a,h):A.url=se.createObjectURL(r):A.url=a,n.load(A)},c.onabort=function(){n.fail(new Error("Aborted to read the image with FileReader."))},c.onerror=function(){n.fail(new Error("Failed to read the image with FileReader."))},c.onloadend=function(){n.reader=null},o||l?c.readAsArrayBuffer(r):c.readAsDataURL(r)}}},{key:"load",value:function(n){var r=this,i=this.file,h=this.image;h.onload=function(){r.draw(_e(_e({},n),{},{naturalWidth:h.naturalWidth,naturalHeight:h.naturalHeight}))},h.onabort=function(){r.fail(new Error("Aborted to load the image."))},h.onerror=function(){r.fail(new Error("Failed to load the image."))},te.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(te.navigator.userAgent)&&(h.crossOrigin="anonymous"),h.alt=i.name,h.src=n.url}},{key:"draw",value:function(n){var r=this,i=n.naturalWidth,h=n.naturalHeight,g=n.rotate,o=g===void 0?0:g,l=n.scaleX,c=l===void 0?1:l,d=n.scaleY,s=d===void 0?1:d,a=this.file,A=this.image,u=this.options,p=document.createElement("canvas"),f=p.getContext("2d"),b=Math.abs(o)%180===90,x=(u.resize==="contain"||u.resize==="cover")&&Se(u.width)&&Se(u.height),v=Math.max(u.maxWidth,0)||1/0,E=Math.max(u.maxHeight,0)||1/0,j=Math.max(u.minWidth,0)||0,D=Math.max(u.minHeight,0)||0,S=i/h,I=u.width,y=u.height;if(b){var _=[E,v];v=_[0],E=_[1];var M=[D,j];j=M[0],D=M[1];var L=[y,I];I=L[0],y=L[1]}x&&(S=I/y);var O=xe({aspectRatio:S,width:v,height:E},"contain");v=O.width,E=O.height;var R=xe({aspectRatio:S,width:j,height:D},"cover");if(j=R.width,D=R.height,x){var P=xe({aspectRatio:S,width:I,height:y},u.resize);I=P.width,y=P.height}else{var N=xe({aspectRatio:S,width:I,height:y}),m=N.width;I=m===void 0?i:m;var B=N.height;y=B===void 0?h:B}I=Math.floor(Rt(Math.min(Math.max(I,j),v))),y=Math.floor(Rt(Math.min(Math.max(y,D),E)));var C=-I/2,k=-y/2,Q=I,H=y,U=[];if(x){var G=0,z=0,Z=i,ne=h,$=xe({aspectRatio:S,width:i,height:h},{contain:"cover",cover:"contain"}[u.resize]);Z=$.width,ne=$.height,G=(i-Z)/2,z=(h-ne)/2,U.push(G,z,Z,ne)}if(U.push(C,k,Q,H),b){var Me=[y,I];I=Me[0],y=Me[1]}p.width=I,p.height=y,qe(u.mimeType)||(u.mimeType=a.type);var Gt="transparent";a.size>u.convertSize&&u.convertTypes.indexOf(u.mimeType)>=0&&(u.mimeType="image/jpeg");var zt=u.mimeType==="image/jpeg";if(zt&&(Gt="#fff"),f.fillStyle=Gt,f.fillRect(0,0,I,y),u.beforeDraw&&u.beforeDraw.call(this,f,p),!this.aborted&&(f.save(),f.translate(I/2,y/2),f.rotate(o*Math.PI/180),f.scale(c,s),f.drawImage.apply(f,[A].concat(U)),f.restore(),u.drew&&u.drew.call(this,f,p),!this.aborted)){var Wt=function(be){if(!r.aborted){var qt=function(we){return r.done({naturalWidth:i,naturalHeight:h,result:we})};if(be&&zt&&u.retainExif&&r.exif&&r.exif.length>0){var Zt=function(we){return qt(kt(Lt(Ui(we,r.exif),u.mimeType)))};if(be.arrayBuffer)be.arrayBuffer().then(Zt).catch(function(){r.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var pe=new Ze;r.reader=pe,pe.onload=function(we){var Ia=we.target;Zt(Ia.result)},pe.onabort=function(){r.fail(new Error("Aborted to read the compressed image with FileReader."))},pe.onerror=function(){r.fail(new Error("Failed to read the compressed image with FileReader."))},pe.onloadend=function(){r.reader=null},pe.readAsArrayBuffer(be)}}else qt(be)}};p.toBlob?p.toBlob(Wt,u.mimeType,u.quality):Wt(kt(p.toDataURL(u.mimeType,u.quality)))}}},{key:"done",value:function(n){var r=n.naturalWidth,i=n.naturalHeight,h=n.result,g=this.file,o=this.image,l=this.options;if(se&&o.src.indexOf("blob:")===0&&se.revokeObjectURL(o.src),h)if(l.strict&&!l.retainExif&&h.size>g.size&&l.mimeType===g.type&&!(l.width>r||l.height>i||l.minWidth>r||l.minHeight>i||l.maxWidth<r||l.maxHeight<i))h=g;else{var c=new Date;h.lastModified=c.getTime(),h.lastModifiedDate=c,h.name=g.name,h.name&&h.type!==g.type&&(h.name=h.name.replace(Pi,Di(h.type)))}else h=g;this.result=h,l.success&&l.success.call(this,h)}},{key:"fail",value:function(n){var r=this.options;if(r.error)r.error.call(this,n);else throw n}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=Fi,e}},{key:"setDefaults",value:function(n){De(Qt,n)}}]),e}();function Ni(){return window.navigator.brave!=null?window.navigator.brave.isBrave.name=="isBrave":!1}const Ut=T.forwardRef((e,n)=>{const{imageSrc:r,imageType:i,onImageCropped:h,width:g,height:o}=e,[l,c]=T.useState({x:0,y:0}),[d,s]=T.useState(1),[a,A]=T.useState(null);T.useState(null);const u=T.useCallback((D,S)=>{A(S)},[]);T.useImperativeHandle(n,()=>({async showCroppedImage(){try{if(r){const D=await v(r,a),S=await b(D),I=Ni()?await f(D):await p(S),y=await b(I);h(y)}else return"Nothing"}catch(D){console.error(D)}}}));async function p(D){const S=wi();let I=await E(D);const y=document.createElement("canvas");return y.height=128,y.width=128,new Promise(_=>{_(S.resize(I,y,{unsharpAmount:100,unsharpRadius:.7,unsharpThreshold:2}).then(M=>S.toBlob(M,i,1)))})}async function f(D){return new Promise((S,I)=>{new Oi(D,{quality:1,strict:!0,maxWidth:128,maxHeight:128,checkOrientation:!1,success:S,error:I})})}const b=async D=>await x(D),x=D=>new Promise((S,I)=>{const y=new FileReader;y.readAsDataURL(D),y.onload=()=>S(y.result),y.onerror=_=>I(_)});async function v(D,S){const I=await E(D),y=document.createElement("canvas");y.width=S.width,y.height=S.height;const _=y.getContext("2d"),M="none.jpg";return _.drawImage(I,S.x,S.y,S.width,S.height,0,0,S.width,S.height),new Promise((L,O)=>{y.toBlob(R=>{L(new File([R],M,{type:i,lastModified:Date.now()}))},i,1)})}const E=D=>new Promise((S,I)=>{const y=new Image;y.addEventListener("load",()=>S(y)),y.addEventListener("error",_=>I(_)),y.setAttribute("crossOrigin","anonymous"),y.src=D}),j=D=>{s(D)};return t.jsx(T.Fragment,{children:t.jsx(Hi,{children:t.jsx(Ja,{image:r,crop:l,zoom:d,aspect:1,onCropChange:c,onCropComplete:u,onZoomChange:j,style:{containerStyle:{width:g||"250px",height:o||"250px",position:"relative",borderRadius:"20px"}}})})})}),Hi=le.div`
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  `,Gi=({onClose:e})=>{const{values:n,setFieldValue:r,isValid:i}=ze(),h=T.useRef(),[g,o]=T.useState(n.channelIcon),l=async s=>{var A;const a=(A=s.currentTarget.files)==null?void 0:A[0];o(void 0),a&&await d(a)},c=async s=>{var A;s.preventDefault(),s.stopPropagation(),o(void 0);const a=(A=s.dataTransfer.files)==null?void 0:A[0];a&&await d(a)},d=async s=>{r("channelIcon",s);const a=new FileReader;a.readAsDataURL(s),a.onloadend=()=>{r("imageSrc",a.result),r("imageType",s.type)}};return t.jsxs(w,{display:"flex",flexDirection:"column",gap:"spacing-lg",alignItems:"center",alignSelf:"stretch",children:[t.jsx(w,{display:"flex",width:"100%",justifyContent:"end",color:"text-tertiary",cursor:"pointer",children:t.jsx(Us,{size:24,onClick:e})}),t.jsxs(w,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing-lg",children:[t.jsx(F,{variant:"bes-regular",color:"text-tertiary",children:"Upload a PNG, JPG upto 1MB. Crop the image to resize to 128px."}),t.jsx(nn,{id:"file-upload",onChange:l,onDrop:c,children:t.jsxs(w,{width:{initial:"500px",ml:"325px"},padding:"spacing-xxl spacing-none",display:"flex",flexDirection:"column",alignItems:"center",border:"border-sm dashed stroke-tertiary",borderRadius:"radius-md",backgroundColor:"surface-secondary",gap:"spacing-md",children:[g?t.jsx(w,{width:"128px",height:"128px",borderRadius:"radius-md",children:t.jsx("img",{style:{borderRadius:"inherit"},width:"100%",height:"100%",src:g,alt:"Cropped Img"})}):t.jsx(Ut,{width:"200px",height:"200px",imageSrc:n.imageSrc,imageType:n.imageType,onImageCropped:s=>{o(s),r("channelIcon",s)},ref:h}),t.jsxs(w,{display:"flex",gap:"spacing-xxxs",children:[t.jsx(F,{variant:"bs-semibold",color:"text-tertiary",children:"Drag and Drop or"}),t.jsx("label",{htmlFor:"file-upload",children:t.jsx(F,{variant:"bs-semibold",color:"text-brand-medium",css:de`
                    cursor: pointer;
                  `,children:"Browse to Choose"})})]})]})})]}),t.jsx(w,{children:g?t.jsx(t.Fragment,{children:t.jsx(W,{onClick:()=>{i&&(r("channelIcon",g),e())},children:"Upload Image"})}):t.jsx(t.Fragment,{children:t.jsx(W,{onClick:()=>{h.current.showCroppedImage()},children:"Crop Image"})})})]})},zi=({UploadLogoComponent:e,displayUplaodLogoModal:n})=>{const{values:r,errors:i,handleChange:h}=ze();return t.jsxs(w,{display:"flex",flexDirection:{initial:"row",ml:"column"},gap:"spacing-lg",width:"100%",padding:"spacing-sm spacing-md",justifyContent:"center",children:[t.jsxs(w,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing-sm",children:[t.jsx(w,{width:"90px",height:"90px",border:"border-sm solid stroke-tertiary",borderRadius:"radius-md",css:de`
            img {
              border-radius: 16px;
            }
          `,children:t.jsx("img",{width:"100%",height:"100%",src:r.channelIcon})}),t.jsx(W,{size:"extraSmall",onClick:n,children:"Upload Logo"})]}),t.jsx(w,{display:{initial:"block",ml:"none"},height:"330px",margin:"spacing-none spacing-lg",children:t.jsx(me,{orientation:"vertical"})}),t.jsx(w,{display:{initial:"none",ml:"block"},children:t.jsx(me,{orientation:"horizontal"})}),t.jsx(w,{width:{initial:"550px",ml:"350px"},children:t.jsx("form",{children:t.jsx(w,{display:"flex",flexDirection:"column",gap:"spacing-xl",alignSelf:"stretch",children:t.jsxs(w,{display:"flex",flexDirection:"column",gap:"spacing-sm",alignSelf:"stretch",css:de`
                flex: 1;
              `,children:[t.jsx(he,{required:!0,label:"Channel Name",value:r.channelName,onChange:h("channelName"),error:!!i.channelName,errorMessage:i.channelName,totalCount:32}),t.jsx(rn,{required:!0,label:"Channel Description",placeholder:"Get notified about ...",description:"Enter a Brief description of the notifications the user will receive",error:!!i.channelDesc,errorMessage:i.channelDesc,value:r.channelDesc,onChange:h("channelDesc"),totalCount:250}),t.jsx(he,{required:!0,label:"Channel Website URL",value:r.channelURL,onChange:h("channelURL"),error:!!i.channelURL,errorMessage:i.channelURL})]})})})}),t.jsx(e,{InnerComponent:Gi,modalPosition:Yt.ON_PARENT})]})},Wi=({setActiveState:e,channelDetails:n})=>{const{isModalOpen:r,showModal:i,ModalComponent:h}=Jt();return t.jsx(t.Fragment,{children:t.jsx(fi,{channelDetails:n,children:t.jsxs(w,{display:"flex",width:{initial:"846px",ml:"357px"},padding:"spacing-md",flexDirection:"column",alignItems:"center",gap:"spacing-lg",backgroundColor:"surface-primary",borderRadius:"radius-lg",margin:"spacing-none spacing-none spacing-sm spacing-none",children:[n&&t.jsx(zi,{displayUplaodLogoModal:i,UploadLogoComponent:h,channelDetails:n}),t.jsx(xi,{setActiveState:e})]})})})},qi=e=>Pe().shape({delegateAddress:X().required(ee("Delegate Address")).test("address","Invalid Wallet Address",n=>Ya(n)).test("uniqueDelegate","Delegate address already exists",n=>!(e!=null&&e.find(r=>r===n)))}),Zi=({handleAddDelegate:e,channel_delegates:n})=>Fe({initialValues:{delegateAddress:""},validationSchema:qi(n),onSubmit:r=>{e()}}),Ji=Pe().shape({subgraphId:X().required(ee("Subgraph Id")),pollTime:X().required(ee("Poll Time")).matches(/^\d+$/,"Must be a valid timestamp in seconds").test("is-valid-timestamp","Invalid timestamp format",e=>{const n=parseInt(e,10);return!isNaN(n)&&n>0})}),Yi=({handleAddSubgraph:e})=>Fe({initialValues:{subgraphId:"",pollTime:null},validationSchema:Ji,onSubmit:n=>{e()}}),Ki=({setActiveState:e})=>{const{account:n,provider:r}=Y(),{mutate:i,isPending:h}=zn(),[g,o]=T.useState(null),l=Yi({handleAddSubgraph:()=>{o(null);const c=l.values.pollTime+"+"+l.values.subgraphId,d=Xe(c);var s=r.getSigner(n);console.debug(s),i({signer:s,identityBytes:d},{onSuccess:()=>{console.log("Subgraph Added successfully"),e("dashboard")},onError:a=>{console.log("Error in adding subgraoh",a),o("Error in adding subgraph. Please Check console for more reason")}})}});return t.jsxs(w,{display:"flex",alignSelf:"stretch",flexDirection:"column",backgroundColor:"surface-primary",borderRadius:"radius-lg",padding:"spacing-lg",gap:"spacing-xl",width:{initial:"537px",ml:"275px"},children:[t.jsx(ve,{title:"Add Subgraph",description:"Enter Subgraph ID and Poll time (atleast 60 sec)"}),g&&t.jsx(ce,{variant:"error",icon:t.jsx(Ae,{color:"icon-state-danger-bold",size:24}),message:g,width:"100%"}),t.jsx("form",{onSubmit:l.handleSubmit,children:t.jsxs(w,{display:"flex",flexDirection:"column",gap:"spacing-md",children:[t.jsx(he,{required:!0,label:"Subgraph ID",value:l.values.subgraphId,onChange:l.handleChange("subgraphId"),error:l.touched.subgraphId&&!!l.errors.subgraphId,errorMessage:l.touched.subgraphId?l.errors.subgraphId:""}),t.jsx(he,{required:!0,label:"Poll Time (in Seconds)",value:l.values.pollTime,onChange:l.handleChange("pollTime"),error:l.touched.pollTime&&!!l.errors.pollTime,errorMessage:l.touched.pollTime?l.errors.pollTime:""})]})}),t.jsxs(w,{display:"flex",gap:"spacing-sm",justifyContent:"center",children:[t.jsx(W,{size:"medium",variant:"outline",onClick:()=>e("dashboard"),children:"Back"}),t.jsx(W,{disabled:h,onClick:()=>l.handleSubmit(),children:h?"Adding":"Add Subgraph"})]})]})},Vi=({setActiveState:e})=>{const{wallet:n}=Y(),{userPushSDKInstance:r}=ue(a=>a.user),{handleConnectWalletAndEnableProfile:i}=T.useContext(et),[h,g]=T.useState(null),{data:o,refetch:l}=st(r),{mutate:c,isPending:d}=Gn(),s=Zi({handleAddDelegate:async()=>{if(!s.isValid)return;g(null);let a=r;r!=null&&r.readmode()&&(a=await i({wallet:n}),!a||(a==null?void 0:a.readmode()))||c({userPushSDKInstance:a,delegateAddress:s.values.delegateAddress},{onSuccess:()=>{console.log("Channel Delegate Added Successfully"),l(),e("dashboard")},onError:A=>{console.log("Error in adding delegatee",A),g("Error in delegating. Check console for more reasons")}})},channel_delegates:o});return t.jsxs(w,{display:"flex",alignSelf:"stretch",flexDirection:"column",backgroundColor:"surface-primary",borderRadius:"radius-lg",padding:"spacing-lg",gap:"spacing-xl",width:{initial:"537px",ml:"275px"},children:[t.jsx(ve,{title:"Add Delegate",description:"Add an account who can send notifications on behalf of the channel"}),h&&t.jsx(ce,{variant:"error",icon:t.jsx(Ae,{color:"icon-state-danger-bold",size:24}),message:h,width:"100%"}),t.jsx("form",{onSubmit:s.handleSubmit,children:t.jsxs(w,{display:"flex",flexDirection:"column",gap:"spacing-md",children:[t.jsx(he,{required:!0,label:"Delegate Address",onChange:s.handleChange("delegateAddress"),value:s.values.delegateAddress,error:!!s.errors.delegateAddress,errorMessage:s.errors.delegateAddress}),t.jsxs(w,{display:"flex",gap:"spacing-sm",justifyContent:"center",children:[t.jsx(W,{size:"medium",variant:"outline",onClick:()=>e("dashboard"),children:"Back"}),t.jsx(W,{disabled:d,children:d?"Adding":"Add"})]})]})})]})},Je=({channelDetails:e,loadingChannelDetails:n,showAddNewChain:r=!1})=>{var c,d;const i=tt(),h=((d=(c=e==null?void 0:e.aliases)==null?void 0:c.filter(s=>s==null?void 0:s.is_alias_verified))==null?void 0:d.map(s=>s.alias_blockchain_id))||[],[g,o]=T.useState("Copy Wallet"),l=()=>{e&&(navigator.clipboard.writeText(e.channel),o("Copied")),setTimeout(()=>{o("Copy Wallet")},1e3)};return t.jsxs(w,{display:"flex",gap:"spacing-sm",alignItems:"center",children:[t.jsx(J,{isLoading:n,children:t.jsx(w,{width:"90px",height:"90px",border:"border-sm solid stroke-tertiary",borderRadius:"radius-md",css:de`
            img {
              border-radius: 16px;
            }
          `,children:t.jsx("img",{width:"100%",height:"100%",src:e==null?void 0:e.iconV2})})}),t.jsxs(w,{display:"flex",flexDirection:"column",gap:"spacing-xxxs",children:[t.jsx(J,{isLoading:n,width:"100%",children:t.jsxs(w,{display:"flex",alignItems:{initial:"center",ml:"baseline"},flexDirection:{ml:"column",initial:"row"},children:[t.jsx(F,{variant:"h4-semibold",color:"text-primary",children:e==null?void 0:e.name}),t.jsxs(w,{display:"flex",alignItems:"center",children:[t.jsxs(w,{display:"flex",alignItems:"center",margin:{initial:"spacing-none spacing-none spacing-none spacing-xxxs",ml:"spacing-none"},children:[!!(e!=null&&e.is_alias_verified)&&t.jsx(at,{size:22,color:"icon-tertiary"}),t.jsx(Ka,{width:18,height:18}),h.length>0&&h.map(s=>{const a=$a[s];return a?t.jsx(w,{display:"flex",css:de`
                          margin-left: -4px;
                        `,children:t.jsx(a,{width:18,height:18},s)}):null})]}),r&&t.jsx(w,{display:"flex",cursor:"pointer",onClick:()=>i(an.AddNewChain),children:t.jsx(Va,{size:18,color:"icon-primary"})})]})]})}),t.jsxs(w,{display:"flex",flexDirection:"column",gap:"spacing-xs",children:[t.jsx(J,{isLoading:n,width:"100%",children:t.jsxs(w,{display:"flex",gap:"spacing-xxxs",children:[t.jsx(F,{color:"text-tertiary",variant:"c-regular",children:sn(e?e==null?void 0:e.channel:"",5)}),t.jsx(on,{description:g,children:t.jsx(w,{cursor:"pointer",children:t.jsx(un,{onClick:l,size:14,color:"icon-tertiary"})})})]})}),t.jsxs(w,{display:"flex",gap:"spacing-xs",children:[t.jsx(J,{isLoading:n,children:t.jsxs(F,{color:"text-tertiary",variant:"c-regular",children:[e==null?void 0:e.subscriber_count," subscribers"]})}),(e==null?void 0:e.activation_status)===0&&t.jsxs(w,{display:"flex",alignItems:"center",gap:"spacing-xxxs",padding:"spacing-none spacing-xxxs",backgroundColor:"surface-state-danger-subtle",borderRadius:"radius-xs",children:[t.jsx(it,{size:8,color:"icon-state-danger-bold"}),t.jsxs(F,{color:"text-state-danger-bold",variant:"bes-semibold",children:[" ","Deactivated"]})]}),(e==null?void 0:e.activation_status)===1&&t.jsxs(w,{display:"flex",alignItems:"center",gap:"spacing-xxxs",padding:"spacing-none spacing-xxxs",backgroundColor:"surface-state-success-subtle",borderRadius:"radius-xs",children:[t.jsx(it,{size:8,color:"icon-state-success-bold"}),t.jsxs(F,{color:"text-state-success-bold",variant:"bes-semibold",children:[" ","Active"]})]})]})]})]})]})},Tt=({title:e})=>{const n=async()=>{await Qs()};return t.jsxs(w,{display:"flex",flexDirection:"row",justifyContent:"center",gap:"spacing-xxxs",children:[t.jsx(F,{variant:"bes-semibold",color:"text-tertiary",children:e}),t.jsx(F,{css:de`
          cursor: pointer;
        `,variant:"bes-semibold",color:"text-brand-medium",onClick:n,children:"Import Token"})]})},ke=50,$i=({setActiveState:e})=>{const{provider:n,account:r}=Y(),{data:i,isLoading:h,refetch:g}=fe(r),{mutate:o,isPending:l}=Ne(),{mutate:c,isPending:d}=Wn(),[s,a]=T.useState(""),[A,u]=T.useState(0),[p,f]=T.useState(0),[b,x]=T.useState(!1),v=async()=>{x(!0);const S=await Te({address:r,provider:n});x(!1),f(S)};T.useEffect(()=>{!r||!n||(E(),v())},[r,n]);const E=async()=>{const S=await gn({address:r,provider:n,contractAddress:V.epnscore});u(parseInt(S))},j=()=>{a("");var S=n.getSigner(r);console.debug(S);const I=Ce((ke-A).toString(),18);o({noOfTokenToApprove:I,signer:S},{onSuccess:()=>{E()},onError:y=>{console.log("Error in Approving PUSH",y),y.code=="ACTION_REJECTED"?a("User rejected signature. Please try again."):a("Error in approving PUSH Tokens")}})},D=()=>{a("");const S=Ce(ke.toString(),18);var I=n.getSigner(r);console.debug(I),c({fees:S,signer:I},{onSuccess:()=>{console.log("Channel Reactivated"),g(),e("dashboard")},onError:y=>{console.log("Error in Reactivating channel",y),y.code=="ACTION_REJECTED"?a("User rejected signature. Please try again."):a("Error in reactivating channel. Check console for more reasons.")}})};return t.jsxs(w,{display:"flex",width:{initial:"648px",ml:"357px"},padding:"spacing-md",flexDirection:"column",alignItems:"center",gap:"spacing-lg",backgroundColor:"surface-primary",borderRadius:"radius-lg",margin:"spacing-none spacing-none spacing-sm spacing-none",children:[t.jsx(ve,{title:"Reactivate Channel",description:"Performing this action will make your channel visible to users."}),s&&t.jsx(ce,{variant:"error",icon:t.jsx(Ae,{color:"icon-state-danger-bold",size:24}),message:s,width:"100%"}),t.jsx(Je,{channelDetails:i,loadingChannelDetails:h}),t.jsxs(w,{display:"flex",flexDirection:"column",gap:"spacing-sm",width:"-webkit-fill-available",children:[t.jsx(ye,{title:"Channel Reactivation Fee",fees:ke,pushApprovalAmount:A,showFaucet:!0,showBalance:!0,balance:p,setBalance:f}),t.jsx(Tt,{title:"Don\u2019t see Push token in your wallet?"})]}),t.jsxs(w,{display:"flex",gap:"spacing-sm",justifyContent:"center",children:[t.jsx(W,{size:"medium",variant:"outline",onClick:()=>e("dashboard"),children:"Back"}),A>=ke?t.jsx(W,{disabled:d,onClick:D,children:d?"Activating":"Activate"}):t.jsx(W,{disabled:l,onClick:j,children:l?"Approving":"Approve PUSH"})]})]})},Xi=40,ea=({setActiveState:e})=>{const{provider:n,account:r}=Y(),{data:i,isLoading:h,refetch:g}=fe(r),{mutate:o,isPending:l}=qn(),[c,d]=T.useState(""),s=()=>{d("");var a=n.getSigner(r);console.debug(a),o({signer:a},{onSuccess:()=>{console.log("Channel Deactivated Successfully"),g(),e("dashboard")},onError:A=>{console.log("Error in Deactivating Channel",A),A.code=="ACTION_REJECTED"?d("User rejected signature. Please try again."):d("Error in deactivating Channel. Check console for more reason.")}})};return t.jsxs(w,{display:"flex",width:{initial:"648px",ml:"357px"},padding:"spacing-md",flexDirection:"column",alignItems:"center",gap:"spacing-lg",backgroundColor:"surface-primary",borderRadius:"radius-lg",margin:"spacing-none spacing-none spacing-sm spacing-none",children:[t.jsx(ve,{title:"Deactivate Channel",description:"Deactivating your channel will disable sending notifications from it."}),c&&t.jsx(ce,{variant:"error",icon:t.jsx(Ae,{color:"icon-state-danger-bold",size:24}),message:c,width:"100%"}),t.jsx(Je,{channelDetails:i,loadingChannelDetails:h}),t.jsx(ye,{fees:Xi,title:"You will receive as a refund"}),t.jsx(F,{variant:"bs-semibold",color:"text-primary",children:"Are you sure you want to deactivate your channel?"}),t.jsxs(w,{display:"flex",gap:"spacing-sm",justifyContent:"center",children:[t.jsx(W,{size:"medium",variant:"outline",onClick:()=>e("dashboard"),children:"Back"}),t.jsx(W,{disabled:l,variant:"danger",onClick:s,children:l?"Deactivating":"Deactivate"})]})]})},ta=({channelDetails:e,loadingChannelDetails:n,setActiveState:r})=>t.jsxs(w,{display:"flex",justifyContent:"space-between",width:"100%",flexDirection:{ml:"column",initial:"row"},gap:{ml:"spacing-md"},children:[t.jsx(Je,{channelDetails:e,loadingChannelDetails:n,showAddNewChain:!0}),t.jsxs(w,{display:"flex",height:"fit-content",gap:"spacing-xxs",justifyContent:"center",children:[t.jsx(J,{isLoading:n,children:t.jsx(W,{variant:"outline",size:"small",onClick:()=>r("editChannel"),disabled:(e==null?void 0:e.activation_status)===0,children:"Edit Channel"})}),t.jsx(J,{isLoading:n,children:t.jsx(Xa,{trigger:"click",overlay:t.jsxs(es,{children:[t.jsx(nt,{label:"Add Subgraph Details",icon:t.jsx(vn,{size:24}),onClick:()=>r("addSubgraph")}),e!=null&&e.activation_status?t.jsx(nt,{label:"Deactivate Channel",icon:t.jsx(bn,{size:24}),onClick:()=>r("deactivateChannel"),type:"error"}):t.jsx(nt,{label:"Activate Channel",icon:t.jsx(xn,{size:24}),onClick:()=>r("reactivateChannel"),type:"success"})]}),children:t.jsx(w,{padding:"spacing-xs",border:"border-sm solid stroke-tertiary",borderRadius:"radius-xs",display:"flex",height:"16px",cursor:"pointer",alignItems:"center",children:t.jsx(yn,{size:24,color:"icon-primary"})})})})]})]}),na=({settingName:e,type:n})=>t.jsxs(w,{display:"flex",flexDirection:"column",height:"43px",children:[t.jsxs(w,{display:"flex",justifyContent:"space-between",alignItems:"center",height:"100%",children:[t.jsx(F,{variant:"bs-semibold",color:"text-primary",children:e}),n==2&&t.jsx(ln,{children:"Range"}),n==3&&t.jsx(ln,{children:"Multi-Range"})]}),t.jsx(me,{})]}),Pt=({state:e,title:n,subTitle:r,onClick:i})=>t.jsxs(w,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"spacing-sm",height:"200px",children:[e=="delegatee"&&t.jsx(Cn,{size:48,color:"icon-tertiary"}),e=="notificationSettings"&&t.jsx(jn,{size:48,color:"icon-tertiary"}),t.jsxs(w,{display:"flex",flexDirection:"column",alignItems:"center",children:[t.jsx(F,{textAlign:"center",variant:"h6-semibold",color:"text-secondary",children:n}),t.jsx(F,{textAlign:"center",variant:"bes-regular",color:"text-tertiary",children:r})]}),i&&t.jsx(W,{variant:"primary",size:"small",onClick:i,children:"Add Setting"})]}),ra=({channel_settings:e,loadingChannelSettings:n})=>{const r=tt(),i=()=>{r("/channel/settings")};return t.jsxs(w,{display:"flex",padding:"spacing-sm",width:"-webkit-fill-available",border:"border-sm solid stroke-tertiary",borderRadius:"radius-sm",flexDirection:"column",children:[t.jsxs(w,{display:"flex",flexDirection:"column",gap:"spacing-xxs",children:[t.jsxs(w,{display:"flex",justifyContent:"space-between",children:[t.jsxs(w,{display:"flex",flexDirection:"column",gap:"spacing-xxxs",children:[t.jsx(J,{isLoading:n,children:t.jsx(F,{variant:"h5-semibold",color:"text-primary",children:"Notification Settings"})}),t.jsx(J,{isLoading:n,children:t.jsxs(F,{variant:"c-regular",color:"text-tertiary",children:[" ","Manage notification preferences for users"]})})]}),e&&t.jsx(W,{size:"extraSmall",variant:"tertiary",leadingIcon:t.jsx(En,{}),onClick:()=>r("/channel/settings"),children:"Manage"})]}),t.jsx(me,{})]}),t.jsx(w,{display:"flex",flexDirection:"column",overflow:"auto",height:{initial:"274px",ml:"230px"},justifyContent:e?"flex-start":"center",children:e?t.jsx(t.Fragment,{children:JSON.parse(e).map(h=>t.jsx(na,{settingName:h.description,type:h.type}))}):t.jsx(Pt,{state:"notificationSettings",title:"No settings yet",subTitle:"Add options for users to customize notifications.",onClick:i})})]})},ia=({delegate_address:e,setChannelDashboardError:n,refetchChannelDelegate:r})=>{const{userPushSDKInstance:i}=ue(A=>A.user),{wallet:h}=Y(),{handleConnectWalletAndEnableProfile:g}=T.useContext(et),{mutate:o,isPending:l}=Hn(),c=async()=>{if(l)return;let A=i;i!=null&&i.readmode()&&(A=await g({wallet:h}),!A||(A==null?void 0:A.readmode()))||o({userPushSDKInstance:A,delegateAddress:e},{onSuccess:()=>{console.log("Channel Delegate Removed Successfully"),r()},onError:u=>{console.log("Error in removing delegatee",u),n("User rejected signature. Please try again.")}})},[d,s]=T.useState("Copy Wallet"),a=()=>{e&&(navigator.clipboard.writeText(e),s("Copied")),setTimeout(()=>{s("Copy Wallet")},1e3)};return t.jsxs(w,{display:"flex",flexDirection:"column",height:"43px",children:[t.jsxs(w,{display:"flex",justifyContent:"space-between",alignItems:"center",height:"100%",children:[t.jsxs(w,{display:"flex",alignItems:"center",gap:"spacing-xxxs",children:[t.jsx(F,{variant:"bs-semibold",color:"text-primary",children:sn(e,7)}),t.jsx(on,{description:d,children:t.jsx(w,{cursor:"pointer",children:t.jsx(un,{onClick:a,size:14,color:"icon-tertiary"})})})]}),t.jsxs(w,{display:"flex",cursor:"pointer",gap:"spacing-xxxs",onClick:c,children:[t.jsx(In,{size:16,color:"icon-primary"}),t.jsx(F,{color:"text-tertiary-inverse",children:l?"Removing":"Remove"})]})]}),t.jsx(me,{})]})},aa=({channel_delegates:e,loadingDelegates:n,setChannelDashboardError:r,refetchChannelDelegate:i,setActiveState:h})=>t.jsxs(w,{display:"flex",padding:"spacing-sm",border:"border-sm solid stroke-tertiary",borderRadius:"radius-sm",width:"-webkit-fill-available",flexDirection:"column",children:[t.jsxs(w,{display:"flex",flexDirection:"column",gap:"spacing-xxs",children:[t.jsxs(w,{display:"flex",justifyContent:"space-between",children:[t.jsxs(w,{display:"flex",flexDirection:"column",gap:"spacing-xxxs",children:[t.jsx(J,{isLoading:n,children:t.jsx(F,{variant:"h5-semibold",color:"text-primary",children:"Channel Delegates"})}),t.jsx(J,{isLoading:n,children:t.jsxs(F,{variant:"c-regular",color:"text-tertiary",children:[" ","Delegates can send channel notifications"," "]})})]}),t.jsx(W,{onClick:()=>h("addDelegate"),size:"extraSmall",variant:"tertiary",leadingIcon:t.jsx(Ps,{}),children:"Add"})]}),t.jsx(me,{})]}),t.jsx(w,{display:"flex",flexDirection:"column",overflow:"auto",height:{initial:"274px",ml:"230px"},justifyContent:e?"flex-start":"center",children:e&&e.length>0?t.jsx(t.Fragment,{children:e.map(g=>t.jsx(ia,{delegate_address:g,setChannelDashboardError:r,refetchChannelDelegate:i}))}):t.jsx(Pt,{state:"delegatee",title:"No delegates yet",subTitle:"Delegates added to your channel will appear here."})})]}),sa=({setChannelDashboardError:e,setActiveState:n})=>{const{account:r}=Y(),{userPushSDKInstance:i}=ue(d=>d.user),{data:h,isLoading:g}=fe(r),{data:o,refetch:l,isLoading:c}=st(i);return t.jsxs(w,{display:"flex",gap:"spacing-md",width:"100%",flexDirection:{ml:"column",initial:"row"},children:[t.jsx(ra,{channel_settings:h==null?void 0:h.channel_settings,loadingChannelSettings:g}),t.jsx(aa,{channel_delegates:o,loadingDelegates:c,setChannelDashboardError:e,refetchChannelDelegate:l,setActiveState:n})]})},oa=()=>t.jsx(w,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignSelf:"stretch",padding:"spacing-none spacing-sm",color:"text-tertiary",children:t.jsxs(w,{display:"flex",flexDirection:{initial:"row",ml:"column"},gap:{initial:"spacing-sm",ml:"spacing-none"},children:[t.jsx(Ve,{to:"https://push.org/privacy/",target:"_blank",textProps:{variant:"bes-semibold",color:"text-tertiary"},children:"Privacy Policy"}),t.jsx(Ve,{to:"https://push.org/tos/",target:"_blank",textProps:{variant:"bes-semibold",color:"text-tertiary"},children:"Terms and Conditions"})]})}),la=({setActiveState:e})=>{const{account:n}=Y(),{data:r,isLoading:i}=fe(n),[h,g]=T.useState("");return t.jsxs(t.Fragment,{children:[t.jsxs(w,{display:"flex",width:{initial:"846px",ml:"357px"},padding:"spacing-md",flexDirection:"column",alignItems:"center",gap:"spacing-lg",backgroundColor:"surface-primary",borderRadius:"radius-lg",margin:"spacing-none spacing-none spacing-sm spacing-none",children:[t.jsx(ta,{channelDetails:r,loadingChannelDetails:i,setActiveState:e}),t.jsxs(w,{display:"flex",flexDirection:"column",gap:"spacing-sm",width:"100%",children:[h&&t.jsx(ce,{variant:"error",icon:t.jsx(Ae,{color:"icon-state-danger-bold",size:24}),message:h,width:"100%"}),t.jsx(sa,{setChannelDashboardError:g,setActiveState:e})]})]}),t.jsx(oa,{})]})},ca=()=>{const{account:e}=Y(),[n,r]=T.useState("dashboard"),{data:i}=fe(e);return t.jsxs(w,{children:[n==="dashboard"&&t.jsx(la,{setActiveState:r}),n==="addDelegate"&&t.jsx(Vi,{setActiveState:r}),n==="addSubgraph"&&t.jsx(Ki,{setActiveState:r}),n==="reactivateChannel"&&t.jsx($i,{setActiveState:r}),n==="deactivateChannel"&&t.jsx(ea,{setActiveState:r}),n==="editChannel"&&i&&t.jsx(Wi,{setActiveState:r,channelDetails:i})]})},da=Pe().shape({channelName:X().required(ee("Channel Name")).max(32,Oe(32)),channelDesc:X().required(ee("Channel Description")).max(250,Oe(250)),channelURL:X().required(ee("Channel URL")).test("url","Please enter a valid channel url",e=>fn.test(e))}),ha=({children:e,onSubmit:n})=>{const r=Fe({initialValues:{channelName:"",channelDesc:"",channelURL:"",image:null},validationSchema:da,onSubmit:n});return t.jsx(An,{value:r,children:e})},Ye=()=>{const e=pn();if(!e)throw new Error("useChainAliasFormikContext must be used within a FormikChainAliasProvider");return e},ua=({handleNextStep:e,setActiveStepKey:n})=>{const{values:r,touched:i,setFieldTouched:h,setFieldValue:g,errors:o,validateForm:l,setTouched:c}=Ye(),d=()=>{l().then(s=>{c({channelName:!0,channelDesc:!0,channelURL:!0}),Object.keys(s).length===0&&(e("uploadLogo"),n("uploadLogo"))})};return t.jsx(w,{display:"flex",flexDirection:"column",alignSelf:"stretch",children:t.jsxs(w,{display:"flex",flexDirection:"column",gap:"spacing-xl",alignSelf:"stretch",children:[t.jsxs(w,{display:"flex",flexDirection:"column",gap:"spacing-sm",alignSelf:"stretch",children:[t.jsx(he,{required:!0,label:"Channel Name",value:r.channelName,onChange:s=>{const a=s.target.value;h("channelName",!0),g("channelName",a)},totalCount:32,error:i.channelName&&!!(o!=null&&o.channelName),errorMessage:i.channelName?o==null?void 0:o.channelName:""}),t.jsx(rn,{required:!0,label:"Channel Description",placeholder:"Get notified about ...",description:"Enter a Brief description of the notifications the user will receive",value:r.channelDesc,onChange:s=>{const a=s.target.value;h("channelDesc",!0),g("channelDesc",a)},totalCount:250,error:i.channelDesc&&!!(o!=null&&o.channelDesc),errorMessage:i.channelURL?o==null?void 0:o.channelDesc:""}),t.jsx(he,{required:!0,label:"Channel Website URL",value:r.channelURL,onChange:s=>{const a=s.target.value;h("channelURL",!0),g("channelURL",a)},error:i.channelURL&&!!(o!=null&&o.channelURL),errorMessage:i.channelURL?o==null?void 0:o.channelURL:""})]}),t.jsx(w,{display:"flex",justifyContent:"center",children:t.jsx(W,{onClick:d,children:"Next"})})]})})},Ke=50,ga=[{label:"Channel Info",value:"channelInfo"},{label:"Upload Logo",value:"uploadLogo"},{label:"Stake Fees",value:"stakeFees"}],Qe={progress:null,progressInfo:"",processingInfo:""},Ft={txErrorStatus:0,txError:""},Aa=()=>t.jsxs(w,{display:"flex",flexDirection:"column",alignItems:"center",alignSelf:"stretch",children:[t.jsx(F,{variant:"h3-semibold",color:"text-primary",display:{ml:"none",dp:"block"},children:"Create Your Channel"}),t.jsx(F,{variant:"bs-regular",color:"text-tertiary",display:{ml:"none",dp:"block"},children:"Creating your own notification channel to manage, send and notify users."}),t.jsx(F,{variant:"h4-semibold",color:"text-primary",display:{ml:"block",dp:"none"},children:"Create Your Channel"}),t.jsx(F,{variant:"bes-regular",color:"text-tertiary",display:{ml:"block",dp:"none"},textAlign:"center",children:"Creating your own notification channel to manage, send and notify users."})]}),pa=({progressState:e})=>t.jsxs(w,{display:"flex",flexDirection:"column",alignSelf:"stretch",gap:"spacing-xl",alignItems:"center",children:[t.jsx(w,{padding:"spacing-md",backgroundColor:"surface-secondary",borderRadius:"radius-sm",width:"-webkit-fill-available",children:t.jsx(F,{textAlign:"center",variant:"h5-semibold",color:"text-brand-medium",children:e.progressInfo})}),t.jsx(w,{width:"400px",children:t.jsx(ts,{percent:e.progress,color:"#D548EC",backgroundColor:"#F3AEFF",height:"4px"})}),t.jsxs(w,{display:"flex",flexDirection:"row",alignItems:"center",gap:"spacing-xxxs",children:[t.jsx(ns,{type:rs.PROCESSING,size:16,color:"#D548EC"}),t.jsx(F,{variant:"bs-semibold",color:"text-secondary",children:e.processingInfo})]})]}),fa=()=>{const{switchChain:e}=Y();return t.jsxs(t.Fragment,{children:[t.jsx(w,{display:"flex",flexDirection:"column",padding:"spacing-md",backgroundColor:"surface-secondary",borderRadius:"radius-sm",width:"-webkit-fill-available",children:t.jsx(F,{textAlign:"center",variant:"h5-semibold",color:"text-brand-medium",children:"Please select Ethereum Sepolia Network in your Wallet to create a channel."})}),t.jsx(w,{display:"flex",justifyContent:"center",children:t.jsx(W,{onClick:()=>e(oe.coreContractChain),children:"Change Network"})})]})},ma=({handleNextStep:e})=>{const{provider:n,account:r}=Y(),[i,h]=T.useState(0),[g,o]=T.useState(!1),l=async()=>{o(!0);const a=await Te({address:r,provider:n});o(!1),h(a)};T.useEffect(()=>{!r||!n||l()},[i,r]);const{handleSubmit:c,validateForm:d}=Ye(),s=()=>{d().then(a=>{(a.channelName||a.channelDesc||a.channelURL)&&e("channelInfo"),a.image&&e("uploadLogo"),Object.keys(a).length||c()})};return t.jsxs(w,{display:"flex",flexDirection:"column",alignSelf:"stretch",justifyContent:"center",gap:"spacing-xl",children:[t.jsx(w,{display:"flex",flexDirection:"column",gap:"spacing-sm",children:t.jsxs(w,{display:"flex",flexDirection:"column",gap:"spacing-sm",width:"-webkit-fill-available",children:[t.jsx(ye,{title:"Amount for Staking",fees:Ke,showFaucet:!0,showBalance:!0,balance:i,setBalance:h}),t.jsx(Tt,{title:"Don\u2019t see Push token in your wallet?"})]})}),t.jsx(w,{display:"flex",justifyContent:"center",children:t.jsx(W,{disabled:i<Ke||g,onClick:()=>{s()},children:"Create Channel"})})]})},xa=({view:e,setView:n,setActiveStepKey:r,handleNextStep:i})=>{const h=T.useRef(),{values:g,setFieldValue:o}=Ye(),l=async s=>{var A;const a=(A=s.currentTarget.files)==null?void 0:A[0];n(!1),a&&await d(a)},c=async s=>{var A;s.preventDefault(),s.stopPropagation(),n(!1);const a=(A=s.dataTransfer.files)==null?void 0:A[0];a&&await d(a)},d=async s=>{o("image",s);const a=new FileReader;a.readAsDataURL(s),a.onloadend=()=>{o("imageSrc",a.result),o("imageType",s.type)}};return t.jsxs(w,{display:"flex",flexDirection:"column",gap:"spacing-lg",alignItems:"center",alignSelf:"stretch",children:[t.jsxs(w,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing-lg",children:[t.jsx(F,{variant:"bes-regular",color:"text-tertiary",children:"Upload a PNG, JPG upto 1MB. Crop the image to resize to 128px."}),t.jsx(nn,{id:"file-upload",onChange:l,onDrop:c,children:t.jsxs(w,{width:{initial:"500px",ml:"325px"},padding:"spacing-xxl spacing-none",display:"flex",flexDirection:"column",alignItems:"center",border:"border-sm dashed stroke-tertiary",borderRadius:"radius-md",backgroundColor:"surface-secondary",gap:"spacing-md",children:[g!=null&&g.image?e?t.jsx(w,{width:"128px",height:"128px",borderRadius:"radius-md",children:t.jsx("img",{style:{borderRadius:"inherit"},width:"100%",height:"100%",src:g.image,alt:"Cropped Img"})}):t.jsx(Ut,{width:"200px",height:"200px",imageSrc:g.imageSrc,imageType:g.imageType,onImageCropped:s=>{n(!0),o("image",s)},ref:h}):t.jsx(wn,{size:50}),t.jsxs(w,{display:"flex",gap:"spacing-xxxs",children:[t.jsx(F,{variant:"bs-semibold",color:"text-tertiary",children:"Drag and Drop or"}),t.jsx("label",{htmlFor:"file-upload",children:t.jsx(F,{variant:"bs-semibold",color:"text-brand-medium",css:de`cursor:pointer;`,children:"Browse to Choose"})})]})]})})]}),(g==null?void 0:g.image)&&(e?t.jsx(t.Fragment,{children:t.jsx(W,{disabled:!e&&!(g!=null&&g.image),onClick:()=>{i("stakeFees"),r("stakeFees")},children:"Next"})}):t.jsx(t.Fragment,{children:t.jsx(W,{onClick:()=>{h.current.showCroppedImage()},children:"Crop Image"})}))]})},ba=async({provider:e,account:n})=>{let r=await new re(V.pushToken,ie.pushToken,e).allowance(n,V.epnscore);r=r==null?void 0:r.toString();const i=is(r);return Number(i)},Ot=Ce(Ke.toString(),18),wa=()=>{const{account:e,provider:n,isWalletConnected:r,chainId:i,connect:h}=Y(),g=oe.coreContractChain===i,{mutate:o}=Ne(),{mutate:l}=Nn(),c=tt(),[d,s]=T.useState("channelInfo"),[a,A]=T.useState(["channelInfo"]),u=_=>{A([...new Set([...a,_])]),s(_)},[p,f]=T.useState(!1),[b,x]=T.useState(Qe),[v,E]=T.useState(Ft),j=(_,M,L)=>{x(O=>({...O,progress:_,progressInfo:M,processingInfo:L}))},D=(_,M)=>{E(L=>({...L,txErrorStatus:_,txError:M}))},S=(_,M)=>{o({noOfTokenToApprove:Ot,signer:_},{onSuccess:L=>{L.status===1&&(j(60,"Please complete the transaction in your wallet to continue.","Approving PUSH"),I(_,M))},onError:L=>(console.log("Error in approving PUSH Token",L),L.code===4001||L.code==="ACTION_REJECTED"?(console.log("Signature error ",L),D(1,"User Rejected Signature. Please try again.")):D(2,"Transaction failed due to one of the following reasons:"),x(Qe),!1)})},I=(_,M)=>{let L=as.GENERAL;const O="1+"+M,R=Xe(O);j(70,"Please complete the transaction in your wallet to continue.","Creating Channel..."),l({channelType:L,identityBytes:R,fees:Ot,signer:_},{onSuccess:P=>{P.status===0?D(2,"Transaction failed due to one of the following reasons:"):(j(80,"Please wait while we confirm the transaction..","Transaction Confirmed.."),setTimeout(()=>{j(90,"Creating your channel, Aligning pixels, adjusting padding... This may take some time.","Redirecting... Please do not refresh")},3e3),setTimeout(()=>{j(100,"Creating your channel, Aligning pixels, adjusting padding... This may take some time.","Redirecting... Please do not refresh"),console.log("Navigating to Channel Dashboard route"),c(`${an.ChannelDashboard}/${e}`)},5e3))},onError:P=>{console.log("Error in transaction from query >>>>",P),P.code===4001||P.code==="ACTION_REJECTED"?(console.log("Signature error ",P),D(1,"User Rejected Signature. Please try again."),x(Qe)):(console.error("Error in creating channel--> %o",P),console.error({error:P}),j(0,"There was an error in creating the Channel","Kindly Contact support@epns.io to resolve the issue."))}})},y=async _=>{if(x(Qe),E(Ft),!r){h();return}j(10,"Checking for PUSH Token Approval","Loading...");const M=await ba({provider:n,account:e}),L=JSON.stringify({name:_.channelName,info:_.channelDesc,url:_.channelURL,icon:_.image});j(20,"Please wait, payload is getting uploaded to IPFS","Loading...");let O=await tn(L);console.debug("IPFS storagePointer:",O),j(40,"Please complete the transaction in your wallet to continue.","Payload Uploaded...");var R=n.getSigner(e);console.debug(R),M<50?S(R,O):I(R,O)};return t.jsx(ha,{onSubmit:_=>y(_),children:t.jsxs(w,{padding:{initial:"spacing-lg",ml:"spacing-sm"},backgroundColor:"surface-primary",borderRadius:"radius-md",display:"flex",width:{initial:"648px",ml:"325px"},flexDirection:"column",alignItems:"center",gap:"spacing-xl",children:[t.jsx(Aa,{}),!g&&t.jsx(fa,{}),g&&t.jsxs(t.Fragment,{children:[v.txErrorStatus!==0&&t.jsx(ce,{variant:"error",icon:t.jsx(Ae,{color:"icon-state-danger-bold",size:24}),message:v.txError,width:"100%"}),b.progress?t.jsx(pa,{progressState:b}):t.jsxs(w,{display:"flex",flexDirection:"column",gap:"spacing-lg",alignItems:"center",alignSelf:"stretch",children:[t.jsx(Os,{steps:ga,completedSteps:a,setActiveStepKey:_=>s(_)}),d=="channelInfo"&&t.jsx(ua,{handleNextStep:u,setActiveStepKey:s}),d==="uploadLogo"&&t.jsx(xa,{view:p,setView:f,setActiveStepKey:s,handleNextStep:u}),d==="stakeFees"&&t.jsx(ma,{handleNextStep:u})]})]})]})})},Ca=10;let Nt=null;const va=()=>{Xt();const{account:e,chainId:n,wallet:r}=Y(),{channelDetails:i,delegatees:h,aliasDetails:{aliasAddr:g,aliasEthAddr:o,isAliasVerified:l,aliasAddrFromContract:c}}=ue(u=>u.admin),{processingState:d}=ue(u=>u.channelCreation);ue(u=>u.contracts),ue(u=>u.user),T.useContext(et),ss();const s=os();T.useState(!1),T.useState(!0),T.useState(!1);const a=oe.coreContractChain===n;ls(600),T.useEffect(()=>{if(!a||!i||c||i==="unfetched")return;const u=cs(i);if(u){const{address:p,chainId:f}=u;s(ds(p)),s(hs(f))}else s(Ue(0))},[i,c]);const A=async u=>{let{aliasAddress:p=null,isAliasVerified:f=null}=await gs.getInstance().getChannelDetailsFromAddress(u);return p=="NULL"&&(p=null),{aliasAddress:p,aliasVerified:f}};return T.useEffect(()=>{!a||!c||d===0||(Nt=setInterval(async()=>{const{aliasAddress:u,aliasVerified:p}=await A(e);u?(s(us(u)),p?(s(hn(!0)),s(Ue(0))):(s(Ue(2)),s(hn(!1)))):d!=0&&d!=1&&s(Ue(1))},Ca*1e3))},[c]),g!==null&&clearInterval(Nt),t.jsxs($e,{children:[(i==="unfetched"||d===null)&&t.jsx(ut,{}),i!=="unfetched"&&t.jsxs(dn,{justifyContent:d===0&&"flex-start",height:"fit-content",children:[!i&&d===0&&t.jsx(wa,{}),i&&t.jsx(ca,{})]})]})};le(dn)`
  align-items: center;
  align-self: center;
  background: ${e=>e.theme.default.bg};
  display: flex;
  flex-direction: column;
  flex: initial;
  justify-content: center;
  max-width: 1200px;
  border-radius: ${q.ADJUSTMENTS.RADIUS.LARGE} ${q.ADJUSTMENTS.RADIUS.LARGE}
    ${q.ADJUSTMENTS.RADIUS.LARGE} ${q.ADJUSTMENTS.RADIUS.LARGE};
  width: calc(
    100% - ${ge.MINI_MODULES.DESKTOP.RIGHT} - ${ge.MINI_MODULES.DESKTOP.LEFT} -
      ${q.ADJUSTMENTS.PADDING.HUGE} - ${q.ADJUSTMENTS.PADDING.HUGE}
  );
  padding: ${q.ADJUSTMENTS.PADDING.DEFAULT};
  position: relative;
  margin: ${q.ADJUSTMENTS.MARGIN.MINI_MODULES.DESKTOP};
  @media ${cn.laptop} {
    margin: ${q.ADJUSTMENTS.MARGIN.MINI_MODULES.TABLET};
    padding: ${q.ADJUSTMENTS.PADDING.BIG};
    width: calc(
      100% - ${ge.MINI_MODULES.TABLET.RIGHT} - ${ge.MINI_MODULES.TABLET.LEFT} -
        ${q.ADJUSTMENTS.PADDING.BIG} - ${q.ADJUSTMENTS.PADDING.BIG}
    );
  }
  @media ${cn.mobileL} {
    margin: ${q.ADJUSTMENTS.MARGIN.BIG_MODULES.MOBILE};
    padding: ${q.ADJUSTMENTS.PADDING.DEFAULT};
    width: calc(
      100% - ${ge.MINI_MODULES.MOBILE.RIGHT} - ${ge.MINI_MODULES.MOBILE.LEFT} -
        ${q.ADJUSTMENTS.PADDING.DEFAULT} - ${q.ADJUSTMENTS.PADDING.DEFAULT}
    );
    min-height: calc(100vh - ${q.CONSTANTS.HEADER_HEIGHT}px - ${ge.BIG_MODULES.MOBILE.TOP});
    overflow-y: scroll;
    border-radius: ${q.ADJUSTMENTS.RADIUS.LARGE} ${q.ADJUSTMENTS.RADIUS.LARGE} 0 0;
  }
`,oe.coreContractChain;function ya(){As.pageview("/channel_dashboard");const[e,n]=rt.useState(!0),[r,i]=rt.useState(null),h=()=>i(null);return rt.useEffect(()=>{r&&h()},[r]),t.jsxs(t.Fragment,{children:[e?t.jsx(va,{}):t.jsx(ut,{}),r&&t.jsx(ms,{notification:r,clearToast:h})]})}le.div`
  flex: 1;
  display: flex;

  margin-bottom: 15px;
  overflow: hidden;
`;let Ht;mn=()=>t.jsx(Ht,{children:t.jsx(ya,{})}),Ht=le(ps)`
  flex: 1;
  flex-direction: column;
  align-self: stretch;
  justify-content: flex-start;
`});export{Hs as __tla,mn as default};

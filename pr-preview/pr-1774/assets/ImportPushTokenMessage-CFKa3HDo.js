import{b2 as H,bp as kt,bj as ae,ck as oe,b3 as q,dW as nt,bq as W,bW as Ae,dS as se,dX as ue,dY as he,cl as ce,aZ as le,b0 as z,bk as ge,bl as Mt,bm as fe,dZ as de,bg as me,d_ as at,d$ as pe,b6 as Ie,br as we,__tla as be}from"./index-ChP14JWd.js";import{g as Be,m as ye,i as Ee,__tla as Ce}from"./PushTokenContractHelper-HySMt1_y.js";import{u as Qe,__tla as ve}from"./useMutation-BJPvCWJ1.js";let jt,Dt,ut,Ut,Rt,_e=Promise.all([(()=>{try{return be}catch{}})(),(()=>{try{return Ce}catch{}})(),(()=>{try{return ve}catch{}})()]).then(async()=>{let ht,ct,lt;ht=w=>{const{svgProps:u,...e}=w;return H.jsx(kt,{componentName:"Swap",icon:H.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...u,children:[H.jsx("path",{d:"M13.25 5L5 13.25H27",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),H.jsx("path",{d:"M18.75 27L27 18.75H5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]}),...e})},ut=w=>{const{svgProps:u,...e}=w;return H.jsx(kt,{componentName:"TickCircleFilled",icon:H.jsx("svg",{width:"inherit",height:"inherit",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...u,children:H.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 16C4 12.8174 5.26428 9.76516 7.51472 7.51472C9.76516 5.26428 12.8174 4 16 4C19.1826 4 22.2348 5.26428 24.4853 7.51472C26.7357 9.76516 28 12.8174 28 16C28 19.1826 26.7357 22.2348 24.4853 24.4853C22.2348 26.7357 19.1826 28 16 28C12.8174 28 9.76516 26.7357 7.51472 24.4853C5.26428 22.2348 4 19.1826 4 16ZM15.3152 21.136L22.224 12.4992L20.976 11.5008L15.0848 18.8624L10.912 15.3856L9.888 16.6144L15.3152 21.1376V21.136Z",fill:"currentColor"})}),...e})},ct=({noOfPushTokensToCheck:w,mintPushToken:u,mintingPush:e})=>{const A=ae.appEnv==="prod",{isModalOpen:f,showModal:p,ModalComponent:r}=oe();return H.jsxs(q,{display:"flex",padding:"spacing-sm spacing-md",backgroundColor:"surface-brand-subtle",borderRadius:"radius-none radius-none radius-sm radius-sm",justifyContent:"space-between",alignItems:"center",flexDirection:{ml:"column",initial:"row"},gap:"spacing-xs",children:[H.jsx(nt,{isLoading:e,children:H.jsx(W,{variant:"c-regular",color:"text-primary",children:A?"Your balance is low. Swap to get PUSH Tokens.":"Follow these steps to get Testnet PUSH."})}),A?H.jsx(Ae,{size:"extraSmall",leadingIcon:H.jsx(ht,{}),onClick:p,children:"Swap PUSH Token"}):H.jsxs(q,{display:"flex",gap:"s3",children:[H.jsx(nt,{isLoading:e,children:H.jsx(se,{to:ue,target:"_blank",children:H.jsxs(q,{display:"flex",gap:"spacing-xxs",alignItems:"baseline",color:"text-brand-medium",cursor:"pointer",children:[H.jsx(q,{border:"border-sm solid stroke-brand-medium",width:"16px",height:"15px",borderRadius:"radius-xl",display:"flex",justifyContent:"center",color:"text-brand-medium",children:H.jsx(W,{variant:"c-regular",color:"text-brand-medium",children:"1"})}),H.jsx(W,{color:"text-brand-medium",children:"Sepolia ETH Faucet"})]})})}),H.jsx(nt,{isLoading:e,children:H.jsxs(q,{display:"flex",gap:"spacing-xxs",alignItems:"baseline",color:"text-brand-medium",cursor:"pointer",onClick:()=>u(1e3),children:[H.jsx(q,{border:"border-sm solid stroke-brand-medium",width:"16px",height:"15px",borderRadius:"radius-xl",display:"flex",justifyContent:"center",children:H.jsx(W,{variant:"c-regular",color:"text-brand-medium",children:"2"})}),H.jsx(W,{color:"text-brand-medium",children:"Get Testnet Push"})]})})]}),f&&H.jsx(r,{InnerComponent:he,InnerComponentProps:{defaultPushTokenAmount:w},modalPadding:"0px",modalPosition:ce.ON_ROOT})]})},Dt=({fees:w,pushApprovalAmount:u,title:e,description:A,balance:f=0,setBalance:p=()=>{},showFaucet:r=!1,showBalance:a=!1})=>{const{provider:n,account:s}=le(),[o,t]=z.useState(!1),[l,i]=z.useState(!1),c=async()=>{t(!0);const d=await Be({address:s,provider:n});t(!1),p(d)};z.useEffect(()=>{!s||!n||c()},[f,s]);const g=async d=>{i(!0);try{const m=await ye({noOfTokens:d,provider:n,account:s});i(!1),p(m)}catch(m){console.log("Error >>",m),i(!1)}};return H.jsx(q,{display:"flex",flexDirection:"column",gap:"spacing-sm",width:"-webkit-fill-available",children:H.jsxs(q,{display:"flex",flexDirection:"column",alignSelf:"stretch",children:[H.jsxs(q,{display:"flex",flexDirection:"row",justifyContent:"space-between",backgroundColor:"surface-secondary",borderRadius:f<w?"radius-sm radius-sm radius-none radius-none":"radius-sm",padding:"spacing-sm spacing-md",alignItems:"center",children:[H.jsxs(q,{width:{initial:"inherit",ml:"200px"},children:[H.jsx(W,{variant:"h4-semibold",color:"text-primary",display:{ml:"none",dp:"block"},children:e}),H.jsx(W,{variant:"h5-semibold",color:"text-primary",display:{ml:"block",dp:"none"},children:e}),H.jsx(W,{variant:"c-regular",color:"text-tertiary",display:{ml:"none",dp:"block"},children:A}),H.jsx(W,{variant:"c-regular",color:"text-tertiary",display:{ml:"block",dp:"none"},children:A})]}),H.jsxs(q,{display:"flex",children:[!!u&&u>=w&&H.jsx(ut,{color:"icon-brand-medium",size:22}),H.jsxs(q,{children:[H.jsxs(W,{variant:"h4-semibold",color:"text-brand-medium",display:{ml:"none",dp:"block"},children:[w," PUSH"]}),H.jsxs(W,{variant:"h5-semibold",color:"text-brand-medium",display:{ml:"block",dp:"none"},children:[w," PUSH"]}),a&&H.jsx(nt,{isLoading:o,children:H.jsxs(W,{variant:"bes-semibold",color:"text-tertiary",children:["Balance:","",f==null?void 0:f.toLocaleString()]})})]})]})]}),f<w&&r&&H.jsx(ct,{mintPushToken:g,noOfPushTokensToCheck:50,mintingPush:l})]})})},lt=async w=>{const{noOfTokenToApprove:u,signer:e}=w;return(await new ge(Mt.pushToken,fe.pushToken,e).approve(Mt.epnscore,u)).wait()},Rt=()=>Qe({mutationKey:[de],mutationFn:lt});var gt={exports:{}};(function(w,u){(function(e){w.exports=e()})(function(){return function(){function e(A,f,p){function r(s,o){if(!f[s]){if(!A[s]){var t=typeof at=="function"&&at;if(!o&&t)return t(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var i=f[s]={exports:{}};A[s][0].call(i.exports,function(c){var g=A[s][1][c];return r(g||c)},i,i.exports,e,A,f,p)}return f[s].exports}for(var a=typeof at=="function"&&at,n=0;n<p.length;n++)r(p[n]);return r}return e}()({1:[function(e,A,f){var p=e("multimath"),r=e("./mm_unsharp_mask"),a=e("./mm_resize");function n(s){var o=s||[],t={js:o.indexOf("js")>=0,wasm:o.indexOf("wasm")>=0};p.call(this,t),this.features={js:t.js,wasm:t.wasm&&this.has_wasm()},this.use(r),this.use(a)}n.prototype=Object.create(p.prototype),n.prototype.constructor=n,n.prototype.resizeAndUnsharp=function(s,o){var t=this.resize(s,o);return s.unsharpAmount&&this.unsharp_mask(t,s.toWidth,s.toHeight,s.unsharpAmount,s.unsharpRadius,s.unsharpThreshold),t},A.exports=n},{"./mm_resize":4,"./mm_unsharp_mask":9,multimath:19}],2:[function(e,A,f){function p(t){return t<0?0:t>255?255:t}function r(t){return t>=0?t:0}function a(t,l,i,c,g,d){var m,Q,v,_,x,k,E,b,M,j,D,O=0,R=0;for(M=0;M<c;M++){for(x=0,j=0;j<g;j++){for(k=d[x++],E=d[x++],b=O+k*4|0,m=Q=v=_=0;E>0;E--)D=d[x++],_=_+D*t[b+3]|0,v=v+D*t[b+2]|0,Q=Q+D*t[b+1]|0,m=m+D*t[b]|0,b=b+4|0;l[R+3]=r(_>>7),l[R+2]=r(v>>7),l[R+1]=r(Q>>7),l[R]=r(m>>7),R=R+c*4|0}R=(M+1)*4|0,O=(M+1)*i*4|0}}function n(t,l,i,c,g,d){var m,Q,v,_,x,k,E,b,M,j,D,O=0,R=0;for(M=0;M<c;M++){for(x=0,j=0;j<g;j++){for(k=d[x++],E=d[x++],b=O+k*4|0,m=Q=v=_=0;E>0;E--)D=d[x++],_=_+D*t[b+3]|0,v=v+D*t[b+2]|0,Q=Q+D*t[b+1]|0,m=m+D*t[b]|0,b=b+4|0;m>>=7,Q>>=7,v>>=7,_>>=7,l[R+3]=p(_+8192>>14),l[R+2]=p(v+8192>>14),l[R+1]=p(Q+8192>>14),l[R]=p(m+8192>>14),R=R+c*4|0}R=(M+1)*4|0,O=(M+1)*i*4|0}}function s(t,l,i,c,g,d){var m,Q,v,_,x,k,E,b,M,j,D,O,R=0,T=0;for(j=0;j<c;j++){for(k=0,D=0;D<g;D++){for(E=d[k++],b=d[k++],M=R+E*4|0,m=Q=v=_=0;b>0;b--)O=d[k++],x=t[M+3],_=_+O*x|0,v=v+O*t[M+2]*x|0,Q=Q+O*t[M+1]*x|0,m=m+O*t[M]*x|0,M=M+4|0;v=v/255|0,Q=Q/255|0,m=m/255|0,l[T+3]=r(_>>7),l[T+2]=r(v>>7),l[T+1]=r(Q>>7),l[T]=r(m>>7),T=T+c*4|0}T=(j+1)*4|0,R=(j+1)*i*4|0}}function o(t,l,i,c,g,d){var m,Q,v,_,x,k,E,b,M,j,D,O=0,R=0;for(M=0;M<c;M++){for(x=0,j=0;j<g;j++){for(k=d[x++],E=d[x++],b=O+k*4|0,m=Q=v=_=0;E>0;E--)D=d[x++],_=_+D*t[b+3]|0,v=v+D*t[b+2]|0,Q=Q+D*t[b+1]|0,m=m+D*t[b]|0,b=b+4|0;m>>=7,Q>>=7,v>>=7,_>>=7,_=p(_+8192>>14),_>0&&(m=m*255/_|0,Q=Q*255/_|0,v=v*255/_|0),l[R+3]=_,l[R+2]=p(v+8192>>14),l[R+1]=p(Q+8192>>14),l[R]=p(m+8192>>14),R=R+c*4|0}R=(M+1)*4|0,O=(M+1)*i*4|0}}A.exports={convolveHor:a,convolveVert:n,convolveHorWithPre:s,convolveVertWithPre:o}},{}],3:[function(e,A,f){A.exports="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"},{}],4:[function(e,A,f){A.exports={name:"resize",fn:e("./resize"),wasm_fn:e("./resize_wasm"),wasm_src:e("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(e,A,f){var p=e("./resize_filter_gen"),r=e("./convolve"),a=r.convolveHor,n=r.convolveVert,s=r.convolveHorWithPre,o=r.convolveVertWithPre;function t(i,c,g){for(var d=3,m=c*g*4|0;d<m;){if(i[d]!==255)return!0;d=d+4|0}return!1}function l(i,c,g){for(var d=3,m=c*g*4|0;d<m;)i[d]=255,d=d+4|0}A.exports=function(i){var c=i.src,g=i.width,d=i.height,m=i.toWidth,Q=i.toHeight,v=i.scaleX||i.toWidth/i.width,_=i.scaleY||i.toHeight/i.height,x=i.offsetX||0,k=i.offsetY||0,E=i.dest||new Uint8Array(m*Q*4),b=typeof i.filter>"u"?"mks2013":i.filter,M=p(b,g,m,v,x),j=p(b,d,Q,_,k),D=new Uint16Array(m*d*4);return t(c,g,d)?(s(c,D,g,d,m,M),o(D,E,d,m,Q,j)):(a(c,D,g,d,m,M),n(D,E,d,m,Q,j),l(E,m,Q)),E}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(e,A,f){var p=e("./resize_filter_info"),r=14;function a(n){return Math.round(n*((1<<r)-1))}A.exports=function(n,s,o,t,l){var i=p.filter[n].fn,c=1/t,g=Math.min(1,t),d=p.filter[n].win/g,m,Q,v,_,x,k,E,b,M,j,D,O,R,T,G,h,B,I=Math.floor((d+1)*2),C=new Int16Array((I+2)*o),y=0,S=!C.subarray||!C.set;for(m=0;m<o;m++){for(Q=(m+.5)*c+l,v=Math.max(0,Math.floor(Q-d)),_=Math.min(s-1,Math.ceil(Q+d)),x=_-v+1,k=new Float32Array(x),E=new Int16Array(x),b=0,M=v,j=0;M<=_;M++,j++)D=i((M+.5-Q)*g),b+=D,k[j]=D;for(O=0,j=0;j<k.length;j++)R=k[j]/b,O+=R,E[j]=a(R);for(E[o>>1]+=a(1-O),T=0;T<E.length&&E[T]===0;)T++;if(T<E.length){for(G=E.length-1;G>0&&E[G]===0;)G--;if(h=v+T,B=G-T+1,C[y++]=h,C[y++]=B,!S)C.set(E.subarray(T,G+1),y),y+=B;else for(j=T;j<=G;j++)C[y++]=E[j]}else C[y++]=0,C[y++]=0}return C}},{"./resize_filter_info":7}],7:[function(e,A,f){var p={box:{win:.5,fn:function(r){return r<0&&(r=-r),r<.5?1:0}},hamming:{win:1,fn:function(r){if(r<0&&(r=-r),r>=1)return 0;if(r<11920929e-14)return 1;var a=r*Math.PI;return Math.sin(a)/a*(.54+.46*Math.cos(a/1))}},lanczos2:{win:2,fn:function(r){if(r<0&&(r=-r),r>=2)return 0;if(r<11920929e-14)return 1;var a=r*Math.PI;return Math.sin(a)/a*Math.sin(a/2)/(a/2)}},lanczos3:{win:3,fn:function(r){if(r<0&&(r=-r),r>=3)return 0;if(r<11920929e-14)return 1;var a=r*Math.PI;return Math.sin(a)/a*Math.sin(a/3)/(a/3)}},mks2013:{win:2.5,fn:function(r){return r<0&&(r=-r),r>=2.5?0:r>=1.5?-.125*(r-2.5)*(r-2.5):r>=.5?.25*(4*r*r-11*r+7):1.0625-1.75*r*r}}};A.exports={filter:p,f2q:{box:0,hamming:1,lanczos2:2,lanczos3:3},q2f:["box","hamming","lanczos2","lanczos3"]}},{}],8:[function(e,A,f){var p=e("./resize_filter_gen");function r(t,l,i){for(var c=3,g=l*i*4|0;c<g;){if(t[c]!==255)return!0;c=c+4|0}return!1}function a(t,l,i){for(var c=3,g=l*i*4|0;c<g;)t[c]=255,c=c+4|0}function n(t){return new Uint8Array(t.buffer,0,t.byteLength)}var s=!0;try{s=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1}catch{}function o(t,l,i){if(s){l.set(n(t),i);return}for(var c=i,g=0;g<t.length;g++){var d=t[g];l[c++]=d&255,l[c++]=d>>8&255}}A.exports=function(t){var l=t.src,i=t.width,c=t.height,g=t.toWidth,d=t.toHeight,m=t.scaleX||t.toWidth/t.width,Q=t.scaleY||t.toHeight/t.height,v=t.offsetX||0,_=t.offsetY||0,x=t.dest||new Uint8Array(g*d*4),k=typeof t.filter>"u"?"mks2013":t.filter,E=p(k,i,g,m,v),b=p(k,c,d,Q,_),M=0,j=Math.max(l.byteLength,x.byteLength),D=this.__align(M+j),O=c*g*4*2,R=this.__align(D+O),T=this.__align(R+E.byteLength),G=T+b.byteLength,h=this.__instance("resize",G),B=new Uint8Array(this.__memory.buffer),I=new Uint32Array(this.__memory.buffer),C=new Uint32Array(l.buffer);I.set(C),o(E,B,R),o(b,B,T);var y=h.exports.convolveHV||h.exports._convolveHV;r(l,i,c)?y(R,T,D,i,c,g,d,1):(y(R,T,D,i,c,g,d,0),a(x,g,d));var S=new Uint32Array(x.buffer);return S.set(new Uint32Array(this.__memory.buffer,0,d*g)),x}},{"./resize_filter_gen":6}],9:[function(e,A,f){A.exports={name:"unsharp_mask",fn:e("./unsharp_mask"),wasm_fn:e("./unsharp_mask_wasm"),wasm_src:e("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":10,"./unsharp_mask_wasm":11,"./unsharp_mask_wasm_base64":12}],10:[function(e,A,f){var p=e("glur/mono16");function r(a,n,s){for(var o=n*s,t=new Uint16Array(o),l,i,c,g,d=0;d<o;d++)l=a[4*d],i=a[4*d+1],c=a[4*d+2],g=l>=i&&l>=c?l:i>=c&&i>=l?i:c,t[d]=g<<8;return t}A.exports=function(a,n,s,o,t,l){var i,c,g,d,m;if(!(o===0||t<.5)){t>2&&(t=2);var Q=r(a,n,s),v=new Uint16Array(Q);p(v,n,s,t);for(var _=o/100*4096+.5|0,x=l<<8,k=n*s,E=0;E<k;E++)i=Q[E],d=i-v[E],Math.abs(d)>=x&&(c=i+(_*d+2048>>12),c=c>65280?65280:c,c=c<0?0:c,i=i!==0?i:1,g=(c<<12)/i|0,m=E*4,a[m]=a[m]*g+2048>>12,a[m+1]=a[m+1]*g+2048>>12,a[m+2]=a[m+2]*g+2048>>12)}}},{"glur/mono16":18}],11:[function(e,A,f){A.exports=function(p,r,a,n,s,o){if(!(n===0||s<.5)){s>2&&(s=2);var t=r*a,l=t*4,i=t*2,c=t*2,g=Math.max(r,a)*4,d=8*4,m=0,Q=l,v=Q+i,_=v+c,x=_+c,k=x+g,E=this.__instance("unsharp_mask",l+i+c*2+g+d,{exp:Math.exp}),b=new Uint32Array(p.buffer),M=new Uint32Array(this.__memory.buffer);M.set(b);var j=E.exports.hsv_v16||E.exports._hsv_v16;j(m,Q,r,a),j=E.exports.blurMono16||E.exports._blurMono16,j(Q,v,_,x,k,r,a,s),j=E.exports.unsharp||E.exports._unsharp,j(m,m,Q,v,r,a,n,o),b.set(new Uint32Array(this.__memory.buffer,0,t))}}},{}],12:[function(e,A,f){A.exports="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"},{}],13:[function(e,A,f){var p=100;function r(a,n){this.create=a,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=n||2e3}r.prototype.acquire=function(){var a=this,n;return this.available.length!==0?n=this.available.pop():(n=this.create(),n.id=this.lastId++,n.release=function(){return a.release(n)}),this.acquired[n.id]=n,n},r.prototype.release=function(a){var n=this;delete this.acquired[a.id],a.lastUsed=Date.now(),this.available.push(a),this.timeoutId===0&&(this.timeoutId=setTimeout(function(){return n.gc()},p))},r.prototype.gc=function(){var a=this,n=Date.now();this.available=this.available.filter(function(s){return n-s.lastUsed>a.idle?(s.destroy(),!1):!0}),this.available.length!==0?this.timeoutId=setTimeout(function(){return a.gc()},p):this.timeoutId=0},A.exports=r},{}],14:[function(e,A,f){var p=2;A.exports=function(r,a,n,s,o,t){var l=n/r,i=s/a,c=(2*t+p+1)/o;if(c>.5)return[[n,s]];var g=Math.ceil(Math.log(Math.min(l,i))/Math.log(c));if(g<=1)return[[n,s]];for(var d=[],m=0;m<g;m++){var Q=Math.round(Math.pow(Math.pow(r,g-m-1)*Math.pow(n,m+1),1/g)),v=Math.round(Math.pow(Math.pow(a,g-m-1)*Math.pow(s,m+1),1/g));d.push([Q,v])}return d}},{}],15:[function(e,A,f){var p=1e-5;function r(n){var s=Math.round(n);return Math.abs(n-s)<p?s:Math.floor(n)}function a(n){var s=Math.round(n);return Math.abs(n-s)<p?s:Math.ceil(n)}A.exports=function(n){var s=n.toWidth/n.width,o=n.toHeight/n.height,t=r(n.srcTileSize*s)-2*n.destTileBorder,l=r(n.srcTileSize*o)-2*n.destTileBorder;if(t<1||l<1)throw new Error("Internal error in pica: target tile width/height is too small.");var i,c,g,d,m,Q,v=[],_;for(d=0;d<n.toHeight;d+=l)for(g=0;g<n.toWidth;g+=t)i=g-n.destTileBorder,i<0&&(i=0),m=g+t+n.destTileBorder-i,i+m>=n.toWidth&&(m=n.toWidth-i),c=d-n.destTileBorder,c<0&&(c=0),Q=d+l+n.destTileBorder-c,c+Q>=n.toHeight&&(Q=n.toHeight-c),_={toX:i,toY:c,toWidth:m,toHeight:Q,toInnerX:g,toInnerY:d,toInnerWidth:t,toInnerHeight:l,offsetX:i/s-r(i/s),offsetY:c/o-r(c/o),scaleX:s,scaleY:o,x:r(i/s),y:r(c/o),width:a(m/s),height:a(Q/o)},v.push(_);return v}},{}],16:[function(e,A,f){function p(r){return Object.prototype.toString.call(r)}A.exports.isCanvas=function(r){var a=p(r);return a==="[object HTMLCanvasElement]"||a==="[object OffscreenCanvas]"||a==="[object Canvas]"},A.exports.isImage=function(r){return p(r)==="[object HTMLImageElement]"},A.exports.isImageBitmap=function(r){return p(r)==="[object ImageBitmap]"},A.exports.limiter=function(r){var a=0,n=[];function s(){a<r&&n.length&&(a++,n.shift()())}return function(o){return new Promise(function(t,l){n.push(function(){o().then(function(i){t(i),a--,s()},function(i){l(i),a--,s()})}),s()})}},A.exports.cib_quality_name=function(r){switch(r){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},A.exports.cib_support=function(r){return Promise.resolve().then(function(){if(typeof createImageBitmap>"u")return!1;var a=r(100,100);return createImageBitmap(a,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then(function(n){var s=n.width===10;return n.close(),a=null,s})}).catch(function(){return!1})},A.exports.worker_offscreen_canvas_support=function(){return new Promise(function(r,a){if(typeof OffscreenCanvas>"u"){r(!1);return}function n(t){if(typeof createImageBitmap>"u"){t.postMessage(!1);return}Promise.resolve().then(function(){var l=new OffscreenCanvas(10,10),i=l.getContext("2d");return i.rect(0,0,1,1),createImageBitmap(l,0,0,1,1)}).then(function(){return t.postMessage(!0)},function(){return t.postMessage(!1)})}var s=btoa("(".concat(n.toString(),")(self);")),o=new Worker("data:text/javascript;base64,".concat(s));o.onmessage=function(t){return r(t.data)},o.onerror=a}).then(function(r){return r},function(){return!1})},A.exports.can_use_canvas=function(r){var a=!1;try{var n=r(2,1),s=n.getContext("2d"),o=s.createImageData(2,1);o.data[0]=12,o.data[1]=23,o.data[2]=34,o.data[3]=255,o.data[4]=45,o.data[5]=56,o.data[6]=67,o.data[7]=255,s.putImageData(o,0,0),o=null,o=s.getImageData(0,0,2,1),o.data[0]===12&&o.data[1]===23&&o.data[2]===34&&o.data[3]===255&&o.data[4]===45&&o.data[5]===56&&o.data[6]===67&&o.data[7]===255&&(a=!0)}catch{}return a},A.exports.cib_can_use_region=function(){return new Promise(function(r){if(typeof Image>"u"||typeof createImageBitmap>"u"){r(!1);return}var a=new Image;a.src="data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z",a.onload=function(){createImageBitmap(a,0,0,a.width,a.height).then(function(n){n.width===a.width&&n.height===a.height?r(!0):r(!1)},function(){return r(!1)})},a.onerror=function(){return r(!1)}})}},{}],17:[function(e,A,f){A.exports=function(){var p=e("./mathlib"),r;onmessage=function(a){var n=a.data.opts;if(!n.src&&n.srcBitmap){var s=new OffscreenCanvas(n.width,n.height),o=s.getContext("2d");o.drawImage(n.srcBitmap,0,0),n.src=o.getImageData(0,0,n.width,n.height).data,s.width=s.height=0,s=null,n.srcBitmap.close(),n.srcBitmap=null}r||(r=new p(a.data.features));var t=r.resizeAndUnsharp(n);postMessage({data:t},[t.buffer])}}},{"./mathlib":1}],18:[function(e,A,f){var p,r,a,n,s,o,t,l;function i(d){d<.5&&(d=.5);var m=Math.exp(.726*.726)/d,Q=Math.exp(-m),v=Math.exp(-2*m),_=(1-Q)*(1-Q)/(1+2*m*Q-v);return p=_,r=_*(m-1)*Q,a=_*(m+1)*Q,n=-_*v,s=2*Q,o=-v,t=(p+r)/(1-s-o),l=(a+n)/(1-s-o),new Float32Array([p,r,a,n,s,o,t,l])}function c(d,m,Q,v,_,x){var k,E,b,M,j,D,O,R,T,G,h,B,I,C;for(T=0;T<x;T++){for(D=T*_,O=T,R=0,k=d[D],j=k*v[6],M=j,h=v[0],B=v[1],I=v[4],C=v[5],G=0;G<_;G++)E=d[D],b=E*h+k*B+M*I+j*C,j=M,M=b,k=E,Q[R]=M,R++,D++;for(D--,R--,O+=x*(_-1),k=d[D],j=k*v[7],M=j,E=k,h=v[2],B=v[3],G=_-1;G>=0;G--)b=E*h+k*B+M*I+j*C,j=M,M=b,k=E,E=d[D],m[O]=Q[R]+M,D--,R--,O-=x}}function g(d,m,Q,v){if(v){var _=new Uint16Array(d.length),x=new Float32Array(Math.max(m,Q)),k=i(v);c(d,_,x,k,m,Q),c(_,d,x,k,Q,m)}}A.exports=g},{}],19:[function(e,A,f){var p=e("object-assign"),r=e("./lib/base64decode"),a=e("./lib/wa_detect"),n={js:!0,wasm:!0};function s(o){if(!(this instanceof s))return new s(o);var t=p({},n,o||{});if(this.options=t,this.__cache={},this.__init_promise=null,this.__modules=t.modules||{},this.__memory=null,this.__wasm={},this.__isLE=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1,!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}s.prototype.has_wasm=a,s.prototype.use=function(o){return this.__modules[o.name]=o,this.options.wasm&&this.has_wasm()&&o.wasm_fn?this[o.name]=o.wasm_fn:this[o.name]=o.fn,this},s.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(new Error(`mathlib: only "wasm" was enabled, but it's not supported`));var o=this;return this.__init_promise=Promise.all(Object.keys(o.__modules).map(function(t){var l=o.__modules[t];return!o.options.wasm||!o.has_wasm()||!l.wasm_fn||o.__wasm[t]?null:WebAssembly.compile(o.__base64decode(l.wasm_src)).then(function(i){o.__wasm[t]=i})})).then(function(){return o}),this.__init_promise},s.prototype.__base64decode=r,s.prototype.__reallocate=function(o){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(o/(64*1024))}),this.__memory;var t=this.__memory.buffer.byteLength;return t<o&&this.__memory.grow(Math.ceil((o-t)/(64*1024))),this.__memory},s.prototype.__instance=function(o,t,l){if(t&&this.__reallocate(t),!this.__wasm[o]){var i=this.__modules[o];this.__wasm[o]=new WebAssembly.Module(this.__base64decode(i.wasm_src))}if(!this.__cache[o]){var c={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[o]=new WebAssembly.Instance(this.__wasm[o],{env:p(c,l||{})})}return this.__cache[o]},s.prototype.__align=function(o,t){t=t||8;var l=o%t;return o+(l?t-l:0)},A.exports=s},{"./lib/base64decode":20,"./lib/wa_detect":21,"object-assign":22}],20:[function(e,A,f){var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";A.exports=function(r){for(var a=r.replace(/[\r\n=]/g,""),n=a.length,s=new Uint8Array(n*3>>2),o=0,t=0,l=0;l<n;l++)l%4===0&&l&&(s[t++]=o>>16&255,s[t++]=o>>8&255,s[t++]=o&255),o=o<<6|p.indexOf(a.charAt(l));var i=n%4*6;return i===0?(s[t++]=o>>16&255,s[t++]=o>>8&255,s[t++]=o&255):i===18?(s[t++]=o>>10&255,s[t++]=o>>2&255):i===12&&(s[t++]=o>>4&255),s}},{}],21:[function(e,A,f){var p;A.exports=function(){if(typeof p<"u"||(p=!1,typeof WebAssembly>"u"))return p;try{var r=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),a=new WebAssembly.Module(r),n=new WebAssembly.Instance(a,{});return n.exports.test(4)!==0&&(p=!0),p}catch{}return p}},{}],22:[function(e,A,f){var p=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function n(o){if(o==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(o)}function s(){try{if(!Object.assign)return!1;var o=new String("abc");if(o[5]="de",Object.getOwnPropertyNames(o)[0]==="5")return!1;for(var t={},l=0;l<10;l++)t["_"+String.fromCharCode(l)]=l;var i=Object.getOwnPropertyNames(t).map(function(g){return t[g]});if(i.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(g){c[g]=g}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}A.exports=s()?Object.assign:function(o,t){for(var l,i=n(o),c,g=1;g<arguments.length;g++){l=Object(arguments[g]);for(var d in l)r.call(l,d)&&(i[d]=l[d]);if(p){c=p(l);for(var m=0;m<c.length;m++)a.call(l,c[m])&&(i[c[m]]=l[c[m]])}}return i}},{}],23:[function(e,A,f){var p=arguments[3],r=arguments[4],a=arguments[5],n=JSON.stringify;A.exports=function(s,o){for(var t,l=Object.keys(a),i=0,c=l.length;i<c;i++){var g=l[i],d=a[g].exports;if(d===s||d&&d.default===s){t=g;break}}if(!t){t=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var m={},i=0,c=l.length;i<c;i++){var g=l[i];m[g]=g}r[t]=["function(require,module,exports){"+s+"(self); }",m]}var Q=Math.floor(Math.pow(16,8)*Math.random()).toString(16),v={};v[t]=t,r[Q]=["function(require,module,exports){var f = require("+n(t)+");(f.default ? f.default : f)(self);}",v];var _={};x(Q);function x(D){_[D]=!0;for(var O in r[D][1]){var R=r[D][1][O];_[R]||x(R)}}var k="("+p+")({"+Object.keys(_).map(function(D){return n(D)+":["+r[D][0]+","+n(r[D][1])+"]"}).join(",")+"},{},["+n(Q)+"])",E=window.URL||window.webkitURL||window.mozURL||window.msURL,b=new Blob([k],{type:"text/javascript"});if(o&&o.bare)return b;var M=E.createObjectURL(b),j=new Worker(M);return j.objectURL=M,j}},{}],"/index.js":[function(e,A,f){function p(h,B){return o(h)||s(h,B)||a(h,B)||r()}function r(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a(h,B){if(h){if(typeof h=="string")return n(h,B);var I=Object.prototype.toString.call(h).slice(8,-1);if(I==="Object"&&h.constructor&&(I=h.constructor.name),I==="Map"||I==="Set")return Array.from(h);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return n(h,B)}}function n(h,B){(B==null||B>h.length)&&(B=h.length);for(var I=0,C=new Array(B);I<B;I++)C[I]=h[I];return C}function s(h,B){var I=h==null?null:typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(I!=null){var C=[],y=!0,S=!1,U,P;try{for(I=I.call(h);!(y=(U=I.next()).done)&&(C.push(U.value),!(B&&C.length===B));y=!0);}catch(L){S=!0,P=L}finally{try{!y&&I.return!=null&&I.return()}finally{if(S)throw P}}return C}}function o(h){if(Array.isArray(h))return h}var t=e("object-assign"),l=e("webworkify"),i=e("./lib/mathlib"),c=e("./lib/pool"),g=e("./lib/utils"),d=e("./lib/worker"),m=e("./lib/stepper"),Q=e("./lib/tiler"),v=e("./lib/mm_resize/resize_filter_info"),_={},x=!1;try{typeof navigator<"u"&&navigator.userAgent&&(x=navigator.userAgent.indexOf("Safari")>=0)}catch{}var k=1;typeof navigator<"u"&&(k=Math.min(navigator.hardwareConcurrency||1,4));var E={tile:1024,concurrency:k,features:["js","wasm","ww"],idle:2e3,createCanvas:function(h,B){var I=document.createElement("canvas");return I.width=h,I.height=B,I}},b={filter:"mks2013",unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},M=!1,j=!1,D=!1,O=!1,R=!1;function T(){return{value:l(d),destroy:function(){if(this.value.terminate(),typeof window<"u"){var h=window.URL||window.webkitURL||window.mozURL||window.msURL;h&&h.revokeObjectURL&&this.value.objectURL&&h.revokeObjectURL(this.value.objectURL)}}}}function G(h){if(!(this instanceof G))return new G(h);this.options=t({},E,h||{});var B="lk_".concat(this.options.concurrency);this.__limit=_[B]||g.limiter(this.options.concurrency),_[B]||(_[B]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}G.prototype.init=function(){var h=this;if(this.__initPromise)return this.__initPromise;if(typeof ImageData<"u"&&typeof Uint8ClampedArray<"u")try{new ImageData(new Uint8ClampedArray(400),10,10),M=!0}catch{}typeof ImageBitmap<"u"&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?j=!0:this.debug("ImageBitmap does not support .close(), disabled"));var B=this.options.features.slice();if(B.indexOf("all")>=0&&(B=["cib","wasm","js","ww"]),this.__requested_features=B,this.__mathlib=new i(B),B.indexOf("ww")>=0&&typeof window<"u"&&"Worker"in window)try{var I=e("webworkify")(function(){});I.terminate(),this.features.ww=!0;var C="wp_".concat(JSON.stringify(this.options));_[C]?this.__workersPool=_[C]:(this.__workersPool=new c(T,this.options.idle),_[C]=this.__workersPool)}catch{}var y=this.__mathlib.init().then(function(L){t(h.features,L.features)}),S;j?S=g.cib_support(this.options.createCanvas).then(function(L){if(h.features.cib&&B.indexOf("cib")<0){h.debug("createImageBitmap() resize supported, but disabled by config");return}B.indexOf("cib")>=0&&(h.features.cib=L)}):S=Promise.resolve(!1),D=g.can_use_canvas(this.options.createCanvas);var U;j&&M&&B.indexOf("ww")!==-1?U=g.worker_offscreen_canvas_support():U=Promise.resolve(!1),U=U.then(function(L){O=L});var P=g.cib_can_use_region().then(function(L){R=L});return this.__initPromise=Promise.all([y,S,U,P]).then(function(){return h}),this.__initPromise},G.prototype.__invokeResize=function(h,B){var I=this;return B.__mathCache=B.__mathCache||{},Promise.resolve().then(function(){return I.features.ww?new Promise(function(C,y){var S=I.__workersPool.acquire();B.cancelToken&&B.cancelToken.catch(function(P){return y(P)}),S.value.onmessage=function(P){S.release(),P.data.err?y(P.data.err):C(P.data)};var U=[];h.src&&U.push(h.src.buffer),h.srcBitmap&&U.push(h.srcBitmap),S.value.postMessage({opts:h,features:I.__requested_features,preload:{wasm_nodule:I.__mathlib.__}},U)}):{data:I.__mathlib.resizeAndUnsharp(h,B.__mathCache)}})},G.prototype.__extractTileData=function(h,B,I,C,y){if(this.features.ww&&O&&(g.isCanvas(B)||R))return this.debug("Create tile for OffscreenCanvas"),createImageBitmap(C.srcImageBitmap||B,h.x,h.y,h.width,h.height).then(function(P){return y.srcBitmap=P,y});if(g.isCanvas(B))return C.srcCtx||(C.srcCtx=B.getContext("2d")),this.debug("Get tile pixel data"),y.src=C.srcCtx.getImageData(h.x,h.y,h.width,h.height).data,y;this.debug("Draw tile imageBitmap/image to temporary canvas");var S=this.options.createCanvas(h.width,h.height),U=S.getContext("2d");return U.globalCompositeOperation="copy",U.drawImage(C.srcImageBitmap||B,h.x,h.y,h.width,h.height,0,0,h.width,h.height),this.debug("Get tile pixel data"),y.src=U.getImageData(0,0,h.width,h.height).data,S.width=S.height=0,y},G.prototype.__landTileData=function(h,B,I){var C;if(this.debug("Convert raw rgba tile result to ImageData"),B.bitmap)return I.toCtx.drawImage(B.bitmap,h.toX,h.toY),null;if(M)C=new ImageData(new Uint8ClampedArray(B.data),h.toWidth,h.toHeight);else if(C=I.toCtx.createImageData(h.toWidth,h.toHeight),C.data.set)C.data.set(B.data);else for(var y=C.data.length-1;y>=0;y--)C.data[y]=B.data[y];return this.debug("Draw tile"),x?I.toCtx.putImageData(C,h.toX,h.toY,h.toInnerX-h.toX,h.toInnerY-h.toY,h.toInnerWidth+1e-5,h.toInnerHeight+1e-5):I.toCtx.putImageData(C,h.toX,h.toY,h.toInnerX-h.toX,h.toInnerY-h.toY,h.toInnerWidth,h.toInnerHeight),null},G.prototype.__tileAndResize=function(h,B,I){var C=this,y={srcCtx:null,srcImageBitmap:null,isImageBitmapReused:!1,toCtx:null},S=function(U){return C.__limit(function(){if(I.canceled)return I.cancelToken;var P={width:U.width,height:U.height,toWidth:U.toWidth,toHeight:U.toHeight,scaleX:U.scaleX,scaleY:U.scaleY,offsetX:U.offsetX,offsetY:U.offsetY,filter:I.filter,unsharpAmount:I.unsharpAmount,unsharpRadius:I.unsharpRadius,unsharpThreshold:I.unsharpThreshold};return C.debug("Invoke resize math"),Promise.resolve(P).then(function(L){return C.__extractTileData(U,h,I,y,L)}).then(function(L){return C.debug("Invoke resize math"),C.__invokeResize(L,I)}).then(function(L){return I.canceled?I.cancelToken:(y.srcImageData=null,C.__landTileData(U,L,y))})})};return Promise.resolve().then(function(){if(y.toCtx=B.getContext("2d"),g.isCanvas(h))return null;if(g.isImageBitmap(h))return y.srcImageBitmap=h,y.isImageBitmapReused=!0,null;if(g.isImage(h))return j?(C.debug("Decode image via createImageBitmap"),createImageBitmap(h).then(function(U){y.srcImageBitmap=U}).catch(function(U){return null})):null;throw new Error('Pica: ".from" should be Image, Canvas or ImageBitmap')}).then(function(){if(I.canceled)return I.cancelToken;C.debug("Calculate tiles");var U=Q({width:I.width,height:I.height,srcTileSize:C.options.tile,toWidth:I.toWidth,toHeight:I.toHeight,destTileBorder:I.__destTileBorder}),P=U.map(function(F){return S(F)});function L(F){F.srcImageBitmap&&(F.isImageBitmapReused||F.srcImageBitmap.close(),F.srcImageBitmap=null)}return C.debug("Process tiles"),Promise.all(P).then(function(){return C.debug("Finished!"),L(y),B},function(F){throw L(y),F})})},G.prototype.__processStages=function(h,B,I,C){var y=this;if(C.canceled)return C.cancelToken;var S=h.shift(),U=p(S,2),P=U[0],L=U[1],F=h.length===0,J;F||v.q2f.indexOf(C.filter)<0?J=C.filter:C.filter==="box"?J="box":J="hamming",C=t({},C,{toWidth:P,toHeight:L,filter:J});var Y;return F||(Y=this.options.createCanvas(P,L)),this.__tileAndResize(B,F?I:Y,C).then(function(){return F?I:(C.width=P,C.height=L,y.__processStages(h,Y,I,C))}).then(function(it){return Y&&(Y.width=Y.height=0),it})},G.prototype.__resizeViaCreateImageBitmap=function(h,B,I){var C=this,y=B.getContext("2d");return this.debug("Resize via createImageBitmap()"),createImageBitmap(h,{resizeWidth:I.toWidth,resizeHeight:I.toHeight,resizeQuality:g.cib_quality_name(v.f2q[I.filter])}).then(function(S){if(I.canceled)return I.cancelToken;if(!I.unsharpAmount)return y.drawImage(S,0,0),S.close(),y=null,C.debug("Finished!"),B;C.debug("Unsharp result");var U=C.options.createCanvas(I.toWidth,I.toHeight),P=U.getContext("2d");P.drawImage(S,0,0),S.close();var L=P.getImageData(0,0,I.toWidth,I.toHeight);return C.__mathlib.unsharp_mask(L.data,I.toWidth,I.toHeight,I.unsharpAmount,I.unsharpRadius,I.unsharpThreshold),y.putImageData(L,0,0),U.width=U.height=0,L=P=U=y=null,C.debug("Finished!"),B})},G.prototype.resize=function(h,B,I){var C=this;this.debug("Start resize...");var y=t({},b);if(isNaN(I)?I&&(y=t(y,I)):y=t(y,{quality:I}),y.toWidth=B.width,y.toHeight=B.height,y.width=h.naturalWidth||h.width,y.height=h.naturalHeight||h.height,Object.prototype.hasOwnProperty.call(y,"quality")){if(y.quality<0||y.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(y.quality));y.filter=v.q2f[y.quality]}if(B.width===0||B.height===0)return Promise.reject(new Error("Invalid output size: ".concat(B.width,"x").concat(B.height)));y.unsharpRadius>2&&(y.unsharpRadius=2),y.canceled=!1,y.cancelToken&&(y.cancelToken=y.cancelToken.then(function(U){throw y.canceled=!0,U},function(U){throw y.canceled=!0,U}));var S=3;return y.__destTileBorder=Math.ceil(Math.max(S,2.5*y.unsharpRadius|0)),this.init().then(function(){if(y.canceled)return y.cancelToken;if(C.features.cib){if(v.q2f.indexOf(y.filter)>=0)return C.__resizeViaCreateImageBitmap(h,B,y);C.debug("cib is enabled, but not supports provided filter, fallback to manual math")}if(!D){var U=new Error("Pica: cannot use getImageData on canvas, make sure fingerprinting protection isn't enabled");throw U.code="ERR_GET_IMAGE_DATA",U}var P=m(y.width,y.height,y.toWidth,y.toHeight,C.options.tile,y.__destTileBorder);return C.__processStages(P,h,B,y)})},G.prototype.resizeBuffer=function(h){var B=this,I=t({},b,h);if(Object.prototype.hasOwnProperty.call(I,"quality")){if(I.quality<0||I.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(I.quality));I.filter=v.q2f[I.quality]}return this.init().then(function(){return B.__mathlib.resizeAndUnsharp(I)})},G.prototype.toBlob=function(h,B,I){return B=B||"image/png",new Promise(function(C){if(h.toBlob){h.toBlob(function(L){return C(L)},B,I);return}if(h.convertToBlob){C(h.convertToBlob({type:B,quality:I}));return}for(var y=atob(h.toDataURL(B,I).split(",")[1]),S=y.length,U=new Uint8Array(S),P=0;P<S;P++)U[P]=y.charCodeAt(P);C(new Blob([U],{type:B}))})},G.prototype.debug=function(){},A.exports=G},{"./lib/mathlib":1,"./lib/mm_resize/resize_filter_info":7,"./lib/pool":13,"./lib/stepper":14,"./lib/tiler":15,"./lib/utils":16,"./lib/worker":17,"object-assign":22,webworkify:23}]},{},[])("/index.js")})})(gt);var Ht=gt.exports;const Ot=me(Ht);function ft(w,u){var e=Object.keys(w);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(w);u&&(A=A.filter(function(f){return Object.getOwnPropertyDescriptor(w,f).enumerable})),e.push.apply(e,A)}return e}function tt(w){for(var u=1;u<arguments.length;u++){var e=arguments[u]!=null?arguments[u]:{};u%2?ft(Object(e),!0).forEach(function(A){Pt(w,A,e[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(e)):ft(Object(e)).forEach(function(A){Object.defineProperty(w,A,Object.getOwnPropertyDescriptor(e,A))})}return w}function Gt(w,u){if(!(w instanceof u))throw new TypeError("Cannot call a class as a function")}function dt(w,u){for(var e=0;e<u.length;e++){var A=u[e];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(w,mt(A.key),A)}}function St(w,u,e){return u&&dt(w.prototype,u),e&&dt(w,e),Object.defineProperty(w,"prototype",{writable:!1}),w}function Pt(w,u,e){return u=mt(u),u in w?Object.defineProperty(w,u,{value:e,enumerable:!0,configurable:!0,writable:!0}):w[u]=e,w}function et(){return et=Object.assign?Object.assign.bind():function(w){for(var u=1;u<arguments.length;u++){var e=arguments[u];for(var A in e)Object.prototype.hasOwnProperty.call(e,A)&&(w[A]=e[A])}return w},et.apply(this,arguments)}function Tt(w,u){if(typeof w!="object"||w===null)return w;var e=w[Symbol.toPrimitive];if(e!==void 0){var A=e.call(w,u||"default");if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(w)}function mt(w){var u=Tt(w,"string");return typeof u=="symbol"?u:String(u)}var pt={exports:{}};(function(w){typeof window>"u"||function(u){var e=u.HTMLCanvasElement&&u.HTMLCanvasElement.prototype,A=u.Blob&&function(){try{return!!new Blob}catch{return!1}}(),f=A&&u.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),p=u.BlobBuilder||u.WebKitBlobBuilder||u.MozBlobBuilder||u.MSBlobBuilder,r=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,a=(A||p)&&u.atob&&u.ArrayBuffer&&u.Uint8Array&&function(n){var s,o,t,l,i,c,g,d,m;if(s=n.match(r),!s)throw new Error("invalid data URI");for(o=s[2]?s[1]:"text/plain"+(s[3]||";charset=US-ASCII"),t=!!s[4],l=n.slice(s[0].length),t?i=atob(l):i=decodeURIComponent(l),c=new ArrayBuffer(i.length),g=new Uint8Array(c),d=0;d<i.length;d+=1)g[d]=i.charCodeAt(d);return A?new Blob([f?g:c],{type:o}):(m=new p,m.append(c),m.getBlob(o))};u.HTMLCanvasElement&&!e.toBlob&&(e.mozGetAsFile?e.toBlob=function(n,s,o){var t=this;setTimeout(function(){o&&e.toDataURL&&a?n(a(t.toDataURL(s,o))):n(t.mozGetAsFile("blob",s))})}:e.toDataURL&&a&&(e.msToBlob?e.toBlob=function(n,s,o){var t=this;setTimeout(function(){(s&&s!=="image/png"||o)&&e.toDataURL&&a?n(a(t.toDataURL(s,o))):n(t.msToBlob(s))})}:e.toBlob=function(n,s,o){var t=this;setTimeout(function(){n(a(t.toDataURL(s,o)))})})),w.exports?w.exports=a:u.dataURLtoBlob=a}(window)})(pt);var It=pt.exports,Lt=function(w){return typeof Blob>"u"?!1:w instanceof Blob||Object.prototype.toString.call(w)==="[object Blob]"},wt={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},Ft=typeof window<"u"&&typeof window.document<"u",N=Ft?window:{},rt=function(w){return w>0&&w<1/0},Wt=Array.prototype.slice;function ot(w){return Array.from?Array.from(w):Wt.call(w)}var qt=/^image\/.+$/;function At(w){return qt.test(w)}function zt(w){var u=At(w)?w.substr(6):"";return u==="jpeg"&&(u="jpg"),".".concat(u)}var bt=String.fromCharCode;function Yt(w,u,e){var A="",f;for(e+=u,f=u;f<e;f+=1)A+=bt(w.getUint8(f));return A}var Nt=N.btoa;function Bt(w,u){for(var e=[],A=8192,f=new Uint8Array(w);f.length>0;)e.push(bt.apply(null,ot(f.subarray(0,A)))),f=f.subarray(A);return"data:".concat(u,";base64,").concat(Nt(e.join("")))}function Jt(w){var u=new DataView(w),e;try{var A,f,p;if(u.getUint8(0)===255&&u.getUint8(1)===216)for(var r=u.byteLength,a=2;a+1<r;){if(u.getUint8(a)===255&&u.getUint8(a+1)===225){f=a;break}a+=1}if(f){var n=f+4,s=f+10;if(Yt(u,n,4)==="Exif"){var o=u.getUint16(s);if(A=o===18761,(A||o===19789)&&u.getUint16(s+2,A)===42){var t=u.getUint32(s+4,A);t>=8&&(p=s+t)}}}if(p){var l=u.getUint16(p,A),i,c;for(c=0;c<l;c+=1)if(i=p+c*12+2,u.getUint16(i,A)===274){i+=8,e=u.getUint16(i,A),u.setUint16(i,1,A);break}}}catch{e=1}return e}function Xt(w){var u=0,e=1,A=1;switch(w){case 2:e=-1;break;case 3:u=-180;break;case 4:A=-1;break;case 5:u=90,A=-1;break;case 6:u=90;break;case 7:u=90,e=-1;break;case 8:u=-90;break}return{rotate:u,scaleX:e,scaleY:A}}var Zt=/\.\d*(?:0|9){12}\d*$/;function yt(w){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Zt.test(w)?Math.round(w*u)/u:w}function K(w){var u=w.aspectRatio,e=w.height,A=w.width,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",p=rt(A),r=rt(e);if(p&&r){var a=e*u;(f==="contain"||f==="none")&&a>A||f==="cover"&&a<A?e=A/u:A=e*u}else p?e=A/u:r&&(A=e*u);return{width:A,height:e}}function Kt(w){for(var u=ot(new Uint8Array(w)),e=u.length,A=[],f=0;f+3<e;){var p=u[f],r=u[f+1];if(p===255&&r===218)break;if(p===255&&r===216)f+=2;else{var a=u[f+2]*256+u[f+3],n=f+a+2,s=u.slice(f,n);A.push(s),f=n}}return A.reduce(function(o,t){return t[0]===255&&t[1]===225?o.concat(t):o},[])}function Vt(w,u){var e=ot(new Uint8Array(w));if(e[2]!==255||e[3]!==224)return w;var A=e[4]*256+e[5],f=[255,216].concat(u,e.slice(4+A));return new Uint8Array(f)}var $t=N.ArrayBuffer,st=N.FileReader,X=N.URL||N.webkitURL,te=/\.\w+$/,ee=N.Compressor,re=function(){function w(u,e){Gt(this,w),this.file=u,this.exif=[],this.image=new Image,this.options=tt(tt({},wt),e),this.aborted=!1,this.result=null,this.init()}return St(w,[{key:"init",value:function(){var u=this,e=this.file,A=this.options;if(!Lt(e)){this.fail(new Error("The first argument must be a File or Blob object."));return}var f=e.type;if(!At(f)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!X||!st){this.fail(new Error("The current browser does not support image compression."));return}$t||(A.checkOrientation=!1,A.retainExif=!1);var p=f==="image/jpeg",r=p&&A.checkOrientation,a=p&&A.retainExif;if(X&&!r&&!a)this.load({url:X.createObjectURL(e)});else{var n=new st;this.reader=n,n.onload=function(s){var o=s.target,t=o.result,l={},i=1;r&&(i=Jt(t),i>1&&et(l,Xt(i))),a&&(u.exif=Kt(t)),r||a?!X||i>1?l.url=Bt(t,f):l.url=X.createObjectURL(e):l.url=t,u.load(l)},n.onabort=function(){u.fail(new Error("Aborted to read the image with FileReader."))},n.onerror=function(){u.fail(new Error("Failed to read the image with FileReader."))},n.onloadend=function(){u.reader=null},r||a?n.readAsArrayBuffer(e):n.readAsDataURL(e)}}},{key:"load",value:function(u){var e=this,A=this.file,f=this.image;f.onload=function(){e.draw(tt(tt({},u),{},{naturalWidth:f.naturalWidth,naturalHeight:f.naturalHeight}))},f.onabort=function(){e.fail(new Error("Aborted to load the image."))},f.onerror=function(){e.fail(new Error("Failed to load the image."))},N.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(N.navigator.userAgent)&&(f.crossOrigin="anonymous"),f.alt=A.name,f.src=u.url}},{key:"draw",value:function(u){var e=this,A=u.naturalWidth,f=u.naturalHeight,p=u.rotate,r=p===void 0?0:p,a=u.scaleX,n=a===void 0?1:a,s=u.scaleY,o=s===void 0?1:s,t=this.file,l=this.image,i=this.options,c=document.createElement("canvas"),g=c.getContext("2d"),d=Math.abs(r)%180===90,m=(i.resize==="contain"||i.resize==="cover")&&rt(i.width)&&rt(i.height),Q=Math.max(i.maxWidth,0)||1/0,v=Math.max(i.maxHeight,0)||1/0,_=Math.max(i.minWidth,0)||0,x=Math.max(i.minHeight,0)||0,k=A/f,E=i.width,b=i.height;if(d){var M=[v,Q];Q=M[0],v=M[1];var j=[x,_];_=j[0],x=j[1];var D=[b,E];E=D[0],b=D[1]}m&&(k=E/b);var O=K({aspectRatio:k,width:Q,height:v},"contain");Q=O.width,v=O.height;var R=K({aspectRatio:k,width:_,height:x},"cover");if(_=R.width,x=R.height,m){var T=K({aspectRatio:k,width:E,height:b},i.resize);E=T.width,b=T.height}else{var G=K({aspectRatio:k,width:E,height:b}),h=G.width;E=h===void 0?A:h;var B=G.height;b=B===void 0?f:B}E=Math.floor(yt(Math.min(Math.max(E,_),Q))),b=Math.floor(yt(Math.min(Math.max(b,x),v)));var I=-E/2,C=-b/2,y=E,S=b,U=[];if(m){var P=0,L=0,F=A,J=f,Y=K({aspectRatio:k,width:A,height:f},{contain:"cover",cover:"contain"}[i.resize]);F=Y.width,J=Y.height,P=(A-F)/2,L=(f-J)/2,U.push(P,L,F,J)}if(U.push(I,C,y,S),d){var it=[b,E];E=it[0],b=it[1]}c.width=E,c.height=b,At(i.mimeType)||(i.mimeType=t.type);var Ct="transparent";t.size>i.convertSize&&i.convertTypes.indexOf(i.mimeType)>=0&&(i.mimeType="image/jpeg");var Qt=i.mimeType==="image/jpeg";if(Qt&&(Ct="#fff"),g.fillStyle=Ct,g.fillRect(0,0,E,b),i.beforeDraw&&i.beforeDraw.call(this,g,c),!this.aborted&&(g.save(),g.translate(E/2,b/2),g.rotate(r*Math.PI/180),g.scale(n,o),g.drawImage.apply(g,[l].concat(U)),g.restore(),i.drew&&i.drew.call(this,g,c),!this.aborted)){var vt=function(V){if(!e.aborted){var _t=function($){return e.done({naturalWidth:A,naturalHeight:f,result:$})};if(V&&Qt&&i.retainExif&&e.exif&&e.exif.length>0){var xt=function($){return _t(It(Bt(Vt($,e.exif),i.mimeType)))};if(V.arrayBuffer)V.arrayBuffer().then(xt).catch(function(){e.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var Z=new st;e.reader=Z,Z.onload=function($){var ne=$.target;xt(ne.result)},Z.onabort=function(){e.fail(new Error("Aborted to read the compressed image with FileReader."))},Z.onerror=function(){e.fail(new Error("Failed to read the compressed image with FileReader."))},Z.onloadend=function(){e.reader=null},Z.readAsArrayBuffer(V)}}else _t(V)}};c.toBlob?c.toBlob(vt,i.mimeType,i.quality):vt(It(c.toDataURL(i.mimeType,i.quality)))}}},{key:"done",value:function(u){var e=u.naturalWidth,A=u.naturalHeight,f=u.result,p=this.file,r=this.image,a=this.options;if(X&&r.src.indexOf("blob:")===0&&X.revokeObjectURL(r.src),f)if(a.strict&&!a.retainExif&&f.size>p.size&&a.mimeType===p.type&&!(a.width>e||a.height>A||a.minWidth>e||a.minHeight>A||a.maxWidth<e||a.maxHeight<A))f=p;else{var n=new Date;f.lastModified=n.getTime(),f.lastModifiedDate=n,f.name=p.name,f.name&&f.type!==p.type&&(f.name=f.name.replace(te,zt(f.type)))}else f=p;this.result=f,a.success&&a.success.call(this,f)}},{key:"fail",value:function(u){var e=this.options;if(e.error)e.error.call(this,u);else throw u}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=ee,w}},{key:"setDefaults",value:function(u){et(wt,u)}}]),w}();function ie(){return window.navigator.brave!=null?window.navigator.brave.isBrave.name=="isBrave":!1}let Et;Ut=z.forwardRef((w,u)=>{const{imageSrc:e,imageType:A,onImageCropped:f,width:p,height:r}=w,[a,n]=z.useState({x:0,y:0}),[s,o]=z.useState(1),[t,l]=z.useState(null);z.useState(null);const i=z.useCallback((x,k)=>{l(k)},[]);z.useImperativeHandle(u,()=>({async showCroppedImage(){try{if(e){const x=await Q(e,t),k=await d(x),E=ie()?await g(x):await c(k),b=await d(E);f(b)}else return"Nothing"}catch(x){console.error(x)}}}));async function c(x){const k=Ot();let E=await v(x);const b=document.createElement("canvas");return b.height=128,b.width=128,new Promise(M=>{M(k.resize(E,b,{unsharpAmount:100,unsharpRadius:.7,unsharpThreshold:2}).then(j=>k.toBlob(j,A,1)))})}async function g(x){return new Promise((k,E)=>{new re(x,{quality:1,strict:!0,maxWidth:128,maxHeight:128,checkOrientation:!1,success:k,error:E})})}const d=async x=>await m(x),m=x=>new Promise((k,E)=>{const b=new FileReader;b.readAsDataURL(x),b.onload=()=>k(b.result),b.onerror=M=>E(M)});async function Q(x,k){const E=await v(x),b=document.createElement("canvas");b.width=k.width,b.height=k.height;const M=b.getContext("2d"),j="none.jpg";return M.drawImage(E,k.x,k.y,k.width,k.height,0,0,k.width,k.height),new Promise((D,O)=>{b.toBlob(R=>{D(new File([R],j,{type:A,lastModified:Date.now()}))},A,1)})}const v=x=>new Promise((k,E)=>{const b=new Image;b.addEventListener("load",()=>k(b)),b.addEventListener("error",M=>E(M)),b.setAttribute("crossOrigin","anonymous"),b.src=x}),_=x=>{o(x)};return H.jsx(z.Fragment,{children:H.jsx(Et,{children:H.jsx(pe,{image:e,crop:a,zoom:s,aspect:1,onCropChange:n,onCropComplete:i,onZoomChange:_,style:{containerStyle:{width:p||"250px",height:r||"250px",position:"relative",borderRadius:"20px"}}})})})}),Et=Ie.div`
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  `,jt=({title:w})=>{const u=async()=>{await Ee()};return H.jsxs(q,{display:"flex",flexDirection:"row",justifyContent:"center",gap:"spacing-xxxs",children:[H.jsx(W,{variant:"bes-semibold",color:"text-tertiary",children:w}),H.jsx(W,{css:we`
          cursor: pointer;
        `,variant:"bes-semibold",color:"text-brand-medium",onClick:u,children:"Import Token"})]})}});export{jt as I,Dt as S,ut as T,_e as __tla,Ut as a,Rt as u};

var ut=d=>{throw TypeError(d)};var G=(d,b,R)=>b.has(d)||ut("Cannot "+R);var s=(d,b,R)=>(G(d,b,"read from private field"),R?R.call(d):b.get(d)),y=(d,b,R)=>b.has(d)?ut("Cannot add the same private member more than once"):b instanceof WeakSet?b.add(d):b.set(d,R),u=(d,b,R,Q)=>(G(d,b,"write to private field"),Q?Q.call(d,R):b.set(d,R),R),l=(d,b,R)=>(G(d,b,"access private method"),R);import{f0 as It,f1 as J,f2 as q,f3 as Lt,f4 as ct,f5 as lt,f6 as At,f7 as Mt,f8 as qt,f9 as dt,fa as pt,r as S,fb as Bt,__tla as jt}from"./index-CTdJWdDx.js";let ft,bt,yt,Rt,gt,vt,zt=Promise.all([(()=>{try{return jt}catch{}})()]).then(async()=>{var v,o,L,g,E,_,w,A,T,k,F,P,U,x,n,M,K,N,V,X,Y,Z,$,Ot,et;var d=(et=class extends It{constructor(t,e){super();y(this,n);y(this,v);y(this,o);y(this,L);y(this,g);y(this,E);y(this,_);y(this,w);y(this,A);y(this,T);y(this,k);y(this,F);y(this,P);y(this,U);y(this,x,new Set);this.options=e,u(this,v,t),u(this,w,null),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(s(this,o).addObserver(this),R(s(this,o),this.options)?l(this,n,M).call(this):this.updateResult(),l(this,n,X).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Q(s(this,o),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Q(s(this,o),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,l(this,n,Y).call(this),l(this,n,Z).call(this),s(this,o).removeObserver(this)}setOptions(t,e){const r=this.options,f=s(this,o);if(this.options=s(this,v).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");l(this,n,$).call(this),s(this,o).setOptions(this.options),r._defaulted&&!J(this.options,r)&&s(this,v).getQueryCache().notify({type:"observerOptionsUpdated",query:s(this,o),observer:this});const c=this.hasListeners();c&&tt(s(this,o),f,this.options,r)&&l(this,n,M).call(this),this.updateResult(e),c&&(s(this,o)!==f||this.options.enabled!==r.enabled||q(this.options.staleTime,s(this,o))!==q(r.staleTime,s(this,o)))&&l(this,n,K).call(this);const a=l(this,n,N).call(this);c&&(s(this,o)!==f||this.options.enabled!==r.enabled||a!==s(this,U))&&l(this,n,V).call(this,a)}getOptimisticResult(t){const e=s(this,v).getQueryCache().build(s(this,v),t),r=this.createResult(e,t);return Ct(this,r)&&(u(this,g,r),u(this,_,this.options),u(this,E,s(this,o).state)),r}getCurrentResult(){return s(this,g)}trackResult(t,e){const r={};return Object.keys(t).forEach(f=>{Object.defineProperty(r,f,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(f),e==null||e(f),t[f])})}),r}trackProp(t){s(this,x).add(t)}getCurrentQuery(){return s(this,o)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=s(this,v).defaultQueryOptions(t),r=s(this,v).getQueryCache().build(s(this,v),e);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,e))}fetch(t){return l(this,n,M).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),s(this,g)))}createResult(t,e){var at;const r=s(this,o),f=this.options,c=s(this,g),a=s(this,E),p=s(this,_),C=t!==r?t.state:s(this,L),{state:I}=t;let h={...I},it=!1,m;if(e._optimisticResults){const O=this.hasListeners(),H=!O&&R(t,e),xt=O&&tt(t,r,e,f);(H||xt)&&(h={...h,...qt(I.data,t.options)}),e._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:rt,errorUpdatedAt:nt,status:D}=h;if(e.select&&h.data!==void 0)if(c&&h.data===(a==null?void 0:a.data)&&e.select===s(this,A))m=s(this,T);else try{u(this,A,e.select),m=e.select(h.data),m=dt(c==null?void 0:c.data,m,e),u(this,T,m),u(this,w,null)}catch(O){u(this,w,O)}else m=h.data;if(e.placeholderData!==void 0&&m===void 0&&D==="pending"){let O;if(c!=null&&c.isPlaceholderData&&e.placeholderData===(p==null?void 0:p.placeholderData))O=c.data;else if(O=typeof e.placeholderData=="function"?e.placeholderData((at=s(this,k))==null?void 0:at.state.data,s(this,k)):e.placeholderData,e.select&&O!==void 0)try{O=e.select(O),u(this,w,null)}catch(H){u(this,w,H)}O!==void 0&&(D="success",m=dt(c==null?void 0:c.data,O,e),it=!0)}s(this,w)&&(rt=s(this,w),m=s(this,T),nt=Date.now(),D="error");const j=h.fetchStatus==="fetching",z=D==="pending",W=D==="error",ot=z&&j,ht=m!==void 0;return{status:D,fetchStatus:h.fetchStatus,isPending:z,isSuccess:D==="success",isError:W,isInitialLoading:ot,isLoading:ot,data:m,dataUpdatedAt:h.dataUpdatedAt,error:rt,errorUpdatedAt:nt,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>C.dataUpdateCount||h.errorUpdateCount>C.errorUpdateCount,isFetching:j,isRefetching:j&&!z,isLoadingError:W&&!ht,isPaused:h.fetchStatus==="paused",isPlaceholderData:it,isRefetchError:W&&ht,isStale:B(t,e),refetch:this.refetch}}updateResult(t){const e=s(this,g),r=this.createResult(s(this,o),this.options);if(u(this,E,s(this,o).state),u(this,_,this.options),s(this,E).data!==void 0&&u(this,k,s(this,o)),J(r,e))return;u(this,g,r);const f={},c=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,p=typeof a=="function"?a():a;if(p==="all"||!p&&!s(this,x).size)return!0;const C=new Set(p??s(this,x));return this.options.throwOnError&&C.add("error"),Object.keys(s(this,g)).some(I=>{const h=I;return s(this,g)[h]!==e[h]&&C.has(h)})};(t==null?void 0:t.listeners)!==!1&&c()&&(f.listeners=!0),l(this,n,Ot).call(this,{...f,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&l(this,n,X).call(this)}},v=new WeakMap,o=new WeakMap,L=new WeakMap,g=new WeakMap,E=new WeakMap,_=new WeakMap,w=new WeakMap,A=new WeakMap,T=new WeakMap,k=new WeakMap,F=new WeakMap,P=new WeakMap,U=new WeakMap,x=new WeakMap,n=new WeakSet,M=function(t){l(this,n,$).call(this);let e=s(this,o).fetch(this.options,t);return t!=null&&t.throwOnError||(e=e.catch(Lt)),e},K=function(){l(this,n,Y).call(this);const t=q(this.options.staleTime,s(this,o));if(ct||s(this,g).isStale||!lt(t))return;const e=At(s(this,g).dataUpdatedAt,t)+1;u(this,F,setTimeout(()=>{s(this,g).isStale||this.updateResult()},e))},N=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(s(this,o)):this.options.refetchInterval)??!1},V=function(t){l(this,n,Z).call(this),u(this,U,t),!(ct||this.options.enabled===!1||!lt(s(this,U))||s(this,U)===0)&&u(this,P,setInterval(()=>{(this.options.refetchIntervalInBackground||Mt.isFocused())&&l(this,n,M).call(this)},s(this,U)))},X=function(){l(this,n,K).call(this),l(this,n,V).call(this,l(this,n,N).call(this))},Y=function(){s(this,F)&&(clearTimeout(s(this,F)),u(this,F,void 0))},Z=function(){s(this,P)&&(clearInterval(s(this,P)),u(this,P,void 0))},$=function(){const t=s(this,v).getQueryCache().build(s(this,v),this.options);if(t===s(this,o))return;const e=s(this,o);u(this,o,t),u(this,L,t.state),this.hasListeners()&&(e==null||e.removeObserver(this),t.addObserver(this))},Ot=function(t){pt.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(s(this,g))}),s(this,v).getQueryCache().notify({query:s(this,o),type:"observerResultsUpdated"})})},et);function b(i,t){return t.enabled!==!1&&i.state.data===void 0&&!(i.state.status==="error"&&t.retryOnMount===!1)}function R(i,t){return b(i,t)||i.state.data!==void 0&&Q(i,t,t.refetchOnMount)}function Q(i,t,e){if(t.enabled!==!1){const r=typeof e=="function"?e(i):e;return r==="always"||r!==!1&&B(i,t)}return!1}function tt(i,t,e,r){return(i!==t||r.enabled===!1)&&(!e.suspense||i.state.status!=="error")&&B(i,e)}function B(i,t){return t.enabled!==!1&&i.isStaleByTime(q(t.staleTime,i))}function Ct(i,t){return!J(i.getCurrentResult(),t)}var st=S.createContext(!1),mt=()=>S.useContext(st);st.Provider;function wt(){let i=!1;return{clearReset:()=>{i=!1},reset:()=>{i=!0},isReset:()=>i}}var St=S.createContext(wt()),Ut=()=>S.useContext(St);function Et(i,t){return typeof i=="function"?i(...t):!!i}var Ft=(i,t)=>{(i.suspense||i.throwOnError)&&(t.isReset()||(i.retryOnMount=!1))},Pt=i=>{S.useEffect(()=>{i.clearReset()},[i])},Dt=({result:i,errorResetBoundary:t,throwOnError:e,query:r})=>i.isError&&!t.isReset()&&!i.isFetching&&r&&Et(e,[i.error,r]),Qt=i=>{i.suspense&&typeof i.staleTime!="number"&&(i.staleTime=1e3)},_t=(i,t)=>(i==null?void 0:i.suspense)&&t.isPending,Tt=(i,t,e)=>t.fetchOptimistic(i).catch(()=>{e.clearReset()});function kt(i,t,e){const r=Bt(),f=mt(),c=Ut(),a=r.defaultQueryOptions(i);a._optimisticResults=f?"isRestoring":"optimistic",Qt(a),Ft(a,c),Pt(c);const[p]=S.useState(()=>new t(r,a)),C=p.getOptimisticResult(a);if(S.useSyncExternalStore(S.useCallback(I=>{const h=f?()=>{}:p.subscribe(pt.batchCalls(I));return p.updateResult(),h},[p,f]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),S.useEffect(()=>{p.setOptions(a,{listeners:!1})},[a,p]),_t(a,C))throw Tt(a,p,c);if(Dt({result:C,errorResetBoundary:c,throwOnError:a.throwOnError,query:r.getQueryCache().get(a.queryHash)}))throw C.error;return a.notifyOnChangeProps?C:p.trackResult(C)}vt=function(i,t){return kt(i,d)},gt="trendingChannels",yt="allUserSubscriptions",bt="userSubscription",Rt="channelDetails",ft="userRewardsDetails"});export{ft as U,zt as __tla,bt as a,yt as b,Rt as c,gt as t,vt as u};

import{dA as C,r as h,gq as pe,dz as xe,m as e,F as fe,ee as j,gr as v,gs as ne,gt as ye,gu as me,ef as we,gv as je,gw as E,gx as ve,gy as _,eG as be,eJ as ke,B as l,eh as p,fU as I,ei as T,gz as Se,D as ie,fR as P,gA as Ce,fS as le,dj as L,dk as M,gk as Pe,gB as Ee,gC as _e,__tla as Ie}from"./index-CAoYq-L-.js";import{c as Te,a as oe,u as Le,__tla as Me}from"./index.esm-CFGfbDtR.js";import{P as Oe,__tla as Re}from"./PushLogo-DK1lFJ3i.js";import{u as O,__tla as ze}from"./useMutation-B6wYRxow.js";import{u as R,L as z,I as q,__tla as qe}from"./LeaderboardNullState-Wq5Nt80Y.js";import{C as Ne,__tla as Fe}from"./ContentLayout-BX8pdu_L.js";let ce,Ae=Promise.all([(()=>{try{return Ie}catch{}})(),(()=>{try{return Me}catch{}})(),(()=>{try{return Re}catch{}})(),(()=>{try{return ze}catch{}})(),(()=>{try{return qe}catch{}})(),(()=>{try{return Fe}catch{}})()]).then(async()=>{function N(t,r){return t.findAll(r.filters).map(a=>r.select?r.select(a):a.state)}function de(t={},r){const a=C().getMutationCache(),i=h.useRef(t),s=h.useRef(null);return s.current||(s.current=N(a,t)),h.useEffect(()=>{i.current=t}),h.useSyncExternalStore(h.useCallback(n=>a.subscribe(()=>{const o=pe(s.current,N(a,i.current));s.current!==o&&(s.current=o,xe.schedule(n))}),[a]),()=>s.current,()=>s.current)}const ue=t=>{const{svgProps:r,...a}=t;return e.jsx(fe,{componentName:"Search",icon:e.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r,children:[e.jsx("circle",{cx:"15.12",cy:"14.25",r:"9",stroke:"currentColor","stroke-width":"2"}),e.jsx("path",{d:"M21.62 20.75L27.62 26.75",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})]}),...a})};function he(t,r){var a=h.useRef(!1),i=h.useRef(),s=h.useRef(t),n=h.useCallback(function(){return a.current},[]),o=h.useCallback(function(){a.current=!1,i.current&&clearTimeout(i.current),i.current=setTimeout(function(){a.current=!0,s.current()},r)},[r]),c=h.useCallback(function(){a.current=null,i.current&&clearTimeout(i.current)},[]);return h.useEffect(function(){s.current=t},[t]),h.useEffect(function(){return o(),c},[r]),[n,c,o]}function ge(t,r,a){a===void 0&&(a=[]);var i=he(t,r),s=i[0],n=i[1],o=i[2];return h.useEffect(o,a),[s,n]}let F,A,D,$,K,b,W,B,H,U,J,G,m,V,Q,X,Y,k,Z,S,ee,te,re,ae,se;F=t=>t,A=t=>t,D=t=>({id:t.data.id,followersCount:t.data.public_metrics.followers_count,followingCount:t.data.public_metrics.following_count,likeCount:t.data.public_metrics.like_count,listedCount:t.data.public_metrics.listed_count,name:t.data.name,tweetCount:t.data.public_metrics.tweet_count,username:t.data.username}),$=t=>j({method:"POST",url:`${v()}/auth/login`,data:{username:t.username,password:t.password},headers:{"Content-Type":"application/json"}}).then(r=>F(r.data)),K=({activityId:t,token:r})=>j({method:"POST",url:`${v()}/activities/approved`,data:{activities:[{activityId:t}]},headers:{"Content-Type":"application/json",Authorization:r}}).then(a=>a.data),b=({page:t,status:r,pageSize:a,token:i,wallet:s,twitter:n})=>j({method:"GET",url:`${v()}/activities/list`,params:{status:r,page:t,pageSize:a,wallet:s,twitter:n},headers:{"Content-Type":"application/json",Authorization:i}}).then(o=>A(o.data)),W=({twitterHandle:t,token:r})=>j({method:"GET",url:`${v()}/twitter/user/${t}`,headers:{"Content-Type":"application/json",Authorization:r}}).then(a=>D(a.data)),B=({activityId:t,token:r})=>j({method:"POST",url:`${v()}/activities/rejected`,data:{activities:[{activityId:t}]},headers:{"Content-Type":"application/json",Authorization:r}}).then(a=>a.data),H=()=>O({mutationKey:[ne],mutationFn:$}),U=()=>O({mutationFn:K,mutationKey:[ye]}),J=()=>O({mutationFn:B,mutationKey:[me]}),G=(t,r)=>we({queryKey:[je,t],queryFn:()=>W({twitterHandle:t,token:r}),staleTime:1/0,retry:!1,refetchInterval:!1,refetchIntervalInBackground:!1,refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,retryOnMount:!1,enabled:!!r&&!!t}),m=()=>{var t,r;return(r=(t=de({filters:{mutationKey:[ne]},select:a=>a.state.data}))==null?void 0:t[0])==null?void 0:r.token},V=({status:t,pageSize:r=20,token:a,twitter:i,wallet:s})=>R({queryKey:[E,`${i}-${s}`],initialPageParam:1,queryFn:({pageParam:n})=>b({status:t,page:n,pageSize:r,token:a,twitter:i,wallet:s}),getNextPageParam:({page:n,total:o})=>n>=o?null:n+1,enabled:!!a,refetchInterval:!1,refetchIntervalInBackground:!1,refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,retryOnMount:!1}),Q=({status:t,pageSize:r=20,token:a,twitter:i,wallet:s})=>R({queryKey:[ve,`${i}-${s}`],initialPageParam:1,queryFn:({pageParam:n})=>b({status:t,page:n,pageSize:r,token:a,twitter:i,wallet:s}),getNextPageParam:({page:n,total:o})=>n>=o?null:n+1,enabled:!!a,refetchInterval:!1,refetchIntervalInBackground:!1,refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,retryOnMount:!1}),X=({status:t,pageSize:r=20,token:a,twitter:i,wallet:s})=>R({queryKey:[_,`${i}-${s}`],initialPageParam:1,queryFn:({pageParam:n})=>b({status:t,page:n,pageSize:r,token:a,twitter:i,wallet:s}),getNextPageParam:({page:n,total:o})=>n>=o?null:n+1,enabled:!!a,refetchInterval:!1,refetchIntervalInBackground:!1,refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,retryOnMount:!1}),Y=({handleSetActiveView:t})=>{const{mutate:r,isPending:a}=H(),i=Te().shape({username:oe().required("Username is required"),password:oe().required("Password is required")}),s=Le({initialValues:{username:"",password:""},validationSchema:i,onSubmit:c=>{o({...c})}}),n=be(),o=({username:c,password:u})=>{r({username:c,password:u},{onSuccess:g=>{t("list")},onError:g=>{g.name&&n.showMessageToast({toastTitle:"Error",toastMessage:g.response.data.error,toastType:"ERROR",getToastIcon:y=>e.jsx(ke,{size:y,color:"red"})})}})};return e.jsxs(l,{alignItems:"center",display:"flex",flexDirection:"column",gap:"s12",children:[e.jsxs(l,{display:"flex",gap:"s1",alignItems:"center",children:[e.jsx(Oe,{}),e.jsx(p,{variant:"h2-semibold",color:{light:"gray-1000",dark:"white"},children:"Push"})]}),e.jsxs(l,{width:"374px",display:"flex",alignItems:"center",padding:"s6",flexDirection:"column",gap:"s6",backgroundColor:{dark:"gray-900",light:"white"},borderRadius:"r6",children:[e.jsx(p,{variant:"h4-bold",color:{light:"gray-1000",dark:"gray-100"},children:"Points Vault Login"}),e.jsx(l,{width:"100%",children:e.jsx("form",{onSubmit:s.handleSubmit,children:e.jsxs(l,{display:"flex",alignItems:"center",flexDirection:"column",gap:"s3",width:"100%",children:[e.jsx(I,{placeholder:"User",value:s.values.username,disabled:a,onChange:s.handleChange("username"),error:s.touched.username&&!!s.errors.username,errorMessage:s.touched.username?s.errors.username:""}),e.jsx(I,{type:"password",placeholder:"Password",disabled:a,value:s.values.password,onChange:s.handleChange("password"),error:s.touched.password&&!!s.errors.password,errorMessage:s.touched.password?s.errors.password:""}),e.jsx(l,{margin:"s6 s0 s0 s0",children:e.jsx(T,{disabled:a,children:a?"Authenticating":"Login"})})]})})})]})]})},k=()=>e.jsxs(l,{display:"flex",justifyContent:"space-between",children:[e.jsx(l,{width:"345px",children:e.jsx(p,{variant:"c-bold",color:{light:"gray-500",dark:"gray-600"},children:"USER"})}),e.jsx(l,{width:"345px",children:e.jsx(p,{variant:"c-bold",color:{light:"gray-500",dark:"gray-600"},children:"TWITTER LINK"})}),e.jsx(l,{width:"42px",justifyContent:"center",display:"flex",children:e.jsx(p,{variant:"c-bold",color:{light:"gray-500",dark:"gray-600"},children:"FOLLOWERS"})}),e.jsx(l,{width:"245px",display:"flex",justifyContent:"center",children:e.jsx(p,{variant:"c-bold",color:{light:"gray-500",dark:"gray-600"},children:"ACTION"})})]}),Z=({status:t,item:r,refetch:a})=>{const i=m(),{mutate:s,isPending:n}=J(),{mutate:o,isPending:c}=U(),u=async()=>{s({activityId:r.activityId,currentStatus:t,token:i},{onSuccess:()=>a("REJECTED")})},g=async()=>{o({activityId:r.activityId,currentStatus:t,token:i},{onSuccess:()=>a("COMPLETED")})};return e.jsxs(l,{width:"208px",minWidth:"208px",minHeight:"22px",display:"flex",justifyContent:"center",gap:"s2",children:[t!=="COMPLETED"&&e.jsx(T,{variant:"outline",size:"extraSmall",disabled:c||n,onClick:g,children:"Approve"}),t!=="REJECTED"&&e.jsx(T,{variant:"dangerSecondary",size:"extraSmall",disabled:c||n,onClick:u,children:"Reject"})]})},S=({isLoading:t,item:r,refetch:a})=>{var o,c,u;const{mode:i}=Se(),s=m(),{data:n}=G((o=r.data)==null?void 0:o.twitter,s);return e.jsxs(l,{height:"48px",display:"flex",justifyContent:"space-between",alignItems:"center",css:ie`
        border-bottom: 1px solid var(--${i==="dark"?"gray-800":"gray-200"});
      `,children:[e.jsx(P,{isLoading:t,children:e.jsx(l,{display:"flex",alignItems:"center",width:"345px",height:"22px",children:e.jsx(p,{variant:"bs-semibold",color:{light:"gray-1000",dark:"gray-100"},children:Ce(r.userWallet)})})}),e.jsx(P,{isLoading:t,children:e.jsx(l,{display:"flex",alignItems:"center",width:"345px",children:e.jsx(le,{to:`https://x.com/${(c=r.data)==null?void 0:c.twitter}`,target:"_blank",rel:"noopener noreferrer",children:e.jsxs(p,{color:"pink-600",variant:"bs-semibold",children:["https://x.com/",(u=r.data)==null?void 0:u.twitter]})})})}),e.jsx(P,{isLoading:t,children:e.jsx(l,{display:"flex",alignItems:"center",justifyContent:"center",width:"42px",children:e.jsx(p,{variant:"bs-semibold",color:n!=null&&n.followersCount&&n.followersCount<50?"red-700":{light:"gray-1000",dark:"gray-100"},children:(n==null?void 0:n.followersCount)??"-"})})}),e.jsx(P,{isLoading:t,children:e.jsx(l,{width:"245px",minHeight:"22px",display:"flex",justifyContent:"center",children:e.jsx(Z,{refetch:a,status:r.status,item:r})})})]})},ee=({query:t})=>{const r=m(),a=C(),{data:i,fetchNextPage:s,hasNextPage:n,isFetchingNextPage:o,isLoading:c,isError:u,refetch:g}=V({status:"COMPLETED",token:r,pageSize:20,twitter:t.twitter,wallet:t.wallet}),y=!o&&n,x=c?Array(5).fill(0):(i==null?void 0:i.pages.flatMap(d=>d.activities))||[];if(!x.length)return e.jsx(z,{refetchLeaderboard:u?g:void 0,heading:"No Users Found",error:u,subHeading:u?"Please refresh to view the List":""});const w=()=>{g(),a.invalidateQueries({queryKey:[_]})};return e.jsx(l,{gap:"s4",display:"flex",flexDirection:"column",children:e.jsxs(l,{height:"calc(100vh - 356px)",overflow:"auto",children:[e.jsx(k,{}),e.jsx(q,{pageStart:0,loadMore:()=>s(),hasMore:y,loader:e.jsx(l,{margin:"s3",children:e.jsx(L,{spinnerSize:24,type:M.SEAMLESS})},"loader-spinner"),useWindow:!1,threshold:150,children:x.map((d,f)=>e.jsx(S,{item:d,isLoading:c,refetch:w},(d==null?void 0:d.activityId)||f))})]})})},te=({query:t})=>{const r=m(),a=C(),{data:i,fetchNextPage:s,hasNextPage:n,isFetchingNextPage:o,isLoading:c,isError:u,refetch:g}=Q({status:"PENDING",token:r,pageSize:20,twitter:t.twitter,wallet:t.wallet}),y=!o&&n,x=c?Array(5).fill(0):(i==null?void 0:i.pages.flatMap(d=>d.activities))||[];if(!x.length)return e.jsx(z,{refetchLeaderboard:u?g:void 0,heading:"No Users Found",error:u,subHeading:u?"Please refresh to view the List":""});const w=d=>{g();const f=d==="COMPLETED"?E:d==="REJECTED"?_:void 0;f&&a.invalidateQueries({queryKey:[f]})};return e.jsx(l,{gap:"s4",display:"flex",flexDirection:"column",children:e.jsxs(l,{height:"calc(100vh - 356px)",overflow:"auto",children:[e.jsx(k,{}),e.jsx(q,{pageStart:0,loadMore:()=>s(),hasMore:y,loader:e.jsx(l,{margin:"s3",children:e.jsx(L,{spinnerSize:24,type:M.SEAMLESS})},"loader-spinner"),useWindow:!1,threshold:150,children:x.map((d,f)=>e.jsx(S,{item:d,isLoading:c,refetch:w},(d==null?void 0:d.activityId)||f))})]})})},re=({query:t})=>{const r=m(),a=C(),{data:i,fetchNextPage:s,hasNextPage:n,isFetchingNextPage:o,isLoading:c,isError:u,refetch:g}=X({status:"REJECTED",token:r,pageSize:20,twitter:t.twitter,wallet:t.wallet}),y=!o&&n,x=c?Array(5).fill(0):(i==null?void 0:i.pages.flatMap(d=>d.activities))||[];if(!x.length)return e.jsx(z,{refetchLeaderboard:u?g:void 0,heading:"No Users Found",error:u,subHeading:u?"Please refresh to view the List":""});const w=()=>{g(),a.invalidateQueries({queryKey:[E]})};return e.jsx(l,{gap:"s4",display:"flex",flexDirection:"column",children:e.jsxs(l,{height:"calc(100vh - 356px)",overflow:"auto",children:[e.jsx(k,{}),e.jsx(q,{pageStart:0,loadMore:()=>s(),hasMore:y,loader:e.jsx(l,{margin:"s3",children:e.jsx(L,{spinnerSize:24,type:M.SEAMLESS})},"loader-spinner"),useWindow:!1,threshold:150,children:x.map((d,f)=>e.jsx(S,{item:d,isLoading:c,refetch:w},(d==null?void 0:d.activityId)||f))})]})})},ae=()=>{const[t,r]=h.useState(""),[a,i]=h.useState({}),s=h.useCallback(n=>{if(!n)return{};const o=Pe(n),c=o?"wallet":"twitter",u=o?`eip155:${n}`:n;return{[c]:u}},[]);return ge(()=>i(s(t)),500,[t]),e.jsxs(l,{backgroundColor:{light:"white",dark:"gray-900"},padding:"s6",borderRadius:"r6",children:[e.jsx(p,{variant:"h4-bold",color:"gray-1000",children:"Points Vault"}),e.jsxs(l,{display:"flex",justifyContent:"space-between",alignItems:"center",css:[{marginBottom:"var(--s6)"}],children:[e.jsxs(l,{display:"flex",gap:"s1",children:[e.jsx(p,{color:"gray-500",variant:"bs-regular",children:"Ensure the user has at-least 50 Followers and is following"}),e.jsx(le,{to:"https://x.com/pushprotocol",target:"_blank",referrerPolicy:"no-referrer",children:e.jsx(p,{color:"pink-400",variant:"bs-regular",children:"@pushprotocol"})})," ",e.jsx(p,{color:"gray-500",variant:"bs-regular",children:"on Twitter"})]}),e.jsx("img",{src:Ee,alt:"Push Icon"})]}),e.jsx(l,{position:"relative",width:"100%",children:e.jsx(l,{position:"absolute",width:"302px",css:ie`
            right: 0px;
          `,children:e.jsx(I,{placeholder:"Search user or x handle or else",icon:e.jsx(ue,{}),value:t,onChange:n=>r(n.target.value)})})}),e.jsx(_e,{variant:"fill",onChange:()=>r(""),items:[{key:"PENDING",label:"Pending",children:e.jsx(te,{query:a})},{key:"COMPLETED",label:"Approved",children:e.jsx(ee,{query:a})},{key:"REJECTED",label:"Rejected",children:e.jsx(re,{query:a})}]})]})},se=()=>{const[t,r]=h.useState("login");return e.jsxs(l,{height:"100%",width:"-webkit-fill-available",children:[t==="login"&&e.jsx(Y,{handleSetActiveView:r}),t==="list"&&e.jsx(ae,{})]})},ce=()=>e.jsx(Ne,{children:e.jsx(se,{})})});export{Ae as __tla,ce as default};

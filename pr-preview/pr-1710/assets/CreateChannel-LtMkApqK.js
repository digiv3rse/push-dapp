import{m as w,D as O,eh as N,B as zt,e5 as Ke,e6 as le,e4 as Ze,s as Yt,hu as Pe,r as W,hv as qn,q as zn,hw as Yn,hx as Jn,e1 as ce,hy as Jt,dR as Xt,hn as Xn,hz as Kn,z as Ve,dF as Zn,gb as Re,ei as $,gd as Vn,dG as $n,x as $e,E as Kt,fY as ei,g9 as Zt,hA as ti,dH as ri,dJ as ni,hB as ii,hC as ai,hD as oi,f$ as si,h4 as li,gW as ci,g$ as Ai,__tla as hi}from"./index-BJ4q6mdb.js";import{c as Vt,a as et,b as ui,u as $t,__tla as di}from"./index.esm-CnH3QN1C.js";import{U as fi,m as gi,c as pi,i as mi,__tla as Ii}from"./UniswapWidget-CScOT3cN.js";import{E as wi,__tla as yi}from"./ErrorFilled-DmRgnuBg.js";import{u as er,__tla as vi}from"./useMutation-D9vkgdpt.js";let tr,tt,rt,nt,bi=Promise.all([(()=>{try{return hi}catch{}})(),(()=>{try{return di}catch{}})(),(()=>{try{return Ii}catch{}})(),(()=>{try{return yi}catch{}})(),(()=>{try{return vi}catch{}})()]).then(async()=>{const rr=({steps:e,setActiveStepIndex:t,completedSteps:r})=>{const n=l=>{r!=null&&r.includes(l)&&t(l)};return w.jsx(O,{display:"flex",gap:"s8",width:"-webkit-fill-available",children:e.map((l,u)=>w.jsxs(O,{display:"flex",flexDirection:"column",gap:"s3",width:"inherit",cursor:"pointer",color:r.includes(u)?"pink-500":"gray-500",onClick:()=>n(u),children:[w.jsx(N,{textAlign:"center",variant:"h5-semibold",display:{ml:"none",dp:"block"},children:l.label}),w.jsx(N,{textAlign:"center",variant:"h6-semibold",display:{ml:"block",dp:"none"},children:l.label}),w.jsx(O,{height:"4px",borderRadius:"r2",backgroundColor:r.includes(u)?"pink-500":"gray-500"})]},u))})},nr=e=>{const{svgProps:t,...r}=e;return w.jsx(zt,{componentName:"CloudUpload",icon:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"inherit",height:"inherit",viewBox:"0 0 53 52",fill:"none",...t,children:[w.jsx("path",{d:"M16.1888 26.3978L26.7966 15.7901L37.4043 26.3978",stroke:"#C4CBD5","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"}),w.jsx("path",{d:"M27.0618 50.0001V16.8509",stroke:"#C4CBD5","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"}),w.jsx("path",{d:"M21.4927 35.4144H11.1502C8.05625 35.0608 1.86841 32.4972 1.86841 25.0718C1.86841 17.6464 8.05625 14.9061 11.1502 14.4641C11.769 10.3094 15.6585 2 26.2662 2C39.2607 2 41.0286 10.8398 41.9126 16.0553C45.0065 15.9669 51.4596 19.2906 51.4596 26.9282C51.2828 29.7569 49.6032 35.4144 44.2993 35.4144C38.9955 35.4144 34.1336 35.4144 32.3656 35.4144",stroke:"#C4CBD5","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"})]}),...r})},ir=e=>{const{svgProps:t,...r}=e;return w.jsx(zt,{componentName:"Swap",icon:w.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[w.jsx("path",{d:"M13.25 5L5 13.25H27",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),w.jsx("path",{d:"M18.75 27L27 18.75H5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]}),...r})},ar=async e=>{const{channelType:t,identityBytes:r,fees:n,signer:l}=e;return(await new Ke(le.epnscore,Ze.epnscore,l).createChannelWithPUSH(t,r,n,0,{gasLimit:6e5})).wait()},or=async e=>{const{noOfTokenToApprove:t,signer:r}=e;return(await new Ke(le.pushToken,Ze.pushToken,r).approve(le.epnscore,t)).wait()};var it={exports:{}};(function(e,t){(function(r){e.exports=r()})(function(){return function(){function r(n,l,u){function a(h,A){if(!l[h]){if(!n[h]){var i=typeof Pe=="function"&&Pe;if(!A&&i)return i(h,!0);if(s)return s(h,!0);var d=new Error("Cannot find module '"+h+"'");throw d.code="MODULE_NOT_FOUND",d}var o=l[h]={exports:{}};n[h][0].call(o.exports,function(f){var p=n[h][1][f];return a(p||f)},o,o.exports,r,n,l,u)}return l[h].exports}for(var s=typeof Pe=="function"&&Pe,c=0;c<u.length;c++)a(u[c]);return a}return r}()({1:[function(r,n,l){var u=r("multimath"),a=r("./mm_unsharp_mask"),s=r("./mm_resize");function c(h){var A=h||[],i={js:A.indexOf("js")>=0,wasm:A.indexOf("wasm")>=0};u.call(this,i),this.features={js:i.js,wasm:i.wasm&&this.has_wasm()},this.use(a),this.use(s)}c.prototype=Object.create(u.prototype),c.prototype.constructor=c,c.prototype.resizeAndUnsharp=function(h,A){var i=this.resize(h,A);return h.unsharpAmount&&this.unsharp_mask(i,h.toWidth,h.toHeight,h.unsharpAmount,h.unsharpRadius,h.unsharpThreshold),i},n.exports=c},{"./mm_resize":4,"./mm_unsharp_mask":9,multimath:19}],2:[function(r,n,l){function u(i){return i<0?0:i>255?255:i}function a(i){return i>=0?i:0}function s(i,d,o,f,p,m){var I,b,E,j,k,Q,B,v,D,M,U,R=0,S=0;for(D=0;D<f;D++){for(k=0,M=0;M<p;M++){for(Q=m[k++],B=m[k++],v=R+Q*4|0,I=b=E=j=0;B>0;B--)U=m[k++],j=j+U*i[v+3]|0,E=E+U*i[v+2]|0,b=b+U*i[v+1]|0,I=I+U*i[v]|0,v=v+4|0;d[S+3]=a(j>>7),d[S+2]=a(E>>7),d[S+1]=a(b>>7),d[S]=a(I>>7),S=S+f*4|0}S=(D+1)*4|0,R=(D+1)*o*4|0}}function c(i,d,o,f,p,m){var I,b,E,j,k,Q,B,v,D,M,U,R=0,S=0;for(D=0;D<f;D++){for(k=0,M=0;M<p;M++){for(Q=m[k++],B=m[k++],v=R+Q*4|0,I=b=E=j=0;B>0;B--)U=m[k++],j=j+U*i[v+3]|0,E=E+U*i[v+2]|0,b=b+U*i[v+1]|0,I=I+U*i[v]|0,v=v+4|0;I>>=7,b>>=7,E>>=7,j>>=7,d[S+3]=u(j+8192>>14),d[S+2]=u(E+8192>>14),d[S+1]=u(b+8192>>14),d[S]=u(I+8192>>14),S=S+f*4|0}S=(D+1)*4|0,R=(D+1)*o*4|0}}function h(i,d,o,f,p,m){var I,b,E,j,k,Q,B,v,D,M,U,R,S=0,T=0;for(M=0;M<f;M++){for(Q=0,U=0;U<p;U++){for(B=m[Q++],v=m[Q++],D=S+B*4|0,I=b=E=j=0;v>0;v--)R=m[Q++],k=i[D+3],j=j+R*k|0,E=E+R*i[D+2]*k|0,b=b+R*i[D+1]*k|0,I=I+R*i[D]*k|0,D=D+4|0;E=E/255|0,b=b/255|0,I=I/255|0,d[T+3]=a(j>>7),d[T+2]=a(E>>7),d[T+1]=a(b>>7),d[T]=a(I>>7),T=T+f*4|0}T=(M+1)*4|0,S=(M+1)*o*4|0}}function A(i,d,o,f,p,m){var I,b,E,j,k,Q,B,v,D,M,U,R=0,S=0;for(D=0;D<f;D++){for(k=0,M=0;M<p;M++){for(Q=m[k++],B=m[k++],v=R+Q*4|0,I=b=E=j=0;B>0;B--)U=m[k++],j=j+U*i[v+3]|0,E=E+U*i[v+2]|0,b=b+U*i[v+1]|0,I=I+U*i[v]|0,v=v+4|0;I>>=7,b>>=7,E>>=7,j>>=7,j=u(j+8192>>14),j>0&&(I=I*255/j|0,b=b*255/j|0,E=E*255/j|0),d[S+3]=j,d[S+2]=u(E+8192>>14),d[S+1]=u(b+8192>>14),d[S]=u(I+8192>>14),S=S+f*4|0}S=(D+1)*4|0,R=(D+1)*o*4|0}}n.exports={convolveHor:s,convolveVert:c,convolveHorWithPre:h,convolveVertWithPre:A}},{}],3:[function(r,n,l){n.exports="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"},{}],4:[function(r,n,l){n.exports={name:"resize",fn:r("./resize"),wasm_fn:r("./resize_wasm"),wasm_src:r("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(r,n,l){var u=r("./resize_filter_gen"),a=r("./convolve"),s=a.convolveHor,c=a.convolveVert,h=a.convolveHorWithPre,A=a.convolveVertWithPre;function i(o,f,p){for(var m=3,I=f*p*4|0;m<I;){if(o[m]!==255)return!0;m=m+4|0}return!1}function d(o,f,p){for(var m=3,I=f*p*4|0;m<I;)o[m]=255,m=m+4|0}n.exports=function(o){var f=o.src,p=o.width,m=o.height,I=o.toWidth,b=o.toHeight,E=o.scaleX||o.toWidth/o.width,j=o.scaleY||o.toHeight/o.height,k=o.offsetX||0,Q=o.offsetY||0,B=o.dest||new Uint8Array(I*b*4),v=typeof o.filter>"u"?"mks2013":o.filter,D=u(v,p,I,E,k),M=u(v,m,b,j,Q),U=new Uint16Array(I*m*4);return i(f,p,m)?(h(f,U,p,m,I,D),A(U,B,m,I,b,M)):(s(f,U,p,m,I,D),c(U,B,m,I,b,M),d(B,I,b)),B}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(r,n,l){var u=r("./resize_filter_info"),a=14;function s(c){return Math.round(c*((1<<a)-1))}n.exports=function(c,h,A,i,d){var o=u.filter[c].fn,f=1/i,p=Math.min(1,i),m=u.filter[c].win/p,I,b,E,j,k,Q,B,v,D,M,U,R,S,T,G,g,C,y=Math.floor((m+1)*2),_=new Int16Array((y+2)*A),x=0,F=!_.subarray||!_.set;for(I=0;I<A;I++){for(b=(I+.5)*f+d,E=Math.max(0,Math.floor(b-m)),j=Math.min(h-1,Math.ceil(b+m)),k=j-E+1,Q=new Float32Array(k),B=new Int16Array(k),v=0,D=E,M=0;D<=j;D++,M++)U=o((D+.5-b)*p),v+=U,Q[M]=U;for(R=0,M=0;M<Q.length;M++)S=Q[M]/v,R+=S,B[M]=s(S);for(B[A>>1]+=s(1-R),T=0;T<B.length&&B[T]===0;)T++;if(T<B.length){for(G=B.length-1;G>0&&B[G]===0;)G--;if(g=E+T,C=G-T+1,_[x++]=g,_[x++]=C,!F)_.set(B.subarray(T,G+1),x),x+=C;else for(M=T;M<=G;M++)_[x++]=B[M]}else _[x++]=0,_[x++]=0}return _}},{"./resize_filter_info":7}],7:[function(r,n,l){var u={box:{win:.5,fn:function(a){return a<0&&(a=-a),a<.5?1:0}},hamming:{win:1,fn:function(a){if(a<0&&(a=-a),a>=1)return 0;if(a<11920929e-14)return 1;var s=a*Math.PI;return Math.sin(s)/s*(.54+.46*Math.cos(s/1))}},lanczos2:{win:2,fn:function(a){if(a<0&&(a=-a),a>=2)return 0;if(a<11920929e-14)return 1;var s=a*Math.PI;return Math.sin(s)/s*Math.sin(s/2)/(s/2)}},lanczos3:{win:3,fn:function(a){if(a<0&&(a=-a),a>=3)return 0;if(a<11920929e-14)return 1;var s=a*Math.PI;return Math.sin(s)/s*Math.sin(s/3)/(s/3)}},mks2013:{win:2.5,fn:function(a){return a<0&&(a=-a),a>=2.5?0:a>=1.5?-.125*(a-2.5)*(a-2.5):a>=.5?.25*(4*a*a-11*a+7):1.0625-1.75*a*a}}};n.exports={filter:u,f2q:{box:0,hamming:1,lanczos2:2,lanczos3:3},q2f:["box","hamming","lanczos2","lanczos3"]}},{}],8:[function(r,n,l){var u=r("./resize_filter_gen");function a(i,d,o){for(var f=3,p=d*o*4|0;f<p;){if(i[f]!==255)return!0;f=f+4|0}return!1}function s(i,d,o){for(var f=3,p=d*o*4|0;f<p;)i[f]=255,f=f+4|0}function c(i){return new Uint8Array(i.buffer,0,i.byteLength)}var h=!0;try{h=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1}catch{}function A(i,d,o){if(h){d.set(c(i),o);return}for(var f=o,p=0;p<i.length;p++){var m=i[p];d[f++]=m&255,d[f++]=m>>8&255}}n.exports=function(i){var d=i.src,o=i.width,f=i.height,p=i.toWidth,m=i.toHeight,I=i.scaleX||i.toWidth/i.width,b=i.scaleY||i.toHeight/i.height,E=i.offsetX||0,j=i.offsetY||0,k=i.dest||new Uint8Array(p*m*4),Q=typeof i.filter>"u"?"mks2013":i.filter,B=u(Q,o,p,I,E),v=u(Q,f,m,b,j),D=0,M=Math.max(d.byteLength,k.byteLength),U=this.__align(D+M),R=f*p*4*2,S=this.__align(U+R),T=this.__align(S+B.byteLength),G=T+v.byteLength,g=this.__instance("resize",G),C=new Uint8Array(this.__memory.buffer),y=new Uint32Array(this.__memory.buffer),_=new Uint32Array(d.buffer);y.set(_),A(B,C,S),A(v,C,T);var x=g.exports.convolveHV||g.exports._convolveHV;a(d,o,f)?x(S,T,U,o,f,p,m,1):(x(S,T,U,o,f,p,m,0),s(k,p,m));var F=new Uint32Array(k.buffer);return F.set(new Uint32Array(this.__memory.buffer,0,m*p)),k}},{"./resize_filter_gen":6}],9:[function(r,n,l){n.exports={name:"unsharp_mask",fn:r("./unsharp_mask"),wasm_fn:r("./unsharp_mask_wasm"),wasm_src:r("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":10,"./unsharp_mask_wasm":11,"./unsharp_mask_wasm_base64":12}],10:[function(r,n,l){var u=r("glur/mono16");function a(s,c,h){for(var A=c*h,i=new Uint16Array(A),d,o,f,p,m=0;m<A;m++)d=s[4*m],o=s[4*m+1],f=s[4*m+2],p=d>=o&&d>=f?d:o>=f&&o>=d?o:f,i[m]=p<<8;return i}n.exports=function(s,c,h,A,i,d){var o,f,p,m,I;if(!(A===0||i<.5)){i>2&&(i=2);var b=a(s,c,h),E=new Uint16Array(b);u(E,c,h,i);for(var j=A/100*4096+.5|0,k=d<<8,Q=c*h,B=0;B<Q;B++)o=b[B],m=o-E[B],Math.abs(m)>=k&&(f=o+(j*m+2048>>12),f=f>65280?65280:f,f=f<0?0:f,o=o!==0?o:1,p=(f<<12)/o|0,I=B*4,s[I]=s[I]*p+2048>>12,s[I+1]=s[I+1]*p+2048>>12,s[I+2]=s[I+2]*p+2048>>12)}}},{"glur/mono16":18}],11:[function(r,n,l){n.exports=function(u,a,s,c,h,A){if(!(c===0||h<.5)){h>2&&(h=2);var i=a*s,d=i*4,o=i*2,f=i*2,p=Math.max(a,s)*4,m=8*4,I=0,b=d,E=b+o,j=E+f,k=j+f,Q=k+p,B=this.__instance("unsharp_mask",d+o+f*2+p+m,{exp:Math.exp}),v=new Uint32Array(u.buffer),D=new Uint32Array(this.__memory.buffer);D.set(v);var M=B.exports.hsv_v16||B.exports._hsv_v16;M(I,b,a,s),M=B.exports.blurMono16||B.exports._blurMono16,M(b,E,j,k,Q,a,s,h),M=B.exports.unsharp||B.exports._unsharp,M(I,I,b,E,a,s,c,A),v.set(new Uint32Array(this.__memory.buffer,0,i))}}},{}],12:[function(r,n,l){n.exports="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"},{}],13:[function(r,n,l){var u=100;function a(s,c){this.create=s,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=c||2e3}a.prototype.acquire=function(){var s=this,c;return this.available.length!==0?c=this.available.pop():(c=this.create(),c.id=this.lastId++,c.release=function(){return s.release(c)}),this.acquired[c.id]=c,c},a.prototype.release=function(s){var c=this;delete this.acquired[s.id],s.lastUsed=Date.now(),this.available.push(s),this.timeoutId===0&&(this.timeoutId=setTimeout(function(){return c.gc()},u))},a.prototype.gc=function(){var s=this,c=Date.now();this.available=this.available.filter(function(h){return c-h.lastUsed>s.idle?(h.destroy(),!1):!0}),this.available.length!==0?this.timeoutId=setTimeout(function(){return s.gc()},u):this.timeoutId=0},n.exports=a},{}],14:[function(r,n,l){var u=2;n.exports=function(a,s,c,h,A,i){var d=c/a,o=h/s,f=(2*i+u+1)/A;if(f>.5)return[[c,h]];var p=Math.ceil(Math.log(Math.min(d,o))/Math.log(f));if(p<=1)return[[c,h]];for(var m=[],I=0;I<p;I++){var b=Math.round(Math.pow(Math.pow(a,p-I-1)*Math.pow(c,I+1),1/p)),E=Math.round(Math.pow(Math.pow(s,p-I-1)*Math.pow(h,I+1),1/p));m.push([b,E])}return m}},{}],15:[function(r,n,l){var u=1e-5;function a(c){var h=Math.round(c);return Math.abs(c-h)<u?h:Math.floor(c)}function s(c){var h=Math.round(c);return Math.abs(c-h)<u?h:Math.ceil(c)}n.exports=function(c){var h=c.toWidth/c.width,A=c.toHeight/c.height,i=a(c.srcTileSize*h)-2*c.destTileBorder,d=a(c.srcTileSize*A)-2*c.destTileBorder;if(i<1||d<1)throw new Error("Internal error in pica: target tile width/height is too small.");var o,f,p,m,I,b,E=[],j;for(m=0;m<c.toHeight;m+=d)for(p=0;p<c.toWidth;p+=i)o=p-c.destTileBorder,o<0&&(o=0),I=p+i+c.destTileBorder-o,o+I>=c.toWidth&&(I=c.toWidth-o),f=m-c.destTileBorder,f<0&&(f=0),b=m+d+c.destTileBorder-f,f+b>=c.toHeight&&(b=c.toHeight-f),j={toX:o,toY:f,toWidth:I,toHeight:b,toInnerX:p,toInnerY:m,toInnerWidth:i,toInnerHeight:d,offsetX:o/h-a(o/h),offsetY:f/A-a(f/A),scaleX:h,scaleY:A,x:a(o/h),y:a(f/A),width:s(I/h),height:s(b/A)},E.push(j);return E}},{}],16:[function(r,n,l){function u(a){return Object.prototype.toString.call(a)}n.exports.isCanvas=function(a){var s=u(a);return s==="[object HTMLCanvasElement]"||s==="[object OffscreenCanvas]"||s==="[object Canvas]"},n.exports.isImage=function(a){return u(a)==="[object HTMLImageElement]"},n.exports.isImageBitmap=function(a){return u(a)==="[object ImageBitmap]"},n.exports.limiter=function(a){var s=0,c=[];function h(){s<a&&c.length&&(s++,c.shift()())}return function(A){return new Promise(function(i,d){c.push(function(){A().then(function(o){i(o),s--,h()},function(o){d(o),s--,h()})}),h()})}},n.exports.cib_quality_name=function(a){switch(a){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},n.exports.cib_support=function(a){return Promise.resolve().then(function(){if(typeof createImageBitmap>"u")return!1;var s=a(100,100);return createImageBitmap(s,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then(function(c){var h=c.width===10;return c.close(),s=null,h})}).catch(function(){return!1})},n.exports.worker_offscreen_canvas_support=function(){return new Promise(function(a,s){if(typeof OffscreenCanvas>"u"){a(!1);return}function c(i){if(typeof createImageBitmap>"u"){i.postMessage(!1);return}Promise.resolve().then(function(){var d=new OffscreenCanvas(10,10),o=d.getContext("2d");return o.rect(0,0,1,1),createImageBitmap(d,0,0,1,1)}).then(function(){return i.postMessage(!0)},function(){return i.postMessage(!1)})}var h=btoa("(".concat(c.toString(),")(self);")),A=new Worker("data:text/javascript;base64,".concat(h));A.onmessage=function(i){return a(i.data)},A.onerror=s}).then(function(a){return a},function(){return!1})},n.exports.can_use_canvas=function(a){var s=!1;try{var c=a(2,1),h=c.getContext("2d"),A=h.createImageData(2,1);A.data[0]=12,A.data[1]=23,A.data[2]=34,A.data[3]=255,A.data[4]=45,A.data[5]=56,A.data[6]=67,A.data[7]=255,h.putImageData(A,0,0),A=null,A=h.getImageData(0,0,2,1),A.data[0]===12&&A.data[1]===23&&A.data[2]===34&&A.data[3]===255&&A.data[4]===45&&A.data[5]===56&&A.data[6]===67&&A.data[7]===255&&(s=!0)}catch{}return s},n.exports.cib_can_use_region=function(){return new Promise(function(a){if(typeof Image>"u"||typeof createImageBitmap>"u"){a(!1);return}var s=new Image;s.src="data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z",s.onload=function(){createImageBitmap(s,0,0,s.width,s.height).then(function(c){c.width===s.width&&c.height===s.height?a(!0):a(!1)},function(){return a(!1)})},s.onerror=function(){return a(!1)}})}},{}],17:[function(r,n,l){n.exports=function(){var u=r("./mathlib"),a;onmessage=function(s){var c=s.data.opts;if(!c.src&&c.srcBitmap){var h=new OffscreenCanvas(c.width,c.height),A=h.getContext("2d");A.drawImage(c.srcBitmap,0,0),c.src=A.getImageData(0,0,c.width,c.height).data,h.width=h.height=0,h=null,c.srcBitmap.close(),c.srcBitmap=null}a||(a=new u(s.data.features));var i=a.resizeAndUnsharp(c);postMessage({data:i},[i.buffer])}}},{"./mathlib":1}],18:[function(r,n,l){var u,a,s,c,h,A,i,d;function o(m){m<.5&&(m=.5);var I=Math.exp(.726*.726)/m,b=Math.exp(-I),E=Math.exp(-2*I),j=(1-b)*(1-b)/(1+2*I*b-E);return u=j,a=j*(I-1)*b,s=j*(I+1)*b,c=-j*E,h=2*b,A=-E,i=(u+a)/(1-h-A),d=(s+c)/(1-h-A),new Float32Array([u,a,s,c,h,A,i,d])}function f(m,I,b,E,j,k){var Q,B,v,D,M,U,R,S,T,G,g,C,y,_;for(T=0;T<k;T++){for(U=T*j,R=T,S=0,Q=m[U],M=Q*E[6],D=M,g=E[0],C=E[1],y=E[4],_=E[5],G=0;G<j;G++)B=m[U],v=B*g+Q*C+D*y+M*_,M=D,D=v,Q=B,b[S]=D,S++,U++;for(U--,S--,R+=k*(j-1),Q=m[U],M=Q*E[7],D=M,B=Q,g=E[2],C=E[3],G=j-1;G>=0;G--)v=B*g+Q*C+D*y+M*_,M=D,D=v,Q=B,B=m[U],I[R]=b[S]+D,U--,S--,R-=k}}function p(m,I,b,E){if(E){var j=new Uint16Array(m.length),k=new Float32Array(Math.max(I,b)),Q=o(E);f(m,j,k,Q,I,b),f(j,m,k,Q,b,I)}}n.exports=p},{}],19:[function(r,n,l){var u=r("object-assign"),a=r("./lib/base64decode"),s=r("./lib/wa_detect"),c={js:!0,wasm:!0};function h(A){if(!(this instanceof h))return new h(A);var i=u({},c,A||{});if(this.options=i,this.__cache={},this.__init_promise=null,this.__modules=i.modules||{},this.__memory=null,this.__wasm={},this.__isLE=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1,!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}h.prototype.has_wasm=s,h.prototype.use=function(A){return this.__modules[A.name]=A,this.options.wasm&&this.has_wasm()&&A.wasm_fn?this[A.name]=A.wasm_fn:this[A.name]=A.fn,this},h.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(new Error(`mathlib: only "wasm" was enabled, but it's not supported`));var A=this;return this.__init_promise=Promise.all(Object.keys(A.__modules).map(function(i){var d=A.__modules[i];return!A.options.wasm||!A.has_wasm()||!d.wasm_fn||A.__wasm[i]?null:WebAssembly.compile(A.__base64decode(d.wasm_src)).then(function(o){A.__wasm[i]=o})})).then(function(){return A}),this.__init_promise},h.prototype.__base64decode=a,h.prototype.__reallocate=function(A){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(A/(64*1024))}),this.__memory;var i=this.__memory.buffer.byteLength;return i<A&&this.__memory.grow(Math.ceil((A-i)/(64*1024))),this.__memory},h.prototype.__instance=function(A,i,d){if(i&&this.__reallocate(i),!this.__wasm[A]){var o=this.__modules[A];this.__wasm[A]=new WebAssembly.Module(this.__base64decode(o.wasm_src))}if(!this.__cache[A]){var f={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[A]=new WebAssembly.Instance(this.__wasm[A],{env:u(f,d||{})})}return this.__cache[A]},h.prototype.__align=function(A,i){i=i||8;var d=A%i;return A+(d?i-d:0)},n.exports=h},{"./lib/base64decode":20,"./lib/wa_detect":21,"object-assign":22}],20:[function(r,n,l){var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";n.exports=function(a){for(var s=a.replace(/[\r\n=]/g,""),c=s.length,h=new Uint8Array(c*3>>2),A=0,i=0,d=0;d<c;d++)d%4===0&&d&&(h[i++]=A>>16&255,h[i++]=A>>8&255,h[i++]=A&255),A=A<<6|u.indexOf(s.charAt(d));var o=c%4*6;return o===0?(h[i++]=A>>16&255,h[i++]=A>>8&255,h[i++]=A&255):o===18?(h[i++]=A>>10&255,h[i++]=A>>2&255):o===12&&(h[i++]=A>>4&255),h}},{}],21:[function(r,n,l){var u;n.exports=function(){if(typeof u<"u"||(u=!1,typeof WebAssembly>"u"))return u;try{var a=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),s=new WebAssembly.Module(a),c=new WebAssembly.Instance(s,{});return c.exports.test(4)!==0&&(u=!0),u}catch{}return u}},{}],22:[function(r,n,l){var u=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function c(A){if(A==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(A)}function h(){try{if(!Object.assign)return!1;var A=new String("abc");if(A[5]="de",Object.getOwnPropertyNames(A)[0]==="5")return!1;for(var i={},d=0;d<10;d++)i["_"+String.fromCharCode(d)]=d;var o=Object.getOwnPropertyNames(i).map(function(p){return i[p]});if(o.join("")!=="0123456789")return!1;var f={};return"abcdefghijklmnopqrst".split("").forEach(function(p){f[p]=p}),Object.keys(Object.assign({},f)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}n.exports=h()?Object.assign:function(A,i){for(var d,o=c(A),f,p=1;p<arguments.length;p++){d=Object(arguments[p]);for(var m in d)a.call(d,m)&&(o[m]=d[m]);if(u){f=u(d);for(var I=0;I<f.length;I++)s.call(d,f[I])&&(o[f[I]]=d[f[I]])}}return o}},{}],23:[function(r,n,l){var u=arguments[3],a=arguments[4],s=arguments[5],c=JSON.stringify;n.exports=function(h,A){for(var i,d=Object.keys(s),o=0,f=d.length;o<f;o++){var p=d[o],m=s[p].exports;if(m===h||m&&m.default===h){i=p;break}}if(!i){i=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var I={},o=0,f=d.length;o<f;o++){var p=d[o];I[p]=p}a[i]=["function(require,module,exports){"+h+"(self); }",I]}var b=Math.floor(Math.pow(16,8)*Math.random()).toString(16),E={};E[i]=i,a[b]=["function(require,module,exports){var f = require("+c(i)+");(f.default ? f.default : f)(self);}",E];var j={};k(b);function k(U){j[U]=!0;for(var R in a[U][1]){var S=a[U][1][R];j[S]||k(S)}}var Q="("+u+")({"+Object.keys(j).map(function(U){return c(U)+":["+a[U][0]+","+c(a[U][1])+"]"}).join(",")+"},{},["+c(b)+"])",B=window.URL||window.webkitURL||window.mozURL||window.msURL,v=new Blob([Q],{type:"text/javascript"});if(A&&A.bare)return v;var D=B.createObjectURL(v),M=new Worker(D);return M.objectURL=D,M}},{}],"/index.js":[function(r,n,l){function u(g,C){return A(g)||h(g,C)||s(g,C)||a()}function a(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s(g,C){if(g){if(typeof g=="string")return c(g,C);var y=Object.prototype.toString.call(g).slice(8,-1);if(y==="Object"&&g.constructor&&(y=g.constructor.name),y==="Map"||y==="Set")return Array.from(g);if(y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return c(g,C)}}function c(g,C){(C==null||C>g.length)&&(C=g.length);for(var y=0,_=new Array(C);y<C;y++)_[y]=g[y];return _}function h(g,C){var y=g==null?null:typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(y!=null){var _=[],x=!0,F=!1,P,H;try{for(y=y.call(g);!(x=(P=y.next()).done)&&(_.push(P.value),!(C&&_.length===C));x=!0);}catch(L){F=!0,H=L}finally{try{!x&&y.return!=null&&y.return()}finally{if(F)throw H}}return _}}function A(g){if(Array.isArray(g))return g}var i=r("object-assign"),d=r("webworkify"),o=r("./lib/mathlib"),f=r("./lib/pool"),p=r("./lib/utils"),m=r("./lib/worker"),I=r("./lib/stepper"),b=r("./lib/tiler"),E=r("./lib/mm_resize/resize_filter_info"),j={},k=!1;try{typeof navigator<"u"&&navigator.userAgent&&(k=navigator.userAgent.indexOf("Safari")>=0)}catch{}var Q=1;typeof navigator<"u"&&(Q=Math.min(navigator.hardwareConcurrency||1,4));var B={tile:1024,concurrency:Q,features:["js","wasm","ww"],idle:2e3,createCanvas:function(g,C){var y=document.createElement("canvas");return y.width=g,y.height=C,y}},v={filter:"mks2013",unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},D=!1,M=!1,U=!1,R=!1,S=!1;function T(){return{value:d(m),destroy:function(){if(this.value.terminate(),typeof window<"u"){var g=window.URL||window.webkitURL||window.mozURL||window.msURL;g&&g.revokeObjectURL&&this.value.objectURL&&g.revokeObjectURL(this.value.objectURL)}}}}function G(g){if(!(this instanceof G))return new G(g);this.options=i({},B,g||{});var C="lk_".concat(this.options.concurrency);this.__limit=j[C]||p.limiter(this.options.concurrency),j[C]||(j[C]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}G.prototype.init=function(){var g=this;if(this.__initPromise)return this.__initPromise;if(typeof ImageData<"u"&&typeof Uint8ClampedArray<"u")try{new ImageData(new Uint8ClampedArray(400),10,10),D=!0}catch{}typeof ImageBitmap<"u"&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?M=!0:this.debug("ImageBitmap does not support .close(), disabled"));var C=this.options.features.slice();if(C.indexOf("all")>=0&&(C=["cib","wasm","js","ww"]),this.__requested_features=C,this.__mathlib=new o(C),C.indexOf("ww")>=0&&typeof window<"u"&&"Worker"in window)try{var y=r("webworkify")(function(){});y.terminate(),this.features.ww=!0;var _="wp_".concat(JSON.stringify(this.options));j[_]?this.__workersPool=j[_]:(this.__workersPool=new f(T,this.options.idle),j[_]=this.__workersPool)}catch{}var x=this.__mathlib.init().then(function(L){i(g.features,L.features)}),F;M?F=p.cib_support(this.options.createCanvas).then(function(L){if(g.features.cib&&C.indexOf("cib")<0){g.debug("createImageBitmap() resize supported, but disabled by config");return}C.indexOf("cib")>=0&&(g.features.cib=L)}):F=Promise.resolve(!1),U=p.can_use_canvas(this.options.createCanvas);var P;M&&D&&C.indexOf("ww")!==-1?P=p.worker_offscreen_canvas_support():P=Promise.resolve(!1),P=P.then(function(L){R=L});var H=p.cib_can_use_region().then(function(L){S=L});return this.__initPromise=Promise.all([x,F,P,H]).then(function(){return g}),this.__initPromise},G.prototype.__invokeResize=function(g,C){var y=this;return C.__mathCache=C.__mathCache||{},Promise.resolve().then(function(){return y.features.ww?new Promise(function(_,x){var F=y.__workersPool.acquire();C.cancelToken&&C.cancelToken.catch(function(H){return x(H)}),F.value.onmessage=function(H){F.release(),H.data.err?x(H.data.err):_(H.data)};var P=[];g.src&&P.push(g.src.buffer),g.srcBitmap&&P.push(g.srcBitmap),F.value.postMessage({opts:g,features:y.__requested_features,preload:{wasm_nodule:y.__mathlib.__}},P)}):{data:y.__mathlib.resizeAndUnsharp(g,C.__mathCache)}})},G.prototype.__extractTileData=function(g,C,y,_,x){if(this.features.ww&&R&&(p.isCanvas(C)||S))return this.debug("Create tile for OffscreenCanvas"),createImageBitmap(_.srcImageBitmap||C,g.x,g.y,g.width,g.height).then(function(H){return x.srcBitmap=H,x});if(p.isCanvas(C))return _.srcCtx||(_.srcCtx=C.getContext("2d")),this.debug("Get tile pixel data"),x.src=_.srcCtx.getImageData(g.x,g.y,g.width,g.height).data,x;this.debug("Draw tile imageBitmap/image to temporary canvas");var F=this.options.createCanvas(g.width,g.height),P=F.getContext("2d");return P.globalCompositeOperation="copy",P.drawImage(_.srcImageBitmap||C,g.x,g.y,g.width,g.height,0,0,g.width,g.height),this.debug("Get tile pixel data"),x.src=P.getImageData(0,0,g.width,g.height).data,F.width=F.height=0,x},G.prototype.__landTileData=function(g,C,y){var _;if(this.debug("Convert raw rgba tile result to ImageData"),C.bitmap)return y.toCtx.drawImage(C.bitmap,g.toX,g.toY),null;if(D)_=new ImageData(new Uint8ClampedArray(C.data),g.toWidth,g.toHeight);else if(_=y.toCtx.createImageData(g.toWidth,g.toHeight),_.data.set)_.data.set(C.data);else for(var x=_.data.length-1;x>=0;x--)_.data[x]=C.data[x];return this.debug("Draw tile"),k?y.toCtx.putImageData(_,g.toX,g.toY,g.toInnerX-g.toX,g.toInnerY-g.toY,g.toInnerWidth+1e-5,g.toInnerHeight+1e-5):y.toCtx.putImageData(_,g.toX,g.toY,g.toInnerX-g.toX,g.toInnerY-g.toY,g.toInnerWidth,g.toInnerHeight),null},G.prototype.__tileAndResize=function(g,C,y){var _=this,x={srcCtx:null,srcImageBitmap:null,isImageBitmapReused:!1,toCtx:null},F=function(P){return _.__limit(function(){if(y.canceled)return y.cancelToken;var H={width:P.width,height:P.height,toWidth:P.toWidth,toHeight:P.toHeight,scaleX:P.scaleX,scaleY:P.scaleY,offsetX:P.offsetX,offsetY:P.offsetY,filter:y.filter,unsharpAmount:y.unsharpAmount,unsharpRadius:y.unsharpRadius,unsharpThreshold:y.unsharpThreshold};return _.debug("Invoke resize math"),Promise.resolve(H).then(function(L){return _.__extractTileData(P,g,y,x,L)}).then(function(L){return _.debug("Invoke resize math"),_.__invokeResize(L,y)}).then(function(L){return y.canceled?y.cancelToken:(x.srcImageData=null,_.__landTileData(P,L,x))})})};return Promise.resolve().then(function(){if(x.toCtx=C.getContext("2d"),p.isCanvas(g))return null;if(p.isImageBitmap(g))return x.srcImageBitmap=g,x.isImageBitmapReused=!0,null;if(p.isImage(g))return M?(_.debug("Decode image via createImageBitmap"),createImageBitmap(g).then(function(P){x.srcImageBitmap=P}).catch(function(P){return null})):null;throw new Error('Pica: ".from" should be Image, Canvas or ImageBitmap')}).then(function(){if(y.canceled)return y.cancelToken;_.debug("Calculate tiles");var P=b({width:y.width,height:y.height,srcTileSize:_.options.tile,toWidth:y.toWidth,toHeight:y.toHeight,destTileBorder:y.__destTileBorder}),H=P.map(function(q){return F(q)});function L(q){q.srcImageBitmap&&(q.isImageBitmapReused||q.srcImageBitmap.close(),q.srcImageBitmap=null)}return _.debug("Process tiles"),Promise.all(H).then(function(){return _.debug("Finished!"),L(x),C},function(q){throw L(x),q})})},G.prototype.__processStages=function(g,C,y,_){var x=this;if(_.canceled)return _.cancelToken;var F=g.shift(),P=u(F,2),H=P[0],L=P[1],q=g.length===0,X;q||E.q2f.indexOf(_.filter)<0?X=_.filter:_.filter==="box"?X="box":X="hamming",_=i({},_,{toWidth:H,toHeight:L,filter:X});var Y;return q||(Y=this.options.createCanvas(H,L)),this.__tileAndResize(C,q?y:Y,_).then(function(){return q?y:(_.width=H,_.height=L,x.__processStages(g,Y,y,_))}).then(function(Me){return Y&&(Y.width=Y.height=0),Me})},G.prototype.__resizeViaCreateImageBitmap=function(g,C,y){var _=this,x=C.getContext("2d");return this.debug("Resize via createImageBitmap()"),createImageBitmap(g,{resizeWidth:y.toWidth,resizeHeight:y.toHeight,resizeQuality:p.cib_quality_name(E.f2q[y.filter])}).then(function(F){if(y.canceled)return y.cancelToken;if(!y.unsharpAmount)return x.drawImage(F,0,0),F.close(),x=null,_.debug("Finished!"),C;_.debug("Unsharp result");var P=_.options.createCanvas(y.toWidth,y.toHeight),H=P.getContext("2d");H.drawImage(F,0,0),F.close();var L=H.getImageData(0,0,y.toWidth,y.toHeight);return _.__mathlib.unsharp_mask(L.data,y.toWidth,y.toHeight,y.unsharpAmount,y.unsharpRadius,y.unsharpThreshold),x.putImageData(L,0,0),P.width=P.height=0,L=H=P=x=null,_.debug("Finished!"),C})},G.prototype.resize=function(g,C,y){var _=this;this.debug("Start resize...");var x=i({},v);if(isNaN(y)?y&&(x=i(x,y)):x=i(x,{quality:y}),x.toWidth=C.width,x.toHeight=C.height,x.width=g.naturalWidth||g.width,x.height=g.naturalHeight||g.height,Object.prototype.hasOwnProperty.call(x,"quality")){if(x.quality<0||x.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(x.quality));x.filter=E.q2f[x.quality]}if(C.width===0||C.height===0)return Promise.reject(new Error("Invalid output size: ".concat(C.width,"x").concat(C.height)));x.unsharpRadius>2&&(x.unsharpRadius=2),x.canceled=!1,x.cancelToken&&(x.cancelToken=x.cancelToken.then(function(P){throw x.canceled=!0,P},function(P){throw x.canceled=!0,P}));var F=3;return x.__destTileBorder=Math.ceil(Math.max(F,2.5*x.unsharpRadius|0)),this.init().then(function(){if(x.canceled)return x.cancelToken;if(_.features.cib){if(E.q2f.indexOf(x.filter)>=0)return _.__resizeViaCreateImageBitmap(g,C,x);_.debug("cib is enabled, but not supports provided filter, fallback to manual math")}if(!U){var P=new Error("Pica: cannot use getImageData on canvas, make sure fingerprinting protection isn't enabled");throw P.code="ERR_GET_IMAGE_DATA",P}var H=I(x.width,x.height,x.toWidth,x.toHeight,_.options.tile,x.__destTileBorder);return _.__processStages(H,g,C,x)})},G.prototype.resizeBuffer=function(g){var C=this,y=i({},v,g);if(Object.prototype.hasOwnProperty.call(y,"quality")){if(y.quality<0||y.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(y.quality));y.filter=E.q2f[y.quality]}return this.init().then(function(){return C.__mathlib.resizeAndUnsharp(y)})},G.prototype.toBlob=function(g,C,y){return C=C||"image/png",new Promise(function(_){if(g.toBlob){g.toBlob(function(L){return _(L)},C,y);return}if(g.convertToBlob){_(g.convertToBlob({type:C,quality:y}));return}for(var x=atob(g.toDataURL(C,y).split(",")[1]),F=x.length,P=new Uint8Array(F),H=0;H<F;H++)P[H]=x.charCodeAt(H);_(new Blob([P],{type:C}))})},G.prototype.debug=function(){},n.exports=G},{"./lib/mathlib":1,"./lib/mm_resize/resize_filter_info":7,"./lib/pool":13,"./lib/stepper":14,"./lib/tiler":15,"./lib/utils":16,"./lib/worker":17,"object-assign":22,webworkify:23}]},{},[])("/index.js")})})(it);var sr=it.exports;const lr=Yt(sr);function at(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Ae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?at(Object(r),!0).forEach(function(n){hr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):at(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ot(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,st(n.key),n)}}function Ar(e,t,r){return t&&ot(e.prototype,t),r&&ot(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function hr(e,t,r){return t=st(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function he(){return he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},he.apply(this,arguments)}function ur(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function st(e){var t=ur(e,"string");return typeof t=="symbol"?t:String(t)}var lt={exports:{}};(function(e){typeof window>"u"||function(t){var r=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,n=t.Blob&&function(){try{return!!new Blob}catch{return!1}}(),l=n&&t.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),u=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,a=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,s=(n||u)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(c){var h,A,i,d,o,f,p,m,I;if(h=c.match(a),!h)throw new Error("invalid data URI");for(A=h[2]?h[1]:"text/plain"+(h[3]||";charset=US-ASCII"),i=!!h[4],d=c.slice(h[0].length),i?o=atob(d):o=decodeURIComponent(d),f=new ArrayBuffer(o.length),p=new Uint8Array(f),m=0;m<o.length;m+=1)p[m]=o.charCodeAt(m);return n?new Blob([l?p:f],{type:A}):(I=new u,I.append(f),I.getBlob(A))};t.HTMLCanvasElement&&!r.toBlob&&(r.mozGetAsFile?r.toBlob=function(c,h,A){var i=this;setTimeout(function(){A&&r.toDataURL&&s?c(s(i.toDataURL(h,A))):c(i.mozGetAsFile("blob",h))})}:r.toDataURL&&s&&(r.msToBlob?r.toBlob=function(c,h,A){var i=this;setTimeout(function(){(h&&h!=="image/png"||A)&&r.toDataURL&&s?c(s(i.toDataURL(h,A))):c(i.msToBlob(h))})}:r.toBlob=function(c,h,A){var i=this;setTimeout(function(){c(s(i.toDataURL(h,A)))})})),e.exports?e.exports=s:t.dataURLtoBlob=s}(window)})(lt);var ct=lt.exports,dr=function(e){return typeof Blob>"u"?!1:e instanceof Blob||Object.prototype.toString.call(e)==="[object Blob]"},At={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},fr=typeof window<"u"&&typeof window.document<"u",J=fr?window:{},ue=function(e){return e>0&&e<1/0},gr=Array.prototype.slice;function Te(e){return Array.from?Array.from(e):gr.call(e)}var pr=/^image\/.+$/;function Ge(e){return pr.test(e)}function mr(e){var t=Ge(e)?e.substr(6):"";return t==="jpeg"&&(t="jpg"),".".concat(t)}var ht=String.fromCharCode;function Ir(e,t,r){var n="",l;for(r+=t,l=t;l<r;l+=1)n+=ht(e.getUint8(l));return n}var wr=J.btoa;function ut(e,t){for(var r=[],n=8192,l=new Uint8Array(e);l.length>0;)r.push(ht.apply(null,Te(l.subarray(0,n)))),l=l.subarray(n);return"data:".concat(t,";base64,").concat(wr(r.join("")))}function yr(e){var t=new DataView(e),r;try{var n,l,u;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var a=t.byteLength,s=2;s+1<a;){if(t.getUint8(s)===255&&t.getUint8(s+1)===225){l=s;break}s+=1}if(l){var c=l+4,h=l+10;if(Ir(t,c,4)==="Exif"){var A=t.getUint16(h);if(n=A===18761,(n||A===19789)&&t.getUint16(h+2,n)===42){var i=t.getUint32(h+4,n);i>=8&&(u=h+i)}}}if(u){var d=t.getUint16(u,n),o,f;for(f=0;f<d;f+=1)if(o=u+f*12+2,t.getUint16(o,n)===274){o+=8,r=t.getUint16(o,n),t.setUint16(o,1,n);break}}}catch{r=1}return r}function vr(e){var t=0,r=1,n=1;switch(e){case 2:r=-1;break;case 3:t=-180;break;case 4:n=-1;break;case 5:t=90,n=-1;break;case 6:t=90;break;case 7:t=90,r=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:r,scaleY:n}}var br=/\.\d*(?:0|9){12}\d*$/;function dt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return br.test(e)?Math.round(e*t)/t:e}function ee(e){var t=e.aspectRatio,r=e.height,n=e.width,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",u=ue(n),a=ue(r);if(u&&a){var s=r*t;(l==="contain"||l==="none")&&s>n||l==="cover"&&s<n?r=n/t:n=r*t}else u?r=n/t:a&&(n=r*t);return{width:n,height:r}}function Br(e){for(var t=Te(new Uint8Array(e)),r=t.length,n=[],l=0;l+3<r;){var u=t[l],a=t[l+1];if(u===255&&a===218)break;if(u===255&&a===216)l+=2;else{var s=t[l+2]*256+t[l+3],c=l+s+2,h=t.slice(l,c);n.push(h),l=c}}return n.reduce(function(A,i){return i[0]===255&&i[1]===225?A.concat(i):A},[])}function Er(e,t){var r=Te(new Uint8Array(e));if(r[2]!==255||r[3]!==224)return e;var n=r[4]*256+r[5],l=[255,216].concat(t,r.slice(4+n));return new Uint8Array(l)}var Cr=J.ArrayBuffer,Oe=J.FileReader,K=J.URL||J.webkitURL,xr=/\.\w+$/,Qr=J.Compressor,_r=function(){function e(t,r){cr(this,e),this.file=t,this.exif=[],this.image=new Image,this.options=Ae(Ae({},At),r),this.aborted=!1,this.result=null,this.init()}return Ar(e,[{key:"init",value:function(){var t=this,r=this.file,n=this.options;if(!dr(r)){this.fail(new Error("The first argument must be a File or Blob object."));return}var l=r.type;if(!Ge(l)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!K||!Oe){this.fail(new Error("The current browser does not support image compression."));return}Cr||(n.checkOrientation=!1,n.retainExif=!1);var u=l==="image/jpeg",a=u&&n.checkOrientation,s=u&&n.retainExif;if(K&&!a&&!s)this.load({url:K.createObjectURL(r)});else{var c=new Oe;this.reader=c,c.onload=function(h){var A=h.target,i=A.result,d={},o=1;a&&(o=yr(i),o>1&&he(d,vr(o))),s&&(t.exif=Br(i)),a||s?!K||o>1?d.url=ut(i,l):d.url=K.createObjectURL(r):d.url=i,t.load(d)},c.onabort=function(){t.fail(new Error("Aborted to read the image with FileReader."))},c.onerror=function(){t.fail(new Error("Failed to read the image with FileReader."))},c.onloadend=function(){t.reader=null},a||s?c.readAsArrayBuffer(r):c.readAsDataURL(r)}}},{key:"load",value:function(t){var r=this,n=this.file,l=this.image;l.onload=function(){r.draw(Ae(Ae({},t),{},{naturalWidth:l.naturalWidth,naturalHeight:l.naturalHeight}))},l.onabort=function(){r.fail(new Error("Aborted to load the image."))},l.onerror=function(){r.fail(new Error("Failed to load the image."))},J.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(J.navigator.userAgent)&&(l.crossOrigin="anonymous"),l.alt=n.name,l.src=t.url}},{key:"draw",value:function(t){var r=this,n=t.naturalWidth,l=t.naturalHeight,u=t.rotate,a=u===void 0?0:u,s=t.scaleX,c=s===void 0?1:s,h=t.scaleY,A=h===void 0?1:h,i=this.file,d=this.image,o=this.options,f=document.createElement("canvas"),p=f.getContext("2d"),m=Math.abs(a)%180===90,I=(o.resize==="contain"||o.resize==="cover")&&ue(o.width)&&ue(o.height),b=Math.max(o.maxWidth,0)||1/0,E=Math.max(o.maxHeight,0)||1/0,j=Math.max(o.minWidth,0)||0,k=Math.max(o.minHeight,0)||0,Q=n/l,B=o.width,v=o.height;if(m){var D=[E,b];b=D[0],E=D[1];var M=[k,j];j=M[0],k=M[1];var U=[v,B];B=U[0],v=U[1]}I&&(Q=B/v);var R=ee({aspectRatio:Q,width:b,height:E},"contain");b=R.width,E=R.height;var S=ee({aspectRatio:Q,width:j,height:k},"cover");if(j=S.width,k=S.height,I){var T=ee({aspectRatio:Q,width:B,height:v},o.resize);B=T.width,v=T.height}else{var G=ee({aspectRatio:Q,width:B,height:v}),g=G.width;B=g===void 0?n:g;var C=G.height;v=C===void 0?l:C}B=Math.floor(dt(Math.min(Math.max(B,j),b))),v=Math.floor(dt(Math.min(Math.max(v,k),E)));var y=-B/2,_=-v/2,x=B,F=v,P=[];if(I){var H=0,L=0,q=n,X=l,Y=ee({aspectRatio:Q,width:n,height:l},{contain:"cover",cover:"contain"}[o.resize]);q=Y.width,X=Y.height,H=(n-q)/2,L=(l-X)/2,P.push(H,L,q,X)}if(P.push(y,_,x,F),m){var Me=[v,B];B=Me[0],v=Me[1]}f.width=B,f.height=v,Ge(o.mimeType)||(o.mimeType=i.type);var Ht="transparent";i.size>o.convertSize&&o.convertTypes.indexOf(o.mimeType)>=0&&(o.mimeType="image/jpeg");var Lt=o.mimeType==="image/jpeg";if(Lt&&(Ht="#fff"),p.fillStyle=Ht,p.fillRect(0,0,B,v),o.beforeDraw&&o.beforeDraw.call(this,p,f),!this.aborted&&(p.save(),p.translate(B/2,v/2),p.rotate(a*Math.PI/180),p.scale(c,A),p.drawImage.apply(p,[d].concat(P)),p.restore(),o.drew&&o.drew.call(this,p,f),!this.aborted)){var Nt=function(oe){if(!r.aborted){var Wt=function(se){return r.done({naturalWidth:n,naturalHeight:l,result:se})};if(oe&&Lt&&o.retainExif&&r.exif&&r.exif.length>0){var qt=function(se){return Wt(ct(ut(Er(se,r.exif),o.mimeType)))};if(oe.arrayBuffer)oe.arrayBuffer().then(qt).catch(function(){r.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var V=new Oe;r.reader=V,V.onload=function(se){var Wn=se.target;qt(Wn.result)},V.onabort=function(){r.fail(new Error("Aborted to read the compressed image with FileReader."))},V.onerror=function(){r.fail(new Error("Failed to read the compressed image with FileReader."))},V.onloadend=function(){r.reader=null},V.readAsArrayBuffer(oe)}}else Wt(oe)}};f.toBlob?f.toBlob(Nt,o.mimeType,o.quality):Nt(ct(f.toDataURL(o.mimeType,o.quality)))}}},{key:"done",value:function(t){var r=t.naturalWidth,n=t.naturalHeight,l=t.result,u=this.file,a=this.image,s=this.options;if(K&&a.src.indexOf("blob:")===0&&K.revokeObjectURL(a.src),l)if(s.strict&&!s.retainExif&&l.size>u.size&&s.mimeType===u.type&&!(s.width>r||s.height>n||s.minWidth>r||s.minHeight>n||s.maxWidth<r||s.maxHeight<n))l=u;else{var c=new Date;l.lastModified=c.getTime(),l.lastModifiedDate=c,l.name=u.name,l.name&&l.type!==u.type&&(l.name=l.name.replace(xr,mr(l.type)))}else l=u;this.result=l,s.success&&s.success.call(this,l)}},{key:"fail",value:function(t){var r=this.options;if(r.error)r.error.call(this,t);else throw t}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=Qr,e}},{key:"setDefaults",value:function(t){he(At,t)}}]),e}();function jr(){return window.navigator.brave!=null?window.navigator.brave.isBrave.name=="isBrave":!1}let ft;tt=W.forwardRef((e,t)=>{const{imageSrc:r,imageType:n,onImageCropped:l,width:u,height:a}=e,[s,c]=W.useState({x:0,y:0}),[h,A]=W.useState(1),[i,d]=W.useState(null);W.useState(null);const o=W.useCallback((k,Q)=>{d(Q)},[]);W.useImperativeHandle(t,()=>({async showCroppedImage(){try{if(r){const k=await b(r,i),Q=await m(k),B=jr()?await p(k):await f(Q),v=await m(B);l(v)}else return"Nothing"}catch(k){console.error(k)}}}));async function f(k){const Q=lr();let B=await E(k);const v=document.createElement("canvas");return v.height=128,v.width=128,new Promise(D=>{D(Q.resize(B,v,{unsharpAmount:100,unsharpRadius:.7,unsharpThreshold:2}).then(M=>Q.toBlob(M,n,1)))})}async function p(k){return new Promise((Q,B)=>{new _r(k,{quality:1,strict:!0,maxWidth:128,maxHeight:128,checkOrientation:!1,success:Q,error:B})})}const m=async k=>await I(k),I=k=>new Promise((Q,B)=>{const v=new FileReader;v.readAsDataURL(k),v.onload=()=>Q(v.result),v.onerror=D=>B(D)});async function b(k,Q){const B=await E(k),v=document.createElement("canvas");v.width=Q.width,v.height=Q.height;const D=v.getContext("2d"),M="none.jpg";return D.drawImage(B,Q.x,Q.y,Q.width,Q.height,0,0,Q.width,Q.height),new Promise((U,R)=>{v.toBlob(S=>{U(new File([S],M,{type:n,lastModified:Date.now()}))},n,1)})}const E=k=>new Promise((Q,B)=>{const v=new Image;v.addEventListener("load",()=>Q(v)),v.addEventListener("error",D=>B(D)),v.setAttribute("crossOrigin","anonymous"),v.src=k}),j=k=>{A(k)};return w.jsx(W.Fragment,{children:w.jsx(ft,{children:w.jsx(qn,{image:r,crop:s,zoom:h,aspect:1,onCropChange:c,onCropComplete:o,onZoomChange:j,style:{containerStyle:{width:u||"250px",height:a||"250px",position:"relative",borderRadius:"20px"}}})})})}),ft=zn.div`
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  `;var Fe={exports:{}},He={exports:{}},kr=Jn(),gt=Yn().EventEmitter;He.exports=z,He.exports.default=z;function z(e){if(!(this instanceof z))return new z(e);gt.call(this),e=e||{},this.concurrency=e.concurrency||1/0,this.timeout=e.timeout||0,this.autostart=e.autostart||!1,this.results=e.results||null,this.pending=0,this.session=0,this.running=!1,this.jobs=[],this.timers={}}kr(z,gt);var Ur=["pop","shift","indexOf","lastIndexOf"];Ur.forEach(function(e){z.prototype[e]=function(){return Array.prototype[e].apply(this.jobs,arguments)}}),z.prototype.slice=function(e,t){return this.jobs=this.jobs.slice(e,t),this},z.prototype.reverse=function(){return this.jobs.reverse(),this};var Dr=["push","unshift","splice"];Dr.forEach(function(e){z.prototype[e]=function(){var t=Array.prototype[e].apply(this.jobs,arguments);return this.autostart&&this.start(),t}}),Object.defineProperty(z.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),z.prototype.start=function(e){if(e&&Mr.call(this,e),this.running=!0,this.pending>=this.concurrency)return;if(this.jobs.length===0){this.pending===0&&Le.call(this);return}var t=this,r=this.jobs.shift(),n=!0,l=this.session,u=null,a=!1,s=null,c=r.timeout||this.timeout;function h(i,d){n&&t.session===l&&(n=!1,t.pending--,u!==null&&(delete t.timers[u],clearTimeout(u)),i?t.emit("error",i,r):a===!1&&(s!==null&&(t.results[s]=Array.prototype.slice.call(arguments,1)),t.emit("success",d,r)),t.session===l&&(t.pending===0&&t.jobs.length===0?Le.call(t):t.running&&t.start()))}c&&(u=setTimeout(function(){a=!0,t.listeners("timeout").length>0?t.emit("timeout",h,r):h()},c),this.timers[u]=u),this.results&&(s=this.results.length,this.results[s]=null),this.pending++,t.emit("start",r);var A=r(h);A&&A.then&&typeof A.then=="function"&&A.then(function(i){return h(null,i)}).catch(function(i){return h(i||!0)}),this.running&&this.jobs.length>0&&this.start()},z.prototype.stop=function(){this.running=!1},z.prototype.end=function(e){Sr.call(this),this.jobs.length=0,this.pending=0,Le.call(this,e)};function Sr(){for(var e in this.timers){var t=this.timers[e];delete this.timers[e],clearTimeout(t)}}function Mr(e){var t=this;this.on("error",r),this.on("end",n);function r(l){t.end(l)}function n(l){t.removeListener("error",r),t.removeListener("end",n),e(l,this.results)}}function Le(e){this.session++,this.running=!1,this.emit("end",e)}var Pr=He.exports,te={},de={};Object.defineProperty(de,"__esModule",{value:!0}),de.BMP=void 0,de.BMP={validate(e){return e.toString("ascii",0,2)==="BM"},calculate(e){return{height:Math.abs(e.readInt32LE(22)),width:e.readUInt32LE(18)}}};var fe={},re={};Object.defineProperty(re,"__esModule",{value:!0}),re.ICO=void 0;const Rr=1,Tr=6,Gr=16;function pt(e,t){const r=e.readUInt8(t);return r===0?256:r}function mt(e,t){const r=Tr+t*Gr;return{height:pt(e,r+1),width:pt(e,r)}}re.ICO={validate(e){return e.readUInt16LE(0)!==0?!1:e.readUInt16LE(2)===Rr},calculate(e){const t=e.readUInt16LE(4),r=mt(e,0);if(t===1)return r;const n=[r];for(let l=1;l<t;l+=1)n.push(mt(e,l));return{height:r.height,images:n,width:r.width}}},Object.defineProperty(fe,"__esModule",{value:!0}),fe.CUR=void 0;const Or=re,Fr=2;fe.CUR={validate(e){return e.readUInt16LE(0)!==0?!1:e.readUInt16LE(2)===Fr},calculate(e){return Or.ICO.calculate(e)}};var ge={};Object.defineProperty(ge,"__esModule",{value:!0}),ge.DDS=void 0,ge.DDS={validate(e){return e.readUInt32LE(0)===542327876},calculate(e){return{height:e.readUInt32LE(12),width:e.readUInt32LE(16)}}};var pe={};Object.defineProperty(pe,"__esModule",{value:!0}),pe.GIF=void 0;const Hr=/^GIF8[79]a/;pe.GIF={validate(e){const t=e.toString("ascii",0,6);return Hr.test(t)},calculate(e){return{height:e.readUInt16LE(8),width:e.readUInt16LE(6)}}};var me={};Object.defineProperty(me,"__esModule",{value:!0}),me.ICNS=void 0;const Lr=8,Nr=4,Wr=4,qr={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};function It(e,t){const r=t+Wr;return[e.toString("ascii",t,r),e.readUInt32BE(r)]}function wt(e){const t=qr[e];return{width:t,height:t,type:e}}me.ICNS={validate(e){return e.toString("ascii",0,4)==="icns"},calculate(e){const t=e.length,r=e.readUInt32BE(Nr);let n=Lr,l=It(e,n),u=wt(l[0]);if(n+=l[1],n===r)return u;const a={height:u.height,images:[u],width:u.width};for(;n<r&&n<t;)l=It(e,n),u=wt(l[0]),n+=l[1],a.images.push(u);return a}};var Ie={};Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.J2C=void 0,Ie.J2C={validate(e){return e.toString("hex",0,4)==="ff4fff51"},calculate(e){return{height:e.readUInt32BE(12),width:e.readUInt32BE(8)}}};var we={};Object.defineProperty(we,"__esModule",{value:!0}),we.JP2=void 0;const ye={ftyp:"66747970",ihdr:"69686472",jp2h:"6a703268",jp__:"6a502020",rreq:"72726571",xml_:"786d6c20"},zr=e=>{const t=e.readUInt8(0);let r=1+2*t;const n=e.readUInt16BE(r)*(2+t);r=r+2+n;const l=e.readUInt16BE(r)*(16+t);return r+2+l},yt=e=>({height:e.readUInt32BE(4),width:e.readUInt32BE(8)});we.JP2={validate(e){const t=e.toString("hex",4,8),r=e.readUInt32BE(0);if(t!==ye.jp__||r<1)return!1;const n=r+4,l=e.readUInt32BE(r);return e.slice(n,n+l).toString("hex",0,4)===ye.ftyp},calculate(e){const t=e.readUInt32BE(0),r=e.readUInt16BE(t+2);let n=t+4+r;switch(e.toString("hex",n,n+4)){case ye.rreq:return n=n+4+4+zr(e.slice(n+4)),yt(e.slice(n+8,n+24));case ye.jp2h:return yt(e.slice(n+8,n+24));default:throw new TypeError("Unsupported header found: "+e.toString("ascii",n,n+4))}}};var ve={},ne={};Object.defineProperty(ne,"__esModule",{value:!0}),ne.readUInt=void 0;function Yr(e,t,r,n){r=r||0;const l=n?"BE":"LE",u="readUInt"+t+l;return e[u].call(e,r)}ne.readUInt=Yr,Object.defineProperty(ve,"__esModule",{value:!0}),ve.JPG=void 0;const ie=ne,Jr="45786966",Xr=2,Ne=6,Kr=2,Zr="4d4d",Vr="4949",vt=12,$r=2;function en(e){return e.toString("hex",2,6)===Jr}function tn(e,t){return{height:e.readUInt16BE(t),width:e.readUInt16BE(t+2)}}function rn(e,t){const r=Ne+8,n=ie.readUInt(e,16,r,t);for(let l=0;l<n;l++){const u=r+$r+l*vt,a=u+vt;if(u>e.length)return;const s=e.slice(u,a);if(ie.readUInt(s,16,0,t)===274)return ie.readUInt(s,16,2,t)!==3||ie.readUInt(s,32,4,t)!==1?void 0:ie.readUInt(s,16,8,t)}}function nn(e,t){const r=e.slice(Xr,t),n=r.toString("hex",Ne,Ne+Kr),l=n===Zr;if(l||n===Vr)return rn(r,l)}function an(e,t){if(t>e.length)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(e[t]!==255)throw new TypeError("Invalid JPG, marker table corrupted")}ve.JPG={validate(e){return e.toString("hex",0,2)==="ffd8"},calculate(e){e=e.slice(4);let t,r;for(;e.length;){const n=e.readUInt16BE(0);if(en(e)&&(t=nn(e,n)),an(e,n),r=e[n+1],r===192||r===193||r===194){const l=tn(e,n+5);return t?{height:l.height,orientation:t,width:l.width}:l}e=e.slice(n+2)}throw new TypeError("Invalid JPG, no size found")}};var be={};Object.defineProperty(be,"__esModule",{value:!0}),be.KTX=void 0;const on="KTX 11";be.KTX={validate(e){return on===e.toString("ascii",1,7)},calculate(e){return{height:e.readUInt32LE(40),width:e.readUInt32LE(36)}}};var Be={};Object.defineProperty(Be,"__esModule",{value:!0}),Be.PNG=void 0;const sn=`PNG\r

`,ln="IHDR",bt="CgBI";Be.PNG={validate(e){if(sn===e.toString("ascii",1,8)){let t=e.toString("ascii",12,16);if(t===bt&&(t=e.toString("ascii",28,32)),t!==ln)throw new TypeError("Invalid PNG");return!0}return!1},calculate(e){return e.toString("ascii",12,16)===bt?{height:e.readUInt32BE(36),width:e.readUInt32BE(32)}:{height:e.readUInt32BE(20),width:e.readUInt32BE(16)}}};var Ee={};Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.PNM=void 0;const Bt={P1:"pbm/ascii",P2:"pgm/ascii",P3:"ppm/ascii",P4:"pbm",P5:"pgm",P6:"ppm",P7:"pam",PF:"pfm"},cn=Object.keys(Bt),Et={default:e=>{let t=[];for(;e.length>0;){const r=e.shift();if(r[0]!=="#"){t=r.split(" ");break}}if(t.length===2)return{height:parseInt(t[1],10),width:parseInt(t[0],10)};throw new TypeError("Invalid PNM")},pam:e=>{const t={};for(;e.length>0;){const r=e.shift();if(r.length>16||r.charCodeAt(0)>128)continue;const[n,l]=r.split(" ");if(n&&l&&(t[n.toLowerCase()]=parseInt(l,10)),t.height&&t.width)break}if(t.height&&t.width)return{height:t.height,width:t.width};throw new TypeError("Invalid PAM")}};Ee.PNM={validate(e){const t=e.toString("ascii",0,2);return cn.includes(t)},calculate(e){const t=e.toString("ascii",0,2),r=Bt[t],n=e.toString("ascii",3).split(/[\r\n]+/);return(Et[r]||Et.default)(n)}};var Ce={};Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.PSD=void 0,Ce.PSD={validate(e){return e.toString("ascii",0,4)==="8BPS"},calculate(e){return{height:e.readUInt32BE(14),width:e.readUInt32BE(18)}}};var xe={};Object.defineProperty(xe,"__esModule",{value:!0}),xe.SVG=void 0;const Ct=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,Qe={height:/\sheight=(['"])([^%]+?)\1/,root:Ct,viewbox:/\sviewBox=(['"])(.+?)\1/,width:/\swidth=(['"])([^%]+?)\1/},We=2.54,An={cm:96/We,em:16,ex:8,m:96/We*100,mm:96/We/10,pc:96/72/12,pt:96/72};function _e(e){const t=/([0-9.]+)([a-z]*)/.exec(e);if(t)return Math.round(parseFloat(t[1])*(An[t[2]]||1))}function hn(e){const t=e.split(" ");return{height:_e(t[3]),width:_e(t[2])}}function un(e){const t=e.match(Qe.width),r=e.match(Qe.height),n=e.match(Qe.viewbox);return{height:r&&_e(r[2]),viewbox:n&&hn(n[2]),width:t&&_e(t[2])}}function dn(e){return{height:e.height,width:e.width}}function fn(e,t){const r=t.width/t.height;return e.width?{height:Math.floor(e.width/r),width:e.width}:e.height?{height:e.height,width:Math.floor(e.height*r)}:{height:t.height,width:t.width}}xe.SVG={validate(e){const t=String(e);return Ct.test(t)},calculate(e){const t=e.toString("utf8").match(Qe.root);if(t){const r=un(t[0]);if(r.width&&r.height)return dn(r);if(r.viewbox)return fn(r,r.viewbox)}throw new TypeError("Invalid SVG")}};var je={};Object.defineProperty(je,"__esModule",{value:!0}),je.TIFF=void 0;const ke=Jt,Z=ne;function gn(e,t,r){const n=Z.readUInt(e,32,4,r);let l=1024;const u=ke.statSync(t).size;n+l>u&&(l=u-n-10);const a=ce.alloc(l),s=ke.openSync(t,"r");return ke.readSync(s,a,0,l,n),ke.closeSync(s),a.slice(2)}function pn(e,t){const r=Z.readUInt(e,16,8,t);return(Z.readUInt(e,16,10,t)<<16)+r}function mn(e){if(e.length>24)return e.slice(12)}function In(e,t){const r={};let n=e;for(;n&&n.length;){const l=Z.readUInt(n,16,0,t),u=Z.readUInt(n,16,2,t),a=Z.readUInt(n,32,4,t);if(l===0)break;a===1&&(u===3||u===4)&&(r[l]=pn(n,t)),n=mn(n)}return r}function wn(e){const t=e.toString("ascii",0,2);if(t==="II")return"LE";if(t==="MM")return"BE"}const yn=["49492a00","4d4d002a"];je.TIFF={validate(e){return yn.includes(e.toString("hex",0,4))},calculate(e,t){if(!t)throw new TypeError("Tiff doesn't support buffer");const r=wn(e)==="BE",n=gn(e,t,r),l=In(n,r),u=l[256],a=l[257];if(!u||!a)throw new TypeError("Invalid Tiff. Missing tags");return{height:a,width:u}}};var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.WEBP=void 0;function vn(e){return{height:1+e.readUIntLE(7,3),width:1+e.readUIntLE(4,3)}}function bn(e){return{height:1+((e[4]&15)<<10|e[3]<<2|(e[2]&192)>>6),width:1+((e[2]&63)<<8|e[1])}}function Bn(e){return{height:e.readInt16LE(8)&16383,width:e.readInt16LE(6)&16383}}Ue.WEBP={validate(e){const t=e.toString("ascii",0,4)==="RIFF",r=e.toString("ascii",8,12)==="WEBP",n=e.toString("ascii",12,15)==="VP8";return t&&r&&n},calculate(e){const t=e.toString("ascii",12,16);if(e=e.slice(20,30),t==="VP8X"){const n=e[0],l=(n&192)===0,u=(n&1)===0;if(l&&u)return vn(e);throw new TypeError("Invalid WebP")}if(t==="VP8 "&&e[0]!==47)return Bn(e);const r=e.toString("hex",3,6);if(t==="VP8L"&&r!=="9d012a")return bn(e);throw new TypeError("Invalid WebP")}},Object.defineProperty(te,"__esModule",{value:!0}),te.typeHandlers=void 0;const En=de,Cn=fe,xn=ge,Qn=pe,_n=me,jn=re,kn=Ie,Un=we,Dn=ve,Sn=be,Mn=Be,Pn=Ee,Rn=Ce,Tn=xe,Gn=je,On=Ue;te.typeHandlers={bmp:En.BMP,cur:Cn.CUR,dds:xn.DDS,gif:Qn.GIF,icns:_n.ICNS,ico:jn.ICO,j2c:kn.J2C,jp2:Un.JP2,jpg:Dn.JPG,ktx:Sn.KTX,png:Mn.PNG,pnm:Pn.PNM,psd:Rn.PSD,svg:Tn.SVG,tiff:Gn.TIFF,webp:On.WEBP};var De={};Object.defineProperty(De,"__esModule",{value:!0}),De.detector=void 0;const qe=te,Fn=Object.keys(qe.typeHandlers),xt={56:"psd",66:"bmp",68:"dds",71:"gif",73:"tiff",77:"tiff",82:"webp",105:"icns",137:"png",255:"jpg"};function Hn(e){const t=e[0];if(t in xt){const n=xt[t];if(qe.typeHandlers[n].validate(e))return n}const r=n=>qe.typeHandlers[n].validate(e);return Fn.find(r)}De.detector=Hn,function(e,t){var r=Xt&&Xt.__awaiter||function(f,p,m,I){function b(E){return E instanceof m?E:new m(function(j){j(E)})}return new(m||(m=Promise))(function(E,j){function k(v){try{B(I.next(v))}catch(D){j(D)}}function Q(v){try{B(I.throw(v))}catch(D){j(D)}}function B(v){v.done?E(v.value):b(v.value).then(k,Q)}B((I=I.apply(f,p||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.types=t.setConcurrency=t.imageSize=void 0;const n=Jt,l=Kn,u=Pr,a=te,s=De,c=512*1024,h=new u.default({concurrency:100,autostart:!0});function A(f,p){const m=s.detector(f);if(m&&m in a.typeHandlers){const I=a.typeHandlers[m].calculate(f,p);if(I!==void 0)return I.type=m,I}throw new TypeError("unsupported file type: "+m+" (file: "+p+")")}function i(f){return r(this,void 0,void 0,function*(){const p=yield n.promises.open(f,"r"),{size:m}=yield p.stat();if(m<=0)throw yield p.close(),new Error("Empty file");const I=Math.min(m,c),b=ce.alloc(I);return yield p.read(b,0,I,0),yield p.close(),b})}function d(f){const p=n.openSync(f,"r"),{size:m}=n.fstatSync(p);if(m<=0)throw n.closeSync(p),new Error("Empty file");const I=Math.min(m,c),b=ce.alloc(I);return n.readSync(p,b,0,I,0),n.closeSync(p),b}e.exports=t=o,t.default=o;function o(f,p){if(ce.isBuffer(f))return A(f);if(typeof f!="string")throw new TypeError("invalid invocation");const m=l.resolve(f);if(typeof p=="function")h.push(()=>i(m).then(I=>Xn.nextTick(p,null,A(I,m))).catch(p));else{const I=d(m);return A(I,m)}}t.imageSize=o,t.setConcurrency=f=>{h.concurrency=f},t.types=Object.keys(a.typeHandlers)}(Fe,Fe.exports);var Ln=Fe.exports;const Nn=Yt(Ln);nt=function(e,t){var r=new XMLHttpRequest;r.onload=function(){var n=new FileReader;n.onloadend=function(){t(n.result)},n.readAsDataURL(r.response)},r.open("GET",e),r.responseType="blob",r.send()};let Qt,_t,Se,jt,kt,ze,Ut,Dt,St,Mt,Pt,Rt,Tt,Gt,Ot,Ft,Ye,Je,ae,Xe;rt=e=>{var t=Nn,r=e.split(";base64,").pop(),n=ce.from(r,"base64"),l=t(n);return l.width>128||l.height>128?(console.error("Image size check failed... returning"),{success:0,info:"Image size check failed, Image should be 128X128PX"}):(console.debug("Image verification",r.charAt(0)),r.charAt(0)==="/"?{success:1,info:"Image checks passed"}:r.charAt(0)==="i"?{success:1,info:"Image checks passed"}:{success:0,info:"Image extension should be jpg or png"})},Qt=({mintPushToken:e,noOfPushTokensToCheck:t,mintingPush:r})=>{const n=Ve.appEnv==="prod",{isModalOpen:l,showModal:u,ModalComponent:a}=Zn();return w.jsxs(O,{display:"flex",padding:"s4 s6",backgroundColor:"pink-200",borderRadius:"r0 r0 r4 r4",justifyContent:"space-between",alignItems:"center",flexDirection:{ml:"column",initial:"row"},gap:"s3",children:[w.jsx(Re,{isLoading:r,children:w.jsx(N,{variant:"c-regular",color:"gray-1000",children:n?"Your balance is low. Swap to get PUSH Tokens.":"Follow these steps to get Testnet PUSH."})}),n?w.jsx($,{size:"extraSmall",leadingIcon:w.jsx(ir,{}),onClick:u,children:"Swap PUSH Token"}):w.jsxs(O,{display:"flex",gap:"s3",children:[w.jsx(Re,{isLoading:r,children:w.jsx(Vn,{to:"https://chaindrop.org/?chainid=11155111&token=0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",target:"_blank",children:w.jsxs(O,{display:"flex",gap:"s2",alignItems:"baseline",color:"pink-600",cursor:"pointer",children:[w.jsx(O,{border:"1px solid pink-600",width:"16px",height:"15px",borderRadius:"r10",display:"flex",justifyContent:"center",children:w.jsx(N,{variant:"c-regular",children:"1"})}),w.jsx(N,{children:"Sepolia ETH Faucet"})]})})}),w.jsx(Re,{isLoading:r,children:w.jsxs(O,{display:"flex",gap:"s2",alignItems:"baseline",color:"pink-600",cursor:"pointer",onClick:()=>e(1e3),children:[w.jsx(O,{border:"1px solid pink-600",width:"16px",height:"15px",borderRadius:"r10",display:"flex",justifyContent:"center",children:w.jsx(N,{variant:"c-regular",children:"2"})}),w.jsx(N,{children:"Get Testnet Push"})]})})]}),l&&w.jsx(a,{InnerComponent:fi,InnerComponentProps:{defaultPushTokenAmount:t},modalPadding:"0px",modalPosition:$n.ON_ROOT})]})},_t=[{label:"Channel Info"},{label:"Upload Logo"},{label:"Stake Fees"}],Se=50,jt=({channelStakeFees:e,handleCreateNewChannel:t})=>{const r=Se,{provider:n,account:l,isWalletConnected:u,connect:a}=$e(),[s,c]=W.useState(0),[h,A]=W.useState(!1),[i,d]=W.useState(!1),o=async I=>{if(u||a(),u){A(!0);try{const b=await gi({noOfTokens:I,provider:n,account:l});A(!1),c(b)}catch(b){console.log("Error >>",b),A(!1)}}},f=async()=>{d(!0);const I=await pi({address:l,provider:n});d(!1),c(I)};W.useEffect(()=>{f()},[s,l]);const p=async()=>{u&&await mi()},m=W.useMemo(()=>s<r,[s]);return w.jsxs(O,{display:"flex",flexDirection:"column",alignSelf:"stretch",justifyContent:"center",gap:"s10",children:[w.jsxs(O,{display:"flex",flexDirection:"column",gap:"s4",children:[w.jsxs(O,{display:"flex",flexDirection:"column",alignSelf:"stretch",children:[w.jsxs(O,{display:"flex",flexDirection:"row",justifyContent:"space-between",backgroundColor:{light:"gray-100",dark:"gray-1000"},borderRadius:m?"r4 r4 r0 r0":"r4",padding:"s4 s6",alignItems:"center",children:[w.jsx(N,{variant:"h4-semibold",color:{light:"gray-1000",dark:"gray-100"},display:{ml:"none",dp:"block"},children:"Amout For Staking"}),w.jsx(N,{variant:"h5-semibold",color:{light:"gray-1000",dark:"gray-100"},display:{ml:"block",dp:"none"},children:"Amout For Staking"}),w.jsxs(O,{children:[w.jsxs(N,{variant:"h4-semibold",color:{light:"pink-500",dark:"pink-400"},children:[e," PUSH"]}),w.jsx(Re,{isLoading:i,children:w.jsxs(N,{variant:"bes-semibold",color:"gray-500",children:["Balance: ",s==null?void 0:s.toLocaleString()]})})]})]}),m&&w.jsx(Qt,{mintPushToken:o,noOfPushTokensToCheck:50,mintingPush:h})]}),w.jsxs(O,{display:"flex",flexDirection:"row",gap:"s1",justifyContent:"center",children:[w.jsx(N,{variant:"bes-semibold",color:"gray-500",children:"Don't see Push token in your wallet?"}),w.jsx(N,{css:Kt`
              cursor: pointer;
            `,variant:"bes-semibold",color:"pink-500",onClick:p,children:"Import Token"})]})]}),w.jsx(O,{display:"flex",justifyContent:"center",children:w.jsx($,{onClick:()=>{t()},children:"Create Channel"})})]})},kt=Vt().shape({channelName:et().required("Required"),channelDesc:et().required("Required"),channelURL:et().required("Required").test("url","Invalid URL",function(e){return new RegExp("^((?:https|http):\\/\\/)((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)})}),ze=e=>e.type.startsWith("image/"),Ut=async({provider:e,account:t})=>{let r=await new Ke(le.pushToken,Ze.pushToken,e).allowance(t,le.epnscore);r=r==null?void 0:r.toString();const n=ei(r);return console.log("Number value >>>",n,Number(n)),Number(n)},Dt=(e,t)=>{console.log("Cropped Image",e),nt(e,function(r){rt(r).success&&(console.log("Cropped Image....",e),t(e))})},St=({view:e,croppedImage:t,setView:r,setCroppedImage:n,setActiveStepIndex:l,handleNextStep:u})=>{const a=W.useRef(),s=Vt().shape({image:ui().required("Image is required")}),c=$t({initialValues:{image:null,imageSrc:"",imageType:""},validationSchema:s,onSubmit:d=>{}}),h=async d=>{var f;const o=(f=d.currentTarget.files)==null?void 0:f[0];r(!1),n(void 0),o&&ze(o)&&await i(o)},A=async d=>{var f;d.preventDefault(),d.stopPropagation(),r(!1),n(void 0);const o=(f=d.dataTransfer.files)==null?void 0:f[0];o&&ze(o)&&await i(o)},i=async d=>{c.setFieldValue("image",d);const o=new FileReader;o.readAsDataURL(d),o.onloadend=()=>{c.setFieldValue("imageSrc",o.result),c.setFieldValue("imageType",d.type)},r(!0)};return w.jsxs(O,{display:"flex",flexDirection:"column",gap:"s8",alignItems:"center",alignSelf:"stretch",children:[w.jsxs(O,{display:"flex",flexDirection:"column",alignItems:"center",gap:"s8",children:[w.jsx(N,{variant:"bes-regular",color:"gray-500",children:"Upload a PNG, JPG upto 1MB. Crop the image to resize to 128px."}),w.jsx("form",{onSubmit:c.handleSubmit,children:w.jsxs(O,{width:{initial:"500px",ml:"325px"},padding:"s12 s0",display:"flex",flexDirection:"column",alignItems:"center",border:{light:"1px dashed gray-300",dark:"1px dashed gray-700"},borderRadius:"r6",backgroundColor:{light:"gray-100",dark:"gray-1000"},gap:"s6",onDragOver:d=>d.preventDefault(),onDrop:A,children:[e?t?w.jsx(O,{width:"128px",height:"128px",borderRadius:"r5",children:w.jsx("img",{style:{borderRadius:"inherit"},width:"100%",height:"100%",src:t,alt:"Cropped Img"})}):w.jsx(tt,{width:"200px",height:"200px",imageSrc:c.values.imageSrc,imageType:c.values.imageType,onImageCropped:d=>n(d),ref:a}):w.jsx(nr,{size:50}),w.jsxs(O,{display:"flex",gap:"s1",children:[w.jsx(N,{variant:"bs-semibold",color:{light:"gray-1000",dark:"gray-600"},children:" Drag and Drop or"}),w.jsx("label",{htmlFor:"file-upload",children:w.jsx(N,{variant:"bs-semibold",color:{light:"pink-600",dark:"pink-400"},css:Kt`cursor:pointer;`,children:"Browse to Choose"})})]}),w.jsx("input",{id:"file-upload",accept:"image/*",name:"file-upload",hidden:!0,onChange:h,type:"file",readOnly:!0})]})})]}),!t&&e?w.jsx($,{onClick:()=>{a.current.showCroppedImage()},children:"Crop Image"}):w.jsx($,{disabled:!e&&!t,onClick:()=>{u(),l(2)},children:"Next"})]})},Mt=({channelInfoFormik:e})=>w.jsx(O,{display:"flex",flexDirection:"column",alignItems:"center",gap:"s10",alignSelf:"stretch",children:w.jsx(O,{display:"flex",flexDirection:"column",gap:"s4",alignSelf:"stretch",children:w.jsx("form",{onSubmit:e.handleSubmit,children:w.jsxs(O,{display:"flex",flexDirection:"column",gap:"s4",alignSelf:"stretch",children:[w.jsx(Zt,{required:!0,label:"Channel Name",value:e.values.channelName,onChange:t=>{const r=t.target.value.slice(0,32);e.setFieldValue("channelName",r)},error:e.touched.channelName&&!!e.errors.channelName,errorMessage:e.touched.channelName?e.errors.channelName:"",totalCount:32}),w.jsx(ti,{required:!0,label:"Channel Description",placeholder:"Get notified about ...",description:"Enter a Brief description of the notifications the user will receive",error:e.touched.channelDesc&&!!e.errors.channelDesc,errorMessage:e.touched.channelDesc?e.errors.channelDesc:"",totalCount:250,value:e.values.channelDesc,onChange:t=>{const r=t.target.value.slice(0,250);e.setFieldValue("channelDesc",r)}}),w.jsx(Zt,{required:!0,label:"Channel Website URL",value:e.values.channelURL,onChange:e.handleChange("channelURL"),error:e.touched.channelURL&&!!e.errors.channelURL,errorMessage:e.touched.channelURL?e.errors.channelURL:""}),w.jsx(O,{display:"flex",justifyContent:"center",children:w.jsx($,{disabled:!e.isValid,children:"Next"})})]})})})}),Pt=({channelCreationError:e})=>w.jsxs(O,{gap:"s2",display:"flex",flexDirection:"row",backgroundColor:{light:"red-100",dark:"red-800"},borderRadius:"r4",padding:{ml:"s2",lp:"s2",initial:"s2"},width:"100%",children:[w.jsx(wi,{color:{light:"red-600",dark:"red-300"},size:24}),w.jsxs(O,{color:{light:"red-700",dark:"red-300"},children:[w.jsx(N,{variant:"h5-semibold",color:{light:"red-700",dark:"red-300"},children:e.txError}),e.txErrorStatus===2&&w.jsxs(w.Fragment,{children:[w.jsx(N,{variant:"bs-regular",children:"1. Not enough Push tokens in your wallet."}),w.jsx(N,{variant:"bs-regular",children:"2. Gas price increased due to network congestion. Adjust gas limit manually."})]})]})]}),Rt=()=>w.jsxs(O,{display:"flex",flexDirection:"column",alignItems:"center",gap:"s1",alignSelf:"stretch",children:[w.jsx(N,{variant:"h3-semibold",color:{light:"gray-1000",dark:"gray-100"},display:{ml:"none",dp:"block"},children:"Create Your Channel"}),w.jsx(N,{variant:"bs-regular",color:{light:"gray-500",dark:"gray-600"},display:{ml:"none",dp:"block"},children:"Creating your own notification channel to manage, send and notify users."}),w.jsx(N,{variant:"h4-semibold",color:{light:"gray-1000",dark:"gray-100"},display:{ml:"block",dp:"none"},children:"Create Your Channel"}),w.jsx(N,{variant:"bes-regular",color:{light:"gray-500",dark:"gray-600"},display:{ml:"block",dp:"none"},textAlign:"center",children:"Creating your own notification channel to manage, send and notify users."})]}),Tt=({progressState:e})=>w.jsxs(O,{display:"flex",flexDirection:"column",alignSelf:"stretch",gap:"s10",alignItems:"center",children:[w.jsx(O,{padding:"s6",backgroundColor:{light:"gray-100",dark:"gray-1000"},borderRadius:"r4",width:"-webkit-fill-available",children:w.jsx(N,{textAlign:"center",variant:"h5-semibold",color:"pink-600",children:e.progressInfo})}),w.jsx(O,{width:"400px",children:w.jsx(ri,{percent:e.progress,color:"#D548EC",backgroundColor:"#F3AEFF",height:"4px"})}),w.jsxs(O,{display:"flex",flexDirection:"row",alignItems:"center",gap:"s1",children:[w.jsx(ni,{type:ii.PROCESSING,size:16,color:"#D548EC"}),w.jsx(N,{variant:"bs-semibold",color:{light:"gray-800",dark:"gray-300"},children:e.processingInfo})]})]}),Gt=()=>{const{switchChain:e}=$e();return w.jsxs(w.Fragment,{children:[w.jsx(O,{display:"flex",flexDirection:"column",padding:"s6",backgroundColor:{light:"gray-100",dark:"gray-1000"},borderRadius:"r4",width:"-webkit-fill-available",children:w.jsx(N,{textAlign:"center",variant:"h5-semibold",color:"pink-600",children:"Please select Ethereum Sepolia Network in your Wallet to create a channel."})}),w.jsx(O,{display:"flex",justifyContent:"center",children:w.jsx($,{onClick:()=>e(Ve.coreContractChain),children:"Change Network"})})]})},Ot=()=>er({mutationKey:[ai],mutationFn:or}),Ft=()=>er({mutationKey:[oi],mutationFn:ar}),Ye=[0],Je=si(Se.toString(),18),ae={progress:null,progressInfo:"",processingInfo:""},Xe={txErrorStatus:0,txError:""},tr=()=>{const{account:e,provider:t,isWalletConnected:r,chainId:n,connect:l}=$e(),u=Ve.coreContractChain===n,{mutate:a,isPending:s}=Ot(),{mutate:c,isPending:h}=Ft(),[A,i]=W.useState(0),d=$t({initialValues:{channelName:"",channelDesc:"",channelURL:""},validationSchema:kt,onSubmit:U=>{console.log("Values ",U),k(),i(1)}}),[o,f]=W.useState(!1),[p,m]=W.useState(void 0),[I,b]=W.useState(ae),[E,j]=W.useState(Xe),k=()=>{if(A<2){const U=A+1;Ye.push(U),i(U)}};W.useEffect(()=>{p&&Dt(p,m)},[p]);const Q=(U,R,S)=>{b(T=>({...T,progress:U,progressInfo:R,processingInfo:S}))},B=(U,R)=>{j(S=>({...S,txErrorStatus:U,txError:R}))},v=(U,R)=>{a({noOfTokenToApprove:Je,signer:U},{onSuccess:S=>{S.status===1&&(Q(60,"Please complete the transaction in your wallet to continue.","Approving PUSH"),D(U,R))},onError:S=>(console.log("Error in approving PUSH Token",S),S.code===4001||S.code==="ACTION_REJECTED"?(console.log("Signature error ",S),B(1,"User Rejected Signature. Please try again.")):B(2,"Transaction failed due to one of the following reasons:"),b(ae),!1)})},D=(U,R)=>{let S=Ai.GENERAL;const T="1+"+R,G=ci(T);Q(70,"Please complete the transaction in your wallet to continue.","Creating Channel..."),c({channelType:S,identityBytes:G,fees:Je,signer:U},{onSuccess:g=>{g.status===0?B(2,"Transaction failed due to one of the following reasons:"):(Q(80,"Please wait while we confirm the transaction..","Transaction Confirmed.."),setTimeout(()=>{Q(90,"Creating your channel, Aligning pixels, adjusting padding... This may take some time.","Redirecting... Please do not refresh")},2e3),setTimeout(()=>{Q(100,"Creating your channel, Aligning pixels, adjusting padding... This may take some time.","Redirecting... Please do not refresh"),window.location.reload()},3e3))},onError:g=>{console.log("Error in transaction from query >>>>",g),g.code===4001||g.code==="ACTION_REJECTED"?(console.log("Signature error ",g),B(1,"User Rejected Signature. Please try again."),b(ae)):(console.error("Error in creating channel--> %o",g),console.error({error:g}),Q(0,"There was an error in creating the Channel","Kindly Contact support@epns.io to resolve the issue."))}})},M=async()=>{if(b(ae),j(Xe),!r){l();return}if(!d.isValid){i(0);return}if(!p){i(1);return}Q(10,"Checking for PUSH Token Approval","Loading...");const U=await Ut({provider:t,account:e});let R={name:d.values.channelName,info:d.values.channelDesc,url:d.values.channelURL,icon:p};const S=JSON.stringify(R);Q(20,"Please wait, payload is getting uploaded to IPFS","Loading...");let T=await li(S);console.debug("IPFS storagePointer:",T),Q(40,"Please complete the transaction in your wallet to continue.","Payload Uploaded...");var G=t.getSigner(e);console.debug(G),U<50?v(G,T):D(G,T)};return w.jsxs(O,{padding:{initial:"s8",ml:"s4"},backgroundColor:{light:"white",dark:"gray-900"},borderRadius:"r8",display:"flex",width:{initial:"648px",ml:"325px"},flexDirection:"column",alignItems:"center",gap:"s10",children:[w.jsx(Rt,{}),!u&&w.jsx(Gt,{}),E.txErrorStatus!==0&&w.jsx(Pt,{channelCreationError:E}),I.progress===null?w.jsxs(O,{display:"flex",flexDirection:"column",gap:"s8",alignItems:"center",alignSelf:"stretch",children:[w.jsx(rr,{steps:_t,completedSteps:Ye,setActiveStepIndex:i}),A==0&&w.jsx(Mt,{channelInfoFormik:d}),A===1&&w.jsx(St,{view:o,croppedImage:p,setView:f,setCroppedImage:m,setActiveStepIndex:i,handleNextStep:k}),A===2&&w.jsx(jt,{channelStakeFees:Se,handleCreateNewChannel:M})]}):w.jsx(Tt,{progressState:I})]})}});export{tr as C,tt as I,bi as __tla,rt as h,nt as t};

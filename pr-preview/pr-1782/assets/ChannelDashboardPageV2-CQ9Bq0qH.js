import{b1 as e,br as k,b2 as a,bp as d,bi as ne,cn as on,e$ as C,bY as m,dO as se,f$ as Sn,dv as Dn,co as cn,aY as y,a$ as x,g0 as dn,bj as V,bk as I,bl as O,cT as Ln,g1 as An,g2 as In,g3 as _n,g4 as Pn,g5 as Mn,g6 as En,g7 as Tn,bo as Rn,g8 as P,dM as q,fK as hn,b$ as ie,dj as gn,aZ as ae,bq as M,g9 as Nn,b0 as W,ga as Zn,dl as pn,gb as Un,bv as Hn,a_ as _,bn as $,gc as Bn,gd as zn,ge as te,gf as xn,gg as E,cX as Fn,gh as Vn,dN as On,cZ as qn,fU as Kn,b3 as Jn,b4 as Gn,__tla as Wn}from"./index-BA7JdT-e.js";import{C as $n,__tla as Yn}from"./ContentLayout-B_ObD-b-.js";import{u as T,__tla as Xn}from"./useMutation-JaRcwqLp.js";import{u as re,c as le,a as R,F as Qn,b as es,__tla as ns}from"./index.esm-y6mb_KD7.js";import{g as N,a as un,U as ss}from"./Common.form-LPxQflxb.js";import{c as oe,m as is,i as as,g as mn,__tla as ts}from"./PushTokenContractHelper-Cd8ka1d6.js";import{S as rs,u as jn,I as ls,__tla as os}from"./ImageClipper-BhQ00_7b.js";import{C as cs,__tla as ds}from"./Copy-B5n4ajKZ.js";import{A as hs,__tla as gs}from"./Add-D9KUSofy.js";import{l as ps,__tla as xs}from"./lodash-BRHB6CBv.js";let Cn,us=Promise.all([(()=>{try{return Wn}catch{}})(),(()=>{try{return Yn}catch{}})(),(()=>{try{return Xn}catch{}})(),(()=>{try{return ns}catch{}})(),(()=>{try{return ts}catch{}})(),(()=>{try{return os}catch{}})(),(()=>{try{return ds}catch{}})(),(()=>{try{return gs}catch{}})(),(()=>{try{return xs}catch{}})()]).then(async()=>{let ce,de,Y,he,ge,pe,xe,ue,me,Z,je,K,Ce,fe,be,ye,ve,we,ke,Se,De,Le,X,Ae,Ie,_e,Pe,Me,Ee,Te,Re,Ne,Ze,Ue,He,J,Be,U,ze,Fe,Ve,Oe,qe,Ke,Q,Je,Ge,We,$e,Ye,Xe,G,Qe,en,nn,sn,an,tn;ce=n=>{const{svgProps:s,...i}=n;return e.jsx(k,{componentName:"BellSimple",icon:e.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,children:[e.jsx("path",{d:"M9 20.9999H15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e.jsx("path",{d:"M14.1313 3.34529L13.142 3.49112C13.197 3.86442 13.4575 4.17496 13.8155 4.29412L14.1313 3.34529ZM16.7729 4.97697L17.48 4.26986V4.26986L16.7729 4.97697ZM20.1468 16.8749L21.0128 16.3749L21.0122 16.3739L20.1468 16.8749ZM20.2472 17.2493L19.2472 17.2502V17.2502L20.2472 17.2493ZM19.874 17.8985L19.3717 17.0338L19.3717 17.0338L19.874 17.8985ZM19.4999 17.9999V18.9999L19.5034 18.9999L19.4999 17.9999ZM4.49988 17.9999L4.49387 18.9999H4.49988V17.9999ZM4.12646 17.8978L4.63038 17.034L4.63037 17.034L4.12646 17.8978ZM3.85375 17.623L2.98622 18.1204H2.98622L3.85375 17.623ZM3.85488 16.8749L2.98913 16.3745L2.98887 16.3749L3.85488 16.8749ZM7.22691 4.97697L6.51981 4.26986L7.22691 4.97697ZM9.86833 3.34533L10.1841 4.29415C10.5422 4.17499 10.8026 3.86444 10.8576 3.49114L9.86833 3.34533ZM13.8155 4.29412C14.6557 4.57375 15.4279 5.04625 16.0657 5.68407L17.48 4.26986C16.6203 3.41016 15.5793 2.77329 14.4471 2.39646L13.8155 4.29412ZM16.0657 5.68407C17.1441 6.76241 17.7499 8.22494 17.7499 9.74994H19.7499C19.7499 7.69451 18.9334 5.72327 17.48 4.26986L16.0657 5.68407ZM17.7499 9.74994C17.7499 13.2175 18.5462 16.1062 19.2813 17.376L21.0122 16.3739C20.5098 15.5062 19.7499 12.9986 19.7499 9.74994H17.7499ZM19.2807 17.3749C19.2588 17.337 19.2473 17.294 19.2472 17.2502L21.2472 17.2484C21.247 16.9417 21.1661 16.6405 21.0128 16.3749L19.2807 17.3749ZM19.2472 17.2502C19.2472 17.2064 19.2587 17.1633 19.2805 17.1253L21.0143 18.1223C21.1672 17.8564 21.2475 17.5551 21.2472 17.2484L19.2472 17.2502ZM19.2805 17.1253C19.3024 17.0874 19.3338 17.0558 19.3717 17.0338L20.3762 18.7632C20.6414 18.6091 20.8615 18.3881 21.0143 18.1223L19.2805 17.1253ZM19.3717 17.0338C19.4096 17.0118 19.4526 17.0001 19.4964 16.9999L19.5034 18.9999C19.8101 18.9989 20.1111 18.9172 20.3762 18.7632L19.3717 17.0338ZM19.4999 16.9999H4.49988V18.9999H19.4999V16.9999ZM4.5059 17C4.54965 17.0002 4.59257 17.012 4.63038 17.034L3.62255 18.7615C3.88713 18.9159 4.18758 18.9981 4.49387 18.9999L4.5059 17ZM4.63037 17.034C4.66817 17.0561 4.69951 17.0876 4.72128 17.1256L2.98622 18.1204C3.13856 18.3861 3.35799 18.6072 3.62256 18.7615L4.63037 17.034ZM4.72128 17.1256C4.74304 17.1636 4.75446 17.2066 4.75439 17.2503L2.7544 17.2473C2.75393 17.5536 2.83387 17.8547 2.98622 18.1204L4.72128 17.1256ZM4.75439 17.2503C4.75433 17.2941 4.74278 17.3371 4.7209 17.375L2.98887 16.3749C2.83571 16.6402 2.75486 16.941 2.7544 17.2473L4.75439 17.2503ZM4.72064 17.3754C5.45456 16.1058 6.24988 13.2164 6.24988 9.74994H4.24988C4.24988 12.9979 3.49084 15.5066 2.98913 16.3745L4.72064 17.3754ZM6.24988 9.74994C6.24988 8.22494 6.85568 6.76241 7.93402 5.68407L6.51981 4.26986C5.0664 5.72327 4.24988 7.69451 4.24988 9.74994H6.24988ZM7.93402 5.68407C8.57182 5.04627 9.344 4.57378 10.1841 4.29415L9.55252 2.3965C8.42035 2.77334 7.37948 3.41019 6.51981 4.26986L7.93402 5.68407ZM10.8576 3.49114C10.9453 2.89646 11.4397 2.47119 11.9998 2.47119V0.471191C10.3991 0.471191 9.10409 1.67243 8.87902 3.19951L10.8576 3.49114ZM11.9998 2.47119C12.5599 2.47119 13.0544 2.89645 13.142 3.49112L15.1206 3.19946C14.8955 1.67241 13.6005 0.471191 11.9998 0.471191V2.47119Z",fill:"currentColor"})]}),...i})},de=n=>{const{svgProps:s,...i}=n;return e.jsx(k,{componentName:"BellSimpleSlash",icon:e.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,children:[e.jsx("path",{d:"M5.52783 4.4353L19.3386 19.6",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),e.jsx("path",{d:"M7.42357 6.49341C7.04446 6.90863 6.28622 8.18319 6.28622 9.95964C6.28622 12.1802 5.85294 15.8631 4.39062 17.4337H17.2265",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),e.jsx("path",{d:"M9.59013 20.25H15.3852M9.31934 4.70613C10.6192 3.80347 13.9554 2.73472 16.9017 5.68101C17.2912 6.07049 18.4295 7.23159 18.5807 10.9345C18.6168 11.8191 18.8731 14.0541 19.6097 15.9172",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})]}),...i})},Y=n=>{const{svgProps:s,...i}=n;return e.jsx(k,{componentName:"CircleFilled",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"inherit",height:"inherit",viewBox:"0 0 8 8",fill:"none",...s,children:e.jsx("circle",{cx:"4",cy:"4",r:"4",fill:"currentColor"})}),...i})},he=n=>{const{svgProps:s,...i}=n;return e.jsx(k,{componentName:"CrownSimple",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"inherit",height:"inherit",viewBox:"0 0 32 33",fill:"none",...s,children:[e.jsx("g",{"clip-path":"url(#clip0_5441_8171)",children:e.jsx("path",{d:"M5.84358 26.76H26.1623C26.4231 26.7601 26.6755 26.6792 26.8752 26.5315C27.075 26.3838 27.2093 26.1789 27.2546 25.9526L30.4013 13.2489C30.4408 13.0399 30.4021 12.8252 30.2911 12.6372C30.18 12.4492 30.0027 12.2981 29.7857 12.2067C29.5687 12.1153 29.3239 12.0885 29.0881 12.1305C28.8523 12.1724 28.6384 12.2807 28.4786 12.4391L22.6567 17.9652L17.0093 6.80669C16.9204 6.63745 16.7784 6.49416 16.6001 6.39374C16.4218 6.29332 16.2146 6.23996 16.003 6.23996C15.7913 6.23996 15.5841 6.29332 15.4058 6.39374C15.2275 6.49416 15.0855 6.63745 14.9966 6.80669L9.34925 17.9652L3.52726 12.4391C3.36781 12.2784 3.15302 12.1681 2.91574 12.1251C2.67846 12.0821 2.43173 12.1088 2.21327 12.201C1.99481 12.2933 1.81663 12.446 1.70597 12.6359C1.59531 12.8258 1.55825 13.0424 1.60046 13.2526L4.74711 25.9563C4.79341 26.1825 4.92872 26.3871 5.12926 26.5341C5.3298 26.6811 5.58273 26.7611 5.84358 26.76Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_5441_8171",children:e.jsx("rect",{width:"32",height:"32",fill:"white",transform:"translate(0 0.5)"})})})]}),...i})},ge=n=>{const{svgProps:s,...i}=n;return e.jsx(k,{componentName:"Cube",icon:e.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,children:[e.jsx("path",{d:"M11.8471 12.1528L4.6665 7.95139L11.8471 3.75L19.3332 7.95139L11.8471 12.1528Z",stroke:"currentColor","stroke-width":"1.5","stroke-linejoin":"round"}),e.jsx("path",{d:"M4.6665 8.02783V16.457L11.8471 20.2501L19.3332 16.457V8.02783",stroke:"currentColor","stroke-width":"1.5","stroke-linejoin":"round"}),e.jsx("path",{d:"M11.8472 20.2501V12.1528",stroke:"currentColor","stroke-width":"1.5","stroke-linejoin":"round"})]}),...i})},pe=n=>{const{svgProps:s,...i}=n;return e.jsx(k,{componentName:"KebabMenuHorizontal",icon:e.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,children:[e.jsxs("g",{"clip-path":"url(#clip0_372_37305)",children:[e.jsx("path",{d:"M23 16C23 17.3807 24.1193 18.5 25.5 18.5C26.8807 18.5 28 17.3807 28 16C28 14.6193 26.8807 13.5 25.5 13.5C24.1193 13.5 23 14.6193 23 16Z",fill:"currentColor"}),e.jsx("path",{d:"M13.5 16C13.5 17.3807 14.6193 18.5 16 18.5C17.3807 18.5 18.5 17.3807 18.5 16C18.5 14.6193 17.3807 13.5 16 13.5C14.6193 13.5 13.5 14.6193 13.5 16Z",fill:"currentColor"}),e.jsx("path",{d:"M3.99999 16C3.99999 17.3807 5.11928 18.5 6.5 18.5C7.88071 18.5 9 17.3807 9 16C9 14.6193 7.88071 13.5 6.5 13.5C5.11928 13.5 3.99999 14.6193 3.99999 16Z",fill:"currentColor"})]}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_372_37305",children:e.jsx("rect",{width:"32",height:"32",fill:"white",transform:"translate(32) rotate(90)"})})})]}),...i})},xe=n=>{const{svgProps:s,...i}=n;return e.jsx(k,{componentName:"OptOut",icon:e.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,children:[e.jsx("circle",{cx:"16.87",cy:"16",r:"12",stroke:"currentColor","stroke-width":"2"}),e.jsx("path",{d:"M21.87 16L11.87 16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]}),...i})},ue=n=>{const{svgProps:s,...i}=n;return e.jsx(k,{componentName:"ReceiveNotification",icon:e.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,children:[e.jsx("path",{d:"M25.1818 11.6364C27.2906 11.6364 29 9.92691 29 7.81818C29 5.70946 27.2906 4 25.1818 4C23.0731 4 21.3636 5.70946 21.3636 7.81818C21.3636 9.92691 23.0731 11.6364 25.1818 11.6364Z",stroke:"currentColor","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"}),e.jsx("path",{d:"M18.0909 5.09088H10C7.23857 5.09088 5 7.32946 5 10.0909V23C5 25.7614 7.23858 28 10 28H22.9091C25.6705 28 27.9091 25.7614 27.9091 23V14.9091",stroke:"currentColor","stroke-width":"1.33333","stroke-linecap":"round"})]}),...i})},me=n=>{const{svgProps:s,...i}=n;return e.jsx(k,{componentName:"Settings",icon:e.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,children:[e.jsx("path",{d:"M26.6931 16.5931C26.7164 16.198 26.7164 15.802 26.6931 15.407H26.689C26.671 15.1342 26.7559 14.8646 26.9268 14.6513L28.8659 12.2271C28.6436 11.5199 28.3587 10.8339 28.0146 10.1773L24.929 9.83433C24.66 9.80448 24.4117 9.67594 24.2321 9.47357C23.969 9.17774 23.6889 8.89758 23.393 8.63454C23.1907 8.45489 23.0621 8.20657 23.0323 7.93762L22.6824 4.85341C22.0258 4.50947 21.3398 4.22457 20.6327 4.00207L18.2044 5.94115C17.9929 6.11047 17.726 6.1952 17.4555 6.17892C17.0605 6.15569 16.6645 6.15569 16.2694 6.17892C15.999 6.1952 15.7321 6.11047 15.5206 5.94115L13.0964 4.00207C12.3892 4.2244 11.7032 4.50931 11.0466 4.85341L10.7036 7.93762C10.6737 8.20725 10.5447 8.45614 10.3415 8.6359C10.0457 8.89894 9.7655 9.1791 9.50246 9.47494C9.32281 9.6773 9.07449 9.80584 8.80554 9.8357L5.72133 10.1855C5.3774 10.8422 5.0925 11.5282 4.87 12.2353L6.80907 14.6636C6.97839 14.8751 7.06313 15.142 7.04685 15.4124C7.02362 15.8075 7.02362 16.2035 7.04685 16.5986C7.06313 16.869 6.97839 17.1359 6.80907 17.3474L4.87 19.7716C5.09233 20.4788 5.37723 21.1647 5.72133 21.8214L8.80691 22.1657C9.07586 22.1956 9.32418 22.3241 9.50383 22.5265C9.76687 22.8223 10.047 23.1025 10.3429 23.3655C10.5452 23.5452 10.6738 23.7935 10.7036 24.0624L11.0534 27.1466C11.7101 27.4906 12.3961 27.7755 13.1032 27.998L15.5329 26.0575C15.7444 25.8882 16.0113 25.8035 16.2817 25.8198C16.6767 25.843 17.0728 25.843 17.4678 25.8198H17.5334C17.7817 25.8196 18.0227 25.9039 18.2167 26.0589L20.6409 27.998C21.3481 27.7756 22.034 27.4907 22.6906 27.1466L23.0336 24.0611C23.0635 23.7921 23.192 23.5438 23.3944 23.3641C23.6902 23.1011 23.9704 22.8209 24.2334 22.5251C24.4131 22.3227 24.6614 22.1942 24.9303 22.1643L28.0187 21.8145C28.3626 21.1578 28.6475 20.4719 28.87 19.7648L26.9309 17.3419C26.7616 17.1304 26.6769 16.8635 26.6931 16.5931Z",stroke:"currentColor","stroke-width":"2","stroke-linejoin":"round"}),e.jsx("path",{d:"M14.4385 19.6359C15.1576 20.1164 16.0031 20.3729 16.8679 20.3729C18.0277 20.3729 19.1399 19.9121 19.96 19.0921C20.7801 18.272 21.2408 17.1598 21.2408 16C21.2408 15.1352 20.9843 14.2897 20.5038 13.5706C20.0233 12.8515 19.3404 12.291 18.5414 11.9601C17.7423 11.6291 16.8631 11.5425 16.0149 11.7112C15.1666 11.8799 14.3874 12.2964 13.7759 12.908C13.1643 13.5195 12.7479 14.2987 12.5791 15.1469C12.4104 15.9952 12.497 16.8744 12.828 17.6734C13.159 18.4725 13.7194 19.1554 14.4385 19.6359Z",stroke:"currentColor","stroke-width":"2","stroke-linejoin":"round"})]}),...i})},Z=({title:n,description:s})=>e.jsxs(a,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing-xxxs",alignSelf:"stretch",children:[e.jsx(d,{variant:"h3-semibold",color:"text-primary",display:{ml:"none",dp:"block"},children:n}),e.jsx(d,{variant:"bs-regular",color:"text-tertiary",display:{ml:"none",dp:"block"},textAlign:"center",children:s}),e.jsx(d,{variant:"h4-semibold",color:"text-primary",display:{ml:"block",dp:"none"},children:n}),e.jsx(d,{variant:"bes-regular",color:"text-tertiary",display:{ml:"block",dp:"none"},textAlign:"center",children:s})]}),je=({noOfPushTokensToCheck:n,mintPushToken:s,mintingPush:i})=>{const r=ne.appEnv==="prod",{isModalOpen:t,showModal:h,ModalComponent:p}=on();return e.jsxs(a,{display:"flex",padding:"spacing-sm spacing-md",backgroundColor:"surface-brand-subtle",borderRadius:"radius-none radius-none radius-sm radius-sm",justifyContent:"space-between",alignItems:"center",flexDirection:{ml:"column",initial:"row"},gap:"spacing-xs",children:[e.jsx(C,{isLoading:i,children:e.jsx(d,{variant:"c-regular",color:"text-primary",children:r?"Your balance is low. Swap to get PUSH Tokens.":"Follow these steps to get Testnet PUSH."})}),r?e.jsx(m,{size:"extraSmall",leadingIcon:e.jsx(rs,{}),onClick:h,children:"Swap PUSH Token"}):e.jsxs(a,{display:"flex",gap:"spacing-xs",children:[e.jsx(C,{isLoading:i,children:e.jsx(se,{to:Sn,target:"_blank",children:e.jsxs(a,{display:"flex",gap:"spacing-xxs",alignItems:"baseline",color:"text-brand-medium",cursor:"pointer",children:[e.jsx(a,{border:"border-sm solid stroke-brand-medium",width:"16px",height:"15px",borderRadius:"radius-xl",display:"flex",justifyContent:"center",color:"text-brand-medium",children:e.jsx(d,{variant:"c-regular",color:"text-brand-medium",children:"1"})}),e.jsx(d,{color:"text-brand-medium",children:"Sepolia ETH Faucet"})]})})}),e.jsx(C,{isLoading:i,children:e.jsxs(a,{display:"flex",gap:"spacing-xxs",alignItems:"baseline",color:"text-brand-medium",cursor:"pointer",onClick:()=>s(1e3),children:[e.jsx(a,{border:"border-sm solid stroke-brand-medium",width:"16px",height:"15px",borderRadius:"radius-xl",display:"flex",justifyContent:"center",children:e.jsx(d,{variant:"c-regular",color:"text-brand-medium",children:"2"})}),e.jsx(d,{color:"text-brand-medium",children:"Get Testnet Push"})]})})]}),t&&e.jsx(p,{InnerComponent:Dn,InnerComponentProps:{defaultPushTokenAmount:n},modalPadding:"0px",modalPosition:cn.ON_ROOT})]})},K=({fees:n,pushApprovalAmount:s,title:i,description:r,balance:t=0,setBalance:h=()=>{},showFaucet:p=!1,showBalance:o=!1})=>{const{provider:u,account:g}=y(),[l,c]=x.useState(!1),[j,w]=x.useState(!1),H=async()=>{c(!0);const f=await oe({address:g,provider:u});c(!1),h(f)};x.useEffect(()=>{!g||!u||H()},[t,g]);const S=async f=>{w(!0);try{const D=await is({noOfTokens:f,provider:u,account:g});w(!1),h(D)}catch(D){console.log("Error >>",D),w(!1)}};return e.jsx(a,{display:"flex",flexDirection:"column",gap:"spacing-sm",width:"-webkit-fill-available",children:e.jsxs(a,{display:"flex",flexDirection:"column",alignSelf:"stretch",children:[e.jsxs(a,{display:"flex",flexDirection:"row",justifyContent:"space-between",backgroundColor:"surface-secondary",borderRadius:t<n?"radius-sm radius-sm radius-none radius-none":"radius-sm",padding:"spacing-sm spacing-md",alignItems:"center",children:[e.jsxs(a,{width:{initial:"inherit",ml:"200px"},children:[e.jsx(d,{variant:"h4-semibold",color:"text-primary",display:{ml:"none",dp:"block"},children:i}),e.jsx(d,{variant:"h5-semibold",color:"text-primary",display:{ml:"block",dp:"none"},children:i}),e.jsx(d,{variant:"c-regular",color:"text-tertiary",display:{ml:"none",dp:"block"},children:r}),e.jsx(d,{variant:"c-regular",color:"text-tertiary",display:{ml:"block",dp:"none"},children:r})]}),e.jsxs(a,{display:"flex",children:[!!s&&s>=n&&e.jsx(dn,{color:"icon-brand-medium",size:24}),e.jsxs(a,{children:[e.jsxs(d,{variant:"h4-semibold",color:"text-brand-medium",display:{ml:"none",dp:"block"},children:[n," PUSH"]}),e.jsxs(d,{variant:"h5-semibold",color:"text-brand-medium",display:{ml:"block",dp:"none"},children:[n," PUSH"]}),o&&e.jsx(C,{isLoading:l,children:e.jsxs(d,{variant:"bes-semibold",color:"text-tertiary",children:["Balance:"," ",t==null?void 0:t.toLocaleString()]})})]})]})]}),t<n&&p&&e.jsx(je,{mintPushToken:S,noOfPushTokensToCheck:50,mintingPush:j})]})})},Ce=async({signer:n})=>(await new V(I.epnscore,O.epnscore,n).deactivateChannel()).wait(),fe=async n=>{const{signer:s,account:i,identityBytes:r,fees:t}=n;return(await new V(I.epnscore,O.epnscore,s).updateChannelMeta(i,r,t,{gasLimit:1e6})).wait()},be=n=>n,ye=n=>n,ve=n=>n,we=({userPushSDKInstance:n})=>n.channel.delegate.get().then(be),ke=({userPushSDKInstance:n,delegateAddress:s})=>n.channel.delegate.add(s).then(ye),Se=async({identityBytes:n,signer:s})=>(await new V(I.epnscore,O.epnscore,s).addSubGraph(n)).wait(),De=({userPushSDKInstance:n,delegateAddress:s})=>n.channel.delegate.remove(s).then(ve),Le=async({fees:n,signer:s})=>(await new V(I.epnscore,O.epnscore,s).reactivateChannel(n)).wait(),X=n=>Ln({queryKey:[An,n==null?void 0:n.account],queryFn:()=>we({userPushSDKInstance:n})}),Ae=()=>T({mutationKey:[In],mutationFn:De}),Ie=()=>T({mutationKey:[_n],mutationFn:Ce}),_e=()=>T({mutationKey:[Pn],mutationFn:ke}),Pe=()=>T({mutationKey:[Mn],mutationFn:Se}),Me=()=>T({mutationKey:[En],mutationFn:Le}),Ee=()=>T({mutationKey:[Tn],mutationFn:fe}),Te=n=>le().shape({delegateAddress:R().required(N("Delegate Address")).test("address","Invalid Wallet Address",s=>Rn(s)).test("uniqueDelegate","Delegate address already exists",s=>!(n!=null&&n.find(i=>i===s)))}),Re=({handleAddDelegate:n,channel_delegates:s})=>re({initialValues:{delegateAddress:""},validationSchema:Te(s),onSubmit:()=>{n()}}),Ne=le().shape({subgraphId:R().required(N("Subgraph Id")),pollTime:R().required(N("Poll Time")).matches(/^\d+$/,"Must be a valid timestamp in seconds").test("is-valid-timestamp","Invalid timestamp format",n=>{const s=parseInt(n,10);return!isNaN(s)&&s>0})}),Ze=({handleAddSubgraph:n})=>re({initialValues:{subgraphId:"",pollTime:""},validationSchema:Ne,onSubmit:()=>{n()}}),Ue=({setActiveState:n})=>{const{account:s,provider:i}=y(),[r,t]=x.useState(null),{mutate:h,isPending:p}=Pe(),o=Ze({handleAddSubgraph:()=>{t(null);const u=o.values.pollTime+"+"+o.values.subgraphId,g=hn(u);var l=i.getSigner(s);console.debug(l),h({signer:l,identityBytes:g},{onSuccess:()=>{console.log("Subgraph Added successfully"),n("dashboard")},onError:c=>{console.log("Error in adding subgraoh",c),t("Error in adding subgraph. Please Check console for more reason")}})}});return e.jsxs(a,{display:"flex",alignSelf:"stretch",flexDirection:"column",backgroundColor:"surface-primary",borderRadius:"radius-lg",padding:"spacing-lg",gap:"spacing-xl",width:{initial:"537px",ml:"275px"},children:[e.jsx(Z,{title:"Add Subgraph",description:"Enter Subgraph ID and Poll time (atleast 60 sec)"}),r&&e.jsx(P,{variant:"error",heading:r,showIcon:!0}),e.jsx("form",{onSubmit:o.handleSubmit,children:e.jsxs(a,{display:"flex",flexDirection:"column",gap:"spacing-md",children:[e.jsx(q,{required:!0,label:"Subgraph ID",value:o.values.subgraphId,onChange:o.handleChange("subgraphId"),error:o.touched.subgraphId&&!!o.errors.subgraphId,errorMessage:o.touched.subgraphId?o.errors.subgraphId:""}),e.jsx(q,{required:!0,label:"Poll Time (in Seconds)",value:o.values.pollTime,onChange:o.handleChange("pollTime"),error:o.touched.pollTime&&!!o.errors.pollTime,errorMessage:o.touched.pollTime?o.errors.pollTime:""})]})}),e.jsxs(a,{display:"flex",gap:"spacing-sm",justifyContent:"center",children:[e.jsx(m,{size:"medium",variant:"outline",onClick:()=>n("dashboard"),children:"Back"}),e.jsx(m,{disabled:p,onClick:()=>o.handleSubmit(),children:p?"Adding":"Add Subgraph"})]})]})},He=({setActiveState:n})=>{const{userPushSDKInstance:s}=ie(c=>c.user),{wallet:i}=y(),{handleConnectWalletAndEnableProfile:r}=x.useContext(gn),[t,h]=x.useState(null),{data:p,refetch:o}=X(s),{mutate:u,isPending:g}=_e(),l=Re({handleAddDelegate:async()=>{let c=s;s!=null&&s.readmode()&&(c=await r({wallet:i}),!c||(c==null?void 0:c.readmode()))||u({userPushSDKInstance:c,delegateAddress:l.values.delegateAddress},{onSuccess:()=>{console.log("Channel Delegate Added Successfully"),o(),n("dashboard")},onError:j=>{console.log("Error in adding delegatee",j),h("Error in delegating. Check console for more reasons")}})},channel_delegates:p});return e.jsxs(a,{display:"flex",alignSelf:"stretch",flexDirection:"column",backgroundColor:"surface-primary",borderRadius:"radius-lg",padding:"spacing-lg",gap:"spacing-xl",width:{initial:"537px",ml:"275px"},children:[e.jsx(Z,{title:"Add Delegate",description:"Add an account who can send notifications on behalf of the channel"}),t&&e.jsx(P,{variant:"error",heading:t,showIcon:!0}),e.jsx("form",{onSubmit:l.handleSubmit,children:e.jsxs(a,{display:"flex",flexDirection:"column",gap:"spacing-md",children:[e.jsx(q,{required:!0,label:"Delegate Address",onChange:l.handleChange("delegateAddress"),value:l.values.delegateAddress,error:!!l.errors.delegateAddress,errorMessage:l.errors.delegateAddress}),e.jsxs(a,{display:"flex",gap:"spacing-sm",justifyContent:"center",children:[e.jsx(m,{size:"medium",variant:"outline",onClick:()=>n("dashboard"),children:"Back"}),e.jsx(m,{disabled:g,children:g?"Adding":"Add"})]})]})})]})},J=({channelDetails:n,loadingChannelDetails:s,showAddNewChain:i=!1})=>{var u,g;const r=ae(),t=((g=(u=n==null?void 0:n.aliases)==null?void 0:u.filter(l=>l==null?void 0:l.is_alias_verified))==null?void 0:g.map(l=>l.alias_blockchain_id))||[],[h,p]=x.useState("Copy Wallet"),o=()=>{n&&(navigator.clipboard.writeText(n.channel),p("Copied")),setTimeout(()=>{p("Copy Wallet")},1e3)};return e.jsxs(a,{display:"flex",gap:"spacing-sm",alignItems:"center",children:[e.jsx(C,{isLoading:s,children:e.jsx(a,{width:"90px",height:"90px",border:"border-sm solid stroke-tertiary",borderRadius:"radius-md",css:M`
            img {
              border-radius: 16px;
            }
          `,children:e.jsx("img",{width:"100%",height:"100%",src:n==null?void 0:n.iconV2})})}),e.jsxs(a,{display:"flex",flexDirection:"column",gap:"spacing-xxxs",children:[e.jsx(C,{isLoading:s,width:"100%",children:e.jsxs(a,{display:"flex",alignItems:{initial:"center",ml:"baseline"},flexDirection:{ml:"column",initial:"row"},children:[e.jsx(d,{variant:"h4-semibold",color:"text-primary",children:n==null?void 0:n.name}),e.jsxs(a,{display:"flex",alignItems:"center",children:[e.jsxs(a,{display:"flex",alignItems:"center",margin:{initial:"spacing-none spacing-none spacing-none spacing-xxxs",ml:"spacing-none"},children:[!!(n!=null&&n.is_alias_verified)&&e.jsx(dn,{size:22,color:"icon-tertiary"}),e.jsx(Nn,{width:18,height:18}),t.length>0&&t.map(l=>{const c=Hn[Number(l)];return c?e.jsx(a,{display:"flex",css:M`
                          margin-left: -4px;
                        `,children:e.jsx(c,{width:18,height:18},l)}):null})]}),i&&e.jsx(a,{display:"flex",cursor:"pointer",onClick:()=>r(W.AddNewChain),children:e.jsx(Zn,{size:18,color:"icon-primary"})})]})]})}),e.jsxs(a,{display:"flex",flexDirection:"column",gap:"spacing-xs",children:[e.jsx(C,{isLoading:s,width:"100%",children:e.jsxs(a,{display:"flex",gap:"spacing-xxxs",children:[e.jsx(d,{color:"text-tertiary",variant:"c-regular",children:pn(n?n==null?void 0:n.channel:"",5)}),e.jsx(Un,{description:h,children:e.jsx(a,{cursor:"pointer",children:e.jsx(cs,{onClick:o,size:14,color:"icon-tertiary"})})})]})}),e.jsxs(a,{display:"flex",gap:"spacing-xs",children:[e.jsx(C,{isLoading:s,children:e.jsxs(d,{color:"text-tertiary",variant:"c-regular",children:[n==null?void 0:n.subscriber_count," subscribers"]})}),(n==null?void 0:n.activation_status)===0&&e.jsxs(a,{display:"flex",alignItems:"center",gap:"spacing-xxxs",padding:"spacing-none spacing-xxxs",backgroundColor:"surface-state-danger-subtle",borderRadius:"radius-xs",children:[e.jsx(Y,{size:8,color:"icon-state-danger-bold"}),e.jsxs(d,{color:"text-state-danger-bold",variant:"bes-semibold",children:[" ","Deactivated"]})]}),(n==null?void 0:n.activation_status)===1&&e.jsxs(a,{display:"flex",alignItems:"center",gap:"spacing-xxxs",padding:"spacing-none spacing-xxxs",backgroundColor:"surface-state-success-subtle",borderRadius:"radius-xs",children:[e.jsx(Y,{size:8,color:"icon-state-success-bold"}),e.jsxs(d,{color:"text-state-success-bold",variant:"bes-semibold",children:[" ","Active"]})]})]})]})]})]})},Be=({title:n})=>{const s=async()=>{await as()};return e.jsxs(a,{display:"flex",flexDirection:"row",justifyContent:"center",gap:"spacing-xxxs",children:[e.jsx(d,{variant:"bes-semibold",color:"text-tertiary",children:n}),e.jsx(d,{css:M`
          cursor: pointer;
        `,variant:"bes-semibold",color:"text-brand-medium",onClick:s,children:"Import Token"})]})},U=50,ze=({setActiveState:n})=>{const{provider:s,account:i}=y(),{data:r,isLoading:t,refetch:h}=_(i),[p,o]=x.useState(""),[u,g]=x.useState(0),[l,c]=x.useState(0),j=async()=>{const v=await oe({address:i,provider:s});c(v)},w=async()=>{const v=await mn({address:i,provider:s,contractAddress:I.epnscore});g(parseInt(v))};x.useEffect(()=>{!i||!s||(w(),j())},[i,s]);const{mutate:H,isPending:S}=jn(),f=()=>{o("");var v=s.getSigner(i);console.debug(v);const L=$((U-u).toString(),18);H({noOfTokenToApprove:L,signer:v},{onSuccess:()=>{w()},onError:A=>{console.log("Error in Approving PUSH",A),A.code=="ACTION_REJECTED"?o("User rejected signature. Please try again."):o("Error in approving PUSH Tokens")}})},{mutate:D,isPending:B}=Me(),ee=()=>{o("");const v=$(U.toString(),18);var L=s.getSigner(i);console.debug(L),D({fees:v,signer:L},{onSuccess:()=>{console.log("Channel Reactivated"),h(),n("dashboard")},onError:A=>{console.log("Error in Reactivating channel",A),A.code=="ACTION_REJECTED"?o("User rejected signature. Please try again."):o("Error in reactivating channel. Check console for more reasons.")}})};return e.jsxs(a,{display:"flex",width:{initial:"648px",ml:"357px"},padding:"spacing-md",flexDirection:"column",alignItems:"center",gap:"spacing-lg",backgroundColor:"surface-primary",borderRadius:"radius-lg",margin:"spacing-none spacing-none spacing-sm spacing-none",children:[e.jsx(Z,{title:"Reactivate Channel",description:"Performing this action will make your channel visible to users."}),p&&e.jsx(P,{variant:"error",heading:p,showIcon:!0}),e.jsx(J,{channelDetails:r,loadingChannelDetails:t}),e.jsxs(a,{display:"flex",flexDirection:"column",gap:"spacing-sm",width:"-webkit-fill-available",children:[e.jsx(K,{title:"Channel Reactivation Fee",fees:U,pushApprovalAmount:u,showFaucet:!0,showBalance:!0,balance:l,setBalance:c}),e.jsx(Be,{title:"Don\u2019t see Push token in your wallet?"})]}),e.jsxs(a,{display:"flex",gap:"spacing-sm",justifyContent:"center",children:[e.jsx(m,{size:"medium",variant:"outline",onClick:()=>n("dashboard"),children:"Back"}),u>=U?e.jsx(m,{disabled:B,onClick:ee,children:B?"Activating":"Activate"}):e.jsx(m,{disabled:S,onClick:f,children:S?"Approving":"Approve PUSH"})]})]})},Fe=40,Ve=({setActiveState:n})=>{const{provider:s,account:i}=y(),[r,t]=x.useState(""),{data:h,isLoading:p,refetch:o}=_(i),{mutate:u,isPending:g}=Ie(),l=()=>{t("");var c=s.getSigner(i);console.debug(c),u({signer:c},{onSuccess:()=>{console.log("Channel Deactivated Successfully"),o(),n("dashboard")},onError:j=>{console.log("Error in Deactivating Channel",j),j.code=="ACTION_REJECTED"?t("User rejected signature. Please try again."):t("Error in deactivating Channel. Check console for more reason.")}})};return e.jsxs(a,{display:"flex",width:{initial:"648px",ml:"357px"},padding:"spacing-md",flexDirection:"column",alignItems:"center",gap:"spacing-lg",backgroundColor:"surface-primary",borderRadius:"radius-lg",margin:"spacing-none spacing-none spacing-sm spacing-none",children:[e.jsx(Z,{title:"Deactivate Channel",description:"Deactivating your channel will disable sending notifications from it."}),r&&e.jsx(P,{variant:"error",heading:r,showIcon:!0}),e.jsx(J,{channelDetails:h,loadingChannelDetails:p}),e.jsx(K,{fees:Fe,title:"You will receive as a refund"}),e.jsx(d,{variant:"bs-semibold",color:"text-primary",children:"Are you sure you want to deactivate your channel?"}),e.jsxs(a,{display:"flex",gap:"spacing-sm",justifyContent:"center",children:[e.jsx(m,{size:"medium",variant:"outline",onClick:()=>n("dashboard"),children:"Back"}),e.jsx(m,{disabled:g,variant:"danger",onClick:l,children:g?"Deactivating":"Deactivate"})]})]})},Oe=({channelDetails:n,loadingChannelDetails:s,setActiveState:i})=>e.jsxs(a,{display:"flex",justifyContent:"space-between",width:"100%",flexDirection:{ml:"column",initial:"row"},gap:{ml:"spacing-md"},children:[e.jsx(J,{channelDetails:n,loadingChannelDetails:s,showAddNewChain:!0}),e.jsxs(a,{display:"flex",height:"fit-content",gap:"spacing-xxs",justifyContent:"center",children:[e.jsx(C,{isLoading:s,children:e.jsx(m,{variant:"outline",size:"small",onClick:()=>i("editChannel"),disabled:(n==null?void 0:n.activation_status)===0,children:"Edit Channel"})}),e.jsx(C,{isLoading:s,children:e.jsx(Bn,{trigger:"click",overlay:e.jsxs(zn,{children:[e.jsx(te,{label:"Add Subgraph Details",icon:e.jsx(ge,{size:24}),onClick:()=>i("addSubgraph")}),n!=null&&n.activation_status?e.jsx(te,{label:"Deactivate Channel",icon:e.jsx(de,{size:24}),onClick:()=>i("deactivateChannel"),type:"error"}):e.jsx(te,{label:"Activate Channel",icon:e.jsx(ce,{size:24}),onClick:()=>i("reactivateChannel"),type:"success"})]}),children:e.jsx(a,{padding:"spacing-xs",border:"border-sm solid stroke-tertiary",borderRadius:"radius-xs",display:"flex",height:"16px",cursor:"pointer",alignItems:"center",children:e.jsx(pe,{size:24,color:"icon-primary"})})})})]})]}),qe=()=>e.jsx(a,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignSelf:"stretch",padding:"spacing-none spacing-sm",color:"text-tertiary",children:e.jsxs(a,{display:"flex",flexDirection:{initial:"row",ml:"column"},gap:{initial:"spacing-sm",ml:"spacing-none"},children:[e.jsx(se,{to:"https://push.org/privacy/",target:"_blank",textProps:{variant:"bes-semibold",color:"text-tertiary"},children:"Privacy Policy"}),e.jsx(se,{to:"https://push.org/tos/",target:"_blank",textProps:{variant:"bes-semibold",color:"text-tertiary"},children:"Terms and Conditions"})]})}),Ke=({settingName:n,type:s})=>e.jsxs(a,{display:"flex",flexDirection:"column",height:"43px",children:[e.jsxs(a,{display:"flex",justifyContent:"space-between",alignItems:"center",height:"100%",children:[e.jsx(d,{variant:"bs-semibold",color:"text-primary",children:n}),s==2&&e.jsx(xn,{children:"Range"}),s==3&&e.jsx(xn,{children:"Multi-Range"})]}),e.jsx(E,{})]}),Q=({state:n,title:s,subTitle:i,onClick:r})=>e.jsxs(a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"spacing-sm",height:"200px",children:[n=="delegatee"&&e.jsx(he,{size:48,color:"icon-tertiary"}),n=="notificationSettings"&&e.jsx(ue,{size:48,color:"icon-tertiary"}),e.jsxs(a,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(d,{textAlign:"center",variant:"h6-semibold",color:"text-secondary",children:s}),e.jsx(d,{textAlign:"center",variant:"bes-regular",color:"text-tertiary",children:i})]}),r&&e.jsx(m,{variant:"primary",size:"small",onClick:r,children:"Add Setting"})]}),Je=({channel_settings:n,loadingChannelSettings:s})=>{const i=ae(),r=()=>{i(W.ChannelSettings)};return e.jsxs(a,{display:"flex",padding:"spacing-sm",width:"-webkit-fill-available",border:"border-sm solid stroke-tertiary",borderRadius:"radius-sm",flexDirection:"column",children:[e.jsxs(a,{display:"flex",flexDirection:"column",gap:"spacing-xxs",children:[e.jsxs(a,{display:"flex",justifyContent:"space-between",children:[e.jsxs(a,{display:"flex",flexDirection:"column",gap:"spacing-xxxs",children:[e.jsx(C,{isLoading:s,children:e.jsx(d,{variant:"h5-semibold",color:"text-primary",children:"Notification Settings"})}),e.jsx(C,{isLoading:s,children:e.jsxs(d,{variant:"c-regular",color:"text-tertiary",children:[" ","Manage notification preferences for users"]})})]}),n&&e.jsx(m,{size:"extraSmall",variant:"tertiary",leadingIcon:e.jsx(me,{}),onClick:()=>i(W.ChannelSettings),children:"Manage"})]}),e.jsx(E,{})]}),e.jsx(a,{display:"flex",flexDirection:"column",overflow:"auto",height:{initial:"274px",ml:"230px"},justifyContent:n?"flex-start":"center",children:n?e.jsx(e.Fragment,{children:JSON.parse(n).map(t=>e.jsx(Ke,{settingName:t.description,type:t.type}))}):e.jsx(Q,{state:"notificationSettings",title:"No settings yet",subTitle:"Add options for users to customize notifications.",onClick:r})})]})},Ge=({delegate_address:n,refetchChannelDelegate:s,setChannelDashboardError:i})=>{const{userPushSDKInstance:r}=ie(g=>g.user),{wallet:t}=y(),{handleConnectWalletAndEnableProfile:h}=x.useContext(gn),{mutate:p,isPending:o}=Ae(),u=async()=>{if(o)return;let g=r;r!=null&&r.readmode()&&(g=await h({wallet:t}),!g||(g==null?void 0:g.readmode()))||p({userPushSDKInstance:g,delegateAddress:n},{onSuccess:()=>{s()},onError:l=>{console.log("Error in removing delegatee",l),i("User rejected signature. Please try again.")}})};return e.jsxs(a,{display:"flex",flexDirection:"column",height:"43px",children:[e.jsxs(a,{display:"flex",justifyContent:"space-between",alignItems:"center",height:"100%",children:[e.jsx(a,{display:"flex",alignItems:"center",gap:"spacing-xxxs",children:e.jsx(d,{variant:"bs-semibold",color:"text-primary",children:pn(n,7)})}),e.jsxs(a,{display:"flex",cursor:"pointer",gap:"spacing-xxxs",onClick:u,children:[e.jsx(xe,{size:16,color:"icon-primary"}),e.jsx(d,{color:"text-tertiary-inverse",children:o?"Removing":"Remove"})]})]}),e.jsx(E,{})]})},We=({channel_delegates:n,loadingDelegates:s,setChannelDashboardError:i,setActiveState:r,refetchChannelDelegate:t})=>e.jsxs(a,{display:"flex",padding:"spacing-sm",border:"border-sm solid stroke-tertiary",borderRadius:"radius-sm",width:"-webkit-fill-available",flexDirection:"column",children:[e.jsxs(a,{display:"flex",flexDirection:"column",gap:"spacing-xxs",children:[e.jsxs(a,{display:"flex",justifyContent:"space-between",children:[e.jsxs(a,{display:"flex",flexDirection:"column",gap:"spacing-xxxs",children:[e.jsx(C,{isLoading:s,children:e.jsx(d,{variant:"h5-semibold",color:"text-primary",children:"Channel Delegates"})}),e.jsx(C,{isLoading:s,children:e.jsxs(d,{variant:"c-regular",color:"text-tertiary",children:[" ","Delegates can send channel notifications"," "]})})]}),e.jsx(m,{onClick:()=>r("addDelegate"),size:"extraSmall",variant:"tertiary",leadingIcon:e.jsx(hs,{}),children:"Add"})]}),e.jsx(E,{})]}),e.jsx(a,{display:"flex",flexDirection:"column",overflow:"auto",height:{initial:"274px",ml:"230px"},justifyContent:n?"flex-start":"center",children:n&&n.length>0?e.jsx(e.Fragment,{children:n.map(h=>e.jsx(Ge,{delegate_address:h,refetchChannelDelegate:t,setChannelDashboardError:i},h))}):e.jsx(Q,{state:"delegatee",title:"No delegates yet",subTitle:"Delegates added to your channel will appear here."})})]}),$e=({setActiveState:n,setChannelDashboardError:s})=>{const{account:i}=y(),{userPushSDKInstance:r}=ie(g=>g.user),{data:t,isLoading:h}=_(i),{data:p,refetch:o,isLoading:u}=X(r);return e.jsxs(a,{display:"flex",gap:"spacing-md",width:"100%",flexDirection:{ml:"column",initial:"row"},children:[e.jsx(Je,{channel_settings:t==null?void 0:t.channel_settings,loadingChannelSettings:h}),e.jsx(We,{channel_delegates:p,loadingDelegates:u,setChannelDashboardError:s,refetchChannelDelegate:o,setActiveState:n})]})},Ye=({setActiveState:n})=>{const{account:s}=y(),{data:i,isLoading:r}=_(s),[t,h]=x.useState("");return e.jsxs(e.Fragment,{children:[e.jsxs(a,{display:"flex",width:{initial:"846px",ml:"357px"},padding:"spacing-md",flexDirection:"column",alignItems:"center",gap:"spacing-lg",backgroundColor:"surface-primary",borderRadius:"radius-lg",margin:"spacing-none spacing-none spacing-sm spacing-none",children:[e.jsx(Oe,{channelDetails:i,loadingChannelDetails:r,setActiveState:n}),t&&e.jsx(P,{variant:"error",heading:t,showIcon:!0}),e.jsx($e,{setActiveState:n,setChannelDashboardError:h})]}),e.jsx(qe,{})]})},Xe=({children:n,channelDetails:s})=>{const i=le().shape({channelName:R().required(N("Channel Name")).max(32,un(32)),channelDesc:R().required(N("Channel Description")).max(250,un(250)),channelURL:R().required(N("Channel URL")).test("url","Please enter a valid channel url",t=>ss.test(t))}),r=re({initialValues:{channelName:s.name,channelDesc:s.info,channelURL:s.url,channelIcon:s.iconV2,imageSrc:"",imageType:""},validationSchema:i,onSubmit:()=>{}});return e.jsx(Qn,{value:r,children:n})},G=()=>{const n=es();if(!n)throw new Error("useEditChannelFormikContext must be used within a FormikChainAliasProvider");return n},Qe=({onClose:n})=>{const{values:s,setFieldValue:i,isValid:r}=G(),t=x.useRef(),[h,p]=x.useState(s.channelIcon),o=async l=>{var j;const c=(j=l.currentTarget.files)==null?void 0:j[0];p(void 0),c&&await g(c)},u=async l=>{var j;l.preventDefault(),l.stopPropagation(),p(void 0);const c=(j=l.dataTransfer.files)==null?void 0:j[0];c&&await g(c)},g=async l=>{i("channelIcon",l);const c=new FileReader;c.readAsDataURL(l),c.onloadend=()=>{i("imageSrc",c.result),i("imageType",l.type)}};return e.jsxs(a,{display:"flex",flexDirection:"column",gap:"spacing-lg",alignItems:"center",alignSelf:"stretch",children:[e.jsx(a,{display:"flex",width:"100%",justifyContent:"end",color:"text-tertiary",cursor:"pointer",children:e.jsx(Fn,{size:24,onClick:n})}),e.jsxs(a,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing-lg",children:[e.jsx(d,{variant:"bes-regular",color:"text-tertiary",children:"Upload a PNG, JPG upto 1MB. Crop the image to resize to 128px."}),e.jsx(Vn,{id:"file-upload",onChange:o,onDrop:u,children:e.jsxs(a,{width:{initial:"500px",ml:"325px"},padding:"spacing-xxl spacing-none",display:"flex",flexDirection:"column",alignItems:"center",border:"border-sm dashed stroke-tertiary",borderRadius:"radius-md",backgroundColor:"surface-secondary",gap:"spacing-md",children:[h?e.jsx(a,{width:"128px",height:"128px",borderRadius:"radius-md",children:e.jsx("img",{style:{borderRadius:"inherit"},width:"100%",height:"100%",src:h,alt:"Cropped Img"})}):e.jsx(ls,{width:"200px",height:"200px",imageSrc:s.imageSrc,imageType:s.imageType,onImageCropped:l=>{p(l),i("channelIcon",l)},ref:t}),e.jsxs(a,{display:"flex",gap:"spacing-xxxs",children:[e.jsx(d,{variant:"bs-semibold",color:"text-tertiary",children:"Drag and Drop or"}),e.jsx("label",{htmlFor:"file-upload",children:e.jsx(d,{variant:"bs-semibold",color:"text-brand-medium",css:M`
                    cursor: pointer;
                  `,children:"Browse to Choose"})})]})]})})]}),e.jsx(a,{children:h?e.jsx(e.Fragment,{children:e.jsx(m,{onClick:()=>{r&&(i("channelIcon",h),n())},children:"Upload Image"})}):e.jsx(e.Fragment,{children:e.jsx(m,{onClick:()=>{t.current.showCroppedImage()},children:"Crop Image"})})})]})},en=({UploadLogoComponent:n,displayUplaodLogoModal:s})=>{const{values:i,errors:r,handleChange:t}=G();return e.jsxs(a,{display:"flex",flexDirection:{initial:"row",ml:"column"},gap:"spacing-lg",width:"100%",padding:"spacing-sm spacing-md",justifyContent:"center",children:[e.jsxs(a,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing-sm",children:[e.jsx(a,{width:"90px",height:"90px",border:"border-sm solid stroke-tertiary",borderRadius:"radius-md",css:M`
            img {
              border-radius: 16px;
            }
          `,children:e.jsx("img",{width:"100%",height:"100%",src:i.channelIcon})}),e.jsx(m,{size:"extraSmall",onClick:s,children:"Upload Logo"})]}),e.jsx(a,{display:{initial:"block",ml:"none"},height:"330px",margin:"spacing-none spacing-lg",children:e.jsx(E,{orientation:"vertical"})}),e.jsx(a,{display:{initial:"none",ml:"block"},children:e.jsx(E,{orientation:"horizontal"})}),e.jsx(a,{width:{initial:"550px",ml:"350px"},children:e.jsx("form",{children:e.jsx(a,{display:"flex",flexDirection:"column",gap:"spacing-xl",alignSelf:"stretch",children:e.jsxs(a,{display:"flex",flexDirection:"column",gap:"spacing-sm",alignSelf:"stretch",css:M`
                flex: 1;
              `,children:[e.jsx(q,{required:!0,label:"Channel Name",value:i.channelName,onChange:t("channelName"),error:!!r.channelName,errorMessage:r.channelName,totalCount:32}),e.jsx(On,{required:!0,label:"Channel Description",placeholder:"Get notified about ...",description:"Enter a Brief description of the notifications the user will receive",error:!!r.channelDesc,errorMessage:r.channelDesc,value:i.channelDesc,onChange:t("channelDesc"),totalCount:250}),e.jsx(q,{required:!0,label:"Channel Website URL",value:i.channelURL,onChange:t("channelURL"),error:!!r.channelURL,errorMessage:r.channelURL})]})})})}),e.jsx(n,{InnerComponent:Qe,modalPosition:cn.ON_PARENT})]})},nn=50,sn=({setActiveState:n})=>{const{account:s,provider:i,chainId:r}=y(),{values:t,isValid:h,initialValues:p}=G(),{data:o,refetch:u}=_(s),{mutate:g,isPending:l}=jn(),[c,j]=x.useState(0),[w,H]=x.useState(0),[S,f]=x.useState(""),[D,B]=x.useState(0),ee=async()=>{const b=await oe({address:s,provider:i});B(b)},v=async()=>{const b=ne.coreContractChain===r?i:new qn(ne.coreRPC),z=await new V(I.epnscore,O.epnscore,b).channelUpdateCounter(s);j(nn*(Number(z)+1))},L=async()=>{const b=await mn({address:s,provider:i,contractAddress:I.epnscore});H(parseInt(b))};x.useEffect(()=>{!s||!i||(v(),L(),ee())},[s,i]);const A=x.useMemo(()=>!!ps.isEqual(t,p),[t]),fn=()=>{if(f(""),c==0)return;var b=i.getSigner(s);console.debug(b);const z=$(c.toString(),18);g({noOfTokenToApprove:z,signer:b},{onSuccess:()=>{console.log("Successfully Approved PUSH"),L()},onError:F=>{console.log("Error in Approving PUSH",F),F.code=="ACTION_REJECTED"?f("User rejected signature. Please try again."):f("Error in approving PUSH Tokens")}})},{mutate:bn,isPending:rn}=Ee(),yn=async()=>{if(f(""),!!h){var b=i.getSigner(s);if(console.debug(b),o){const z=JSON.stringify({name:t.channelName,info:t.channelDesc,url:t.channelURL,icon:t.channelIcon}),F=await Kn(z);console.debug("IPFS storagePointer:",F);const vn="1+"+F,wn=hn(vn),kn=$(c.toString(),18);bn({account:s,identityBytes:wn,fees:kn,signer:b},{onSuccess:()=>{console.log("Successfully edited channel"),u(),n("dashboard")},onError:ln=>{console.log("Error in updating channel details",ln),ln.code=="ACTION_REJECTED"?f("User rejected signature. Please try again."):f("Error in updating Channel. Check console for more reasons.")}})}}};return e.jsxs(a,{display:"flex",flexDirection:"column",alignSelf:"stretch",children:[S&&e.jsx(P,{variant:"error",heading:S,showIcon:!0}),e.jsx(K,{title:"Channel edit fee",description:"Editing channel details requires fees to be deposited",fees:c,pushApprovalAmount:w,showFaucet:!0,showBalance:!0,balance:D,setBalance:B}),e.jsxs(a,{display:"flex",justifyContent:"end",gap:"spacing-sm",margin:"spacing-lg spacing-none spacing-none spacing-none",children:[e.jsx(m,{size:"medium",variant:"outline",onClick:()=>n("dashboard"),children:"Back"}),c&&w>=c?e.jsx(m,{disabled:A||rn||!h,onClick:yn,children:rn?"Updating":"Save Changes"}):e.jsx(m,{variant:"primary",size:"medium",disabled:l,onClick:fn,children:l?"Approving":"Approve PUSH"})]})]})},an=({channelDetails:n,setActiveState:s})=>{const{isModalOpen:i,showModal:r,ModalComponent:t}=on();return e.jsx(Xe,{channelDetails:n,children:e.jsxs(a,{display:"flex",width:{initial:"846px",ml:"357px"},padding:"spacing-md",flexDirection:"column",alignItems:"center",gap:"spacing-lg",backgroundColor:"surface-primary",borderRadius:"radius-lg",margin:"spacing-none spacing-none spacing-sm spacing-none",children:[n&&e.jsx(en,{displayUplaodLogoModal:r,UploadLogoComponent:t,channelDetails:n}),e.jsx(sn,{setActiveState:s})]})})},tn=()=>{const{account:n}=y(),[s,i]=x.useState("dashboard"),{data:r}=_(n);return e.jsxs(a,{children:[s==="dashboard"&&e.jsx(Ye,{setActiveState:i}),s==="addDelegate"&&e.jsx(He,{setActiveState:i}),s==="addSubgraph"&&e.jsx(Ue,{setActiveState:i}),s==="deactivateChannel"&&e.jsx(Ve,{setActiveState:i}),s==="reactivateChannel"&&e.jsx(ze,{setActiveState:i}),s==="editChannel"&&r&&e.jsx(an,{setActiveState:i,channelDetails:r})]})},Cn=()=>{const{account:n}=y(),s=ae(),{data:i,isLoading:r,refetch:t,isRefetching:h}=_(n);if(x.useEffect(()=>{i||s(`${W.CreateChannel}`)},[i]),x.useEffect(()=>{let p;return i&&!i.name&&(p=setInterval(()=>{t()},3e3)),()=>{clearInterval(p)}},[i,i==null?void 0:i.name]),r||h||!(i!=null&&i.name))return e.jsx(a,{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(Jn,{type:Gn.SEAMLESS,title:"Loading Channel Details. Please wait..."})});if(i!=null&&i.name)return e.jsx($n,{children:e.jsx(tn,{})})}});export{us as __tla,Cn as default};

import{b1 as v,bk as Ht,cI as Xe,cJ as ce,cH as Ze,gg as Gn,gh as Hn,bf as Nt,gi as Se,a$ as W,gj as Nn,b6 as Wn,gk as qn,gl as zn,cF as Re,gm as Wt,ct as qt,gb as Yn,gn as Jn,b2 as H,dH as zt,dI as Kn,bT as $,bl as N,cj as Xn,cl as Zn,go as Vn,aY as Ve,bi as $e,ch as $n,dY as Te,dJ as ei,ci as ti,bm as Yt,gp as ri,gq as ni,et as ii,gr as ai,fU as oi,fK as si,fP as ci,__tla as li}from"./index-2gpqeMpY.js";import{E as Ai,__tla as hi}from"./ErrorFilled-BNJnRn2h.js";import{S as ui,__tla as di}from"./Stepper-5vdz2XFE.js";import{u as Jt,__tla as fi}from"./useMutation-CX8nWXR5.js";import{c as gi,a as et,u as pi,F as mi,b as wi,__tla as Ii}from"./index.esm-Dj6_QDUu.js";import{g as tt,a as Kt,U as vi}from"./Common.form-LPxQflxb.js";import{U as yi,m as bi,c as Bi,i as Ei,__tla as xi}from"./UniswapWidget-C0TBlYJp.js";let Xt,rt,Zt,Ci=Promise.all([(()=>{try{return li}catch{}})(),(()=>{try{return hi}catch{}})(),(()=>{try{return di}catch{}})(),(()=>{try{return fi}catch{}})(),(()=>{try{return Ii}catch{}})(),(()=>{try{return xi}catch{}})()]).then(async()=>{const Vt=e=>{const{svgProps:t,...r}=e;return v.jsx(Ht,{componentName:"CloudUpload",icon:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"inherit",height:"inherit",viewBox:"0 0 53 52",fill:"none",...t,children:[v.jsx("path",{d:"M16.1888 26.3978L26.7966 15.7901L37.4043 26.3978",stroke:"#C4CBD5","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"}),v.jsx("path",{d:"M27.0618 50.0001V16.8509",stroke:"#C4CBD5","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"}),v.jsx("path",{d:"M21.4927 35.4144H11.1502C8.05625 35.0608 1.86841 32.4972 1.86841 25.0718C1.86841 17.6464 8.05625 14.9061 11.1502 14.4641C11.769 10.3094 15.6585 2 26.2662 2C39.2607 2 41.0286 10.8398 41.9126 16.0553C45.0065 15.9669 51.4596 19.2906 51.4596 26.9282C51.2828 29.7569 49.6032 35.4144 44.2993 35.4144C38.9955 35.4144 34.1336 35.4144 32.3656 35.4144",stroke:"#C4CBD5","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"})]}),...r})},$t=e=>{const{svgProps:t,...r}=e;return v.jsx(Ht,{componentName:"Swap",icon:v.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[v.jsx("path",{d:"M13.25 5L5 13.25H27",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),v.jsx("path",{d:"M18.75 27L27 18.75H5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]}),...r})},er=async e=>{const{channelType:t,identityBytes:r,fees:n,signer:l}=e;return(await new Xe(ce.epnscore,Ze.epnscore,l).createChannelWithPUSH(t,r,n,0,{gasLimit:6e5})).wait()},tr=async e=>{const{noOfTokenToApprove:t,signer:r}=e;return(await new Xe(ce.pushToken,Ze.pushToken,r).approve(ce.epnscore,t)).wait()},rr=()=>Jt({mutationKey:[Gn],mutationFn:tr}),nr=()=>Jt({mutationKey:[Hn],mutationFn:er});var nt={exports:{}};(function(e,t){(function(r){e.exports=r()})(function(){return function(){function r(n,l,u){function i(A,o){if(!l[A]){if(!n[A]){var a=typeof Se=="function"&&Se;if(!o&&a)return a(A,!0);if(s)return s(A,!0);var p=new Error("Cannot find module '"+A+"'");throw p.code="MODULE_NOT_FOUND",p}var h=l[A]={exports:{}};n[A][0].call(h.exports,function(d){var g=n[A][1][d];return i(g||d)},h,h.exports,r,n,l,u)}return l[A].exports}for(var s=typeof Se=="function"&&Se,c=0;c<u.length;c++)i(u[c]);return i}return r}()({1:[function(r,n,l){var u=r("multimath"),i=r("./mm_unsharp_mask"),s=r("./mm_resize");function c(A){var o=A||[],a={js:o.indexOf("js")>=0,wasm:o.indexOf("wasm")>=0};u.call(this,a),this.features={js:a.js,wasm:a.wasm&&this.has_wasm()},this.use(i),this.use(s)}c.prototype=Object.create(u.prototype),c.prototype.constructor=c,c.prototype.resizeAndUnsharp=function(A,o){var a=this.resize(A,o);return A.unsharpAmount&&this.unsharp_mask(a,A.toWidth,A.toHeight,A.unsharpAmount,A.unsharpRadius,A.unsharpThreshold),a},n.exports=c},{"./mm_resize":4,"./mm_unsharp_mask":9,multimath:19}],2:[function(r,n,l){function u(a){return a<0?0:a>255?255:a}function i(a){return a>=0?a:0}function s(a,p,h,d,g,f){var w,B,b,E,j,D,x,I,k,U,M,R=0,P=0;for(k=0;k<d;k++){for(j=0,U=0;U<g;U++){for(D=f[j++],x=f[j++],I=R+D*4|0,w=B=b=E=0;x>0;x--)M=f[j++],E=E+M*a[I+3]|0,b=b+M*a[I+2]|0,B=B+M*a[I+1]|0,w=w+M*a[I]|0,I=I+4|0;p[P+3]=i(E>>7),p[P+2]=i(b>>7),p[P+1]=i(B>>7),p[P]=i(w>>7),P=P+d*4|0}P=(k+1)*4|0,R=(k+1)*h*4|0}}function c(a,p,h,d,g,f){var w,B,b,E,j,D,x,I,k,U,M,R=0,P=0;for(k=0;k<d;k++){for(j=0,U=0;U<g;U++){for(D=f[j++],x=f[j++],I=R+D*4|0,w=B=b=E=0;x>0;x--)M=f[j++],E=E+M*a[I+3]|0,b=b+M*a[I+2]|0,B=B+M*a[I+1]|0,w=w+M*a[I]|0,I=I+4|0;w>>=7,B>>=7,b>>=7,E>>=7,p[P+3]=u(E+8192>>14),p[P+2]=u(b+8192>>14),p[P+1]=u(B+8192>>14),p[P]=u(w+8192>>14),P=P+d*4|0}P=(k+1)*4|0,R=(k+1)*h*4|0}}function A(a,p,h,d,g,f){var w,B,b,E,j,D,x,I,k,U,M,R,P=0,L=0;for(U=0;U<d;U++){for(D=0,M=0;M<g;M++){for(x=f[D++],I=f[D++],k=P+x*4|0,w=B=b=E=0;I>0;I--)R=f[D++],j=a[k+3],E=E+R*j|0,b=b+R*a[k+2]*j|0,B=B+R*a[k+1]*j|0,w=w+R*a[k]*j|0,k=k+4|0;b=b/255|0,B=B/255|0,w=w/255|0,p[L+3]=i(E>>7),p[L+2]=i(b>>7),p[L+1]=i(B>>7),p[L]=i(w>>7),L=L+d*4|0}L=(U+1)*4|0,P=(U+1)*h*4|0}}function o(a,p,h,d,g,f){var w,B,b,E,j,D,x,I,k,U,M,R=0,P=0;for(k=0;k<d;k++){for(j=0,U=0;U<g;U++){for(D=f[j++],x=f[j++],I=R+D*4|0,w=B=b=E=0;x>0;x--)M=f[j++],E=E+M*a[I+3]|0,b=b+M*a[I+2]|0,B=B+M*a[I+1]|0,w=w+M*a[I]|0,I=I+4|0;w>>=7,B>>=7,b>>=7,E>>=7,E=u(E+8192>>14),E>0&&(w=w*255/E|0,B=B*255/E|0,b=b*255/E|0),p[P+3]=E,p[P+2]=u(b+8192>>14),p[P+1]=u(B+8192>>14),p[P]=u(w+8192>>14),P=P+d*4|0}P=(k+1)*4|0,R=(k+1)*h*4|0}}n.exports={convolveHor:s,convolveVert:c,convolveHorWithPre:A,convolveVertWithPre:o}},{}],3:[function(r,n,l){n.exports="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"},{}],4:[function(r,n,l){n.exports={name:"resize",fn:r("./resize"),wasm_fn:r("./resize_wasm"),wasm_src:r("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(r,n,l){var u=r("./resize_filter_gen"),i=r("./convolve"),s=i.convolveHor,c=i.convolveVert,A=i.convolveHorWithPre,o=i.convolveVertWithPre;function a(h,d,g){for(var f=3,w=d*g*4|0;f<w;){if(h[f]!==255)return!0;f=f+4|0}return!1}function p(h,d,g){for(var f=3,w=d*g*4|0;f<w;)h[f]=255,f=f+4|0}n.exports=function(h){var d=h.src,g=h.width,f=h.height,w=h.toWidth,B=h.toHeight,b=h.scaleX||h.toWidth/h.width,E=h.scaleY||h.toHeight/h.height,j=h.offsetX||0,D=h.offsetY||0,x=h.dest||new Uint8Array(w*B*4),I=typeof h.filter>"u"?"mks2013":h.filter,k=u(I,g,w,b,j),U=u(I,f,B,E,D),M=new Uint16Array(w*f*4);return a(d,g,f)?(A(d,M,g,f,w,k),o(M,x,f,w,B,U)):(s(d,M,g,f,w,k),c(M,x,f,w,B,U),p(x,w,B)),x}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(r,n,l){var u=r("./resize_filter_info"),i=14;function s(c){return Math.round(c*((1<<i)-1))}n.exports=function(c,A,o,a,p){var h=u.filter[c].fn,d=1/a,g=Math.min(1,a),f=u.filter[c].win/g,w,B,b,E,j,D,x,I,k,U,M,R,P,L,T,m,C,y=Math.floor((f+1)*2),_=new Int16Array((y+2)*o),Q=0,O=!_.subarray||!_.set;for(w=0;w<o;w++){for(B=(w+.5)*d+p,b=Math.max(0,Math.floor(B-f)),E=Math.min(A-1,Math.ceil(B+f)),j=E-b+1,D=new Float32Array(j),x=new Int16Array(j),I=0,k=b,U=0;k<=E;k++,U++)M=h((k+.5-B)*g),I+=M,D[U]=M;for(R=0,U=0;U<D.length;U++)P=D[U]/I,R+=P,x[U]=s(P);for(x[o>>1]+=s(1-R),L=0;L<x.length&&x[L]===0;)L++;if(L<x.length){for(T=x.length-1;T>0&&x[T]===0;)T--;if(m=b+L,C=T-L+1,_[Q++]=m,_[Q++]=C,!O)_.set(x.subarray(L,T+1),Q),Q+=C;else for(U=L;U<=T;U++)_[Q++]=x[U]}else _[Q++]=0,_[Q++]=0}return _}},{"./resize_filter_info":7}],7:[function(r,n,l){var u={box:{win:.5,fn:function(i){return i<0&&(i=-i),i<.5?1:0}},hamming:{win:1,fn:function(i){if(i<0&&(i=-i),i>=1)return 0;if(i<11920929e-14)return 1;var s=i*Math.PI;return Math.sin(s)/s*(.54+.46*Math.cos(s/1))}},lanczos2:{win:2,fn:function(i){if(i<0&&(i=-i),i>=2)return 0;if(i<11920929e-14)return 1;var s=i*Math.PI;return Math.sin(s)/s*Math.sin(s/2)/(s/2)}},lanczos3:{win:3,fn:function(i){if(i<0&&(i=-i),i>=3)return 0;if(i<11920929e-14)return 1;var s=i*Math.PI;return Math.sin(s)/s*Math.sin(s/3)/(s/3)}},mks2013:{win:2.5,fn:function(i){return i<0&&(i=-i),i>=2.5?0:i>=1.5?-.125*(i-2.5)*(i-2.5):i>=.5?.25*(4*i*i-11*i+7):1.0625-1.75*i*i}}};n.exports={filter:u,f2q:{box:0,hamming:1,lanczos2:2,lanczos3:3},q2f:["box","hamming","lanczos2","lanczos3"]}},{}],8:[function(r,n,l){var u=r("./resize_filter_gen");function i(a,p,h){for(var d=3,g=p*h*4|0;d<g;){if(a[d]!==255)return!0;d=d+4|0}return!1}function s(a,p,h){for(var d=3,g=p*h*4|0;d<g;)a[d]=255,d=d+4|0}function c(a){return new Uint8Array(a.buffer,0,a.byteLength)}var A=!0;try{A=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1}catch{}function o(a,p,h){if(A){p.set(c(a),h);return}for(var d=h,g=0;g<a.length;g++){var f=a[g];p[d++]=f&255,p[d++]=f>>8&255}}n.exports=function(a){var p=a.src,h=a.width,d=a.height,g=a.toWidth,f=a.toHeight,w=a.scaleX||a.toWidth/a.width,B=a.scaleY||a.toHeight/a.height,b=a.offsetX||0,E=a.offsetY||0,j=a.dest||new Uint8Array(g*f*4),D=typeof a.filter>"u"?"mks2013":a.filter,x=u(D,h,g,w,b),I=u(D,d,f,B,E),k=0,U=Math.max(p.byteLength,j.byteLength),M=this.__align(k+U),R=d*g*4*2,P=this.__align(M+R),L=this.__align(P+x.byteLength),T=L+I.byteLength,m=this.__instance("resize",T),C=new Uint8Array(this.__memory.buffer),y=new Uint32Array(this.__memory.buffer),_=new Uint32Array(p.buffer);y.set(_),o(x,C,P),o(I,C,L);var Q=m.exports.convolveHV||m.exports._convolveHV;i(p,h,d)?Q(P,L,M,h,d,g,f,1):(Q(P,L,M,h,d,g,f,0),s(j,g,f));var O=new Uint32Array(j.buffer);return O.set(new Uint32Array(this.__memory.buffer,0,f*g)),j}},{"./resize_filter_gen":6}],9:[function(r,n,l){n.exports={name:"unsharp_mask",fn:r("./unsharp_mask"),wasm_fn:r("./unsharp_mask_wasm"),wasm_src:r("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":10,"./unsharp_mask_wasm":11,"./unsharp_mask_wasm_base64":12}],10:[function(r,n,l){var u=r("glur/mono16");function i(s,c,A){for(var o=c*A,a=new Uint16Array(o),p,h,d,g,f=0;f<o;f++)p=s[4*f],h=s[4*f+1],d=s[4*f+2],g=p>=h&&p>=d?p:h>=d&&h>=p?h:d,a[f]=g<<8;return a}n.exports=function(s,c,A,o,a,p){var h,d,g,f,w;if(!(o===0||a<.5)){a>2&&(a=2);var B=i(s,c,A),b=new Uint16Array(B);u(b,c,A,a);for(var E=o/100*4096+.5|0,j=p<<8,D=c*A,x=0;x<D;x++)h=B[x],f=h-b[x],Math.abs(f)>=j&&(d=h+(E*f+2048>>12),d=d>65280?65280:d,d=d<0?0:d,h=h!==0?h:1,g=(d<<12)/h|0,w=x*4,s[w]=s[w]*g+2048>>12,s[w+1]=s[w+1]*g+2048>>12,s[w+2]=s[w+2]*g+2048>>12)}}},{"glur/mono16":18}],11:[function(r,n,l){n.exports=function(u,i,s,c,A,o){if(!(c===0||A<.5)){A>2&&(A=2);var a=i*s,p=a*4,h=a*2,d=a*2,g=Math.max(i,s)*4,f=8*4,w=0,B=p,b=B+h,E=b+d,j=E+d,D=j+g,x=this.__instance("unsharp_mask",p+h+d*2+g+f,{exp:Math.exp}),I=new Uint32Array(u.buffer),k=new Uint32Array(this.__memory.buffer);k.set(I);var U=x.exports.hsv_v16||x.exports._hsv_v16;U(w,B,i,s),U=x.exports.blurMono16||x.exports._blurMono16,U(B,b,E,j,D,i,s,A),U=x.exports.unsharp||x.exports._unsharp,U(w,w,B,b,i,s,c,o),I.set(new Uint32Array(this.__memory.buffer,0,a))}}},{}],12:[function(r,n,l){n.exports="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"},{}],13:[function(r,n,l){var u=100;function i(s,c){this.create=s,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=c||2e3}i.prototype.acquire=function(){var s=this,c;return this.available.length!==0?c=this.available.pop():(c=this.create(),c.id=this.lastId++,c.release=function(){return s.release(c)}),this.acquired[c.id]=c,c},i.prototype.release=function(s){var c=this;delete this.acquired[s.id],s.lastUsed=Date.now(),this.available.push(s),this.timeoutId===0&&(this.timeoutId=setTimeout(function(){return c.gc()},u))},i.prototype.gc=function(){var s=this,c=Date.now();this.available=this.available.filter(function(A){return c-A.lastUsed>s.idle?(A.destroy(),!1):!0}),this.available.length!==0?this.timeoutId=setTimeout(function(){return s.gc()},u):this.timeoutId=0},n.exports=i},{}],14:[function(r,n,l){var u=2;n.exports=function(i,s,c,A,o,a){var p=c/i,h=A/s,d=(2*a+u+1)/o;if(d>.5)return[[c,A]];var g=Math.ceil(Math.log(Math.min(p,h))/Math.log(d));if(g<=1)return[[c,A]];for(var f=[],w=0;w<g;w++){var B=Math.round(Math.pow(Math.pow(i,g-w-1)*Math.pow(c,w+1),1/g)),b=Math.round(Math.pow(Math.pow(s,g-w-1)*Math.pow(A,w+1),1/g));f.push([B,b])}return f}},{}],15:[function(r,n,l){var u=1e-5;function i(c){var A=Math.round(c);return Math.abs(c-A)<u?A:Math.floor(c)}function s(c){var A=Math.round(c);return Math.abs(c-A)<u?A:Math.ceil(c)}n.exports=function(c){var A=c.toWidth/c.width,o=c.toHeight/c.height,a=i(c.srcTileSize*A)-2*c.destTileBorder,p=i(c.srcTileSize*o)-2*c.destTileBorder;if(a<1||p<1)throw new Error("Internal error in pica: target tile width/height is too small.");var h,d,g,f,w,B,b=[],E;for(f=0;f<c.toHeight;f+=p)for(g=0;g<c.toWidth;g+=a)h=g-c.destTileBorder,h<0&&(h=0),w=g+a+c.destTileBorder-h,h+w>=c.toWidth&&(w=c.toWidth-h),d=f-c.destTileBorder,d<0&&(d=0),B=f+p+c.destTileBorder-d,d+B>=c.toHeight&&(B=c.toHeight-d),E={toX:h,toY:d,toWidth:w,toHeight:B,toInnerX:g,toInnerY:f,toInnerWidth:a,toInnerHeight:p,offsetX:h/A-i(h/A),offsetY:d/o-i(d/o),scaleX:A,scaleY:o,x:i(h/A),y:i(d/o),width:s(w/A),height:s(B/o)},b.push(E);return b}},{}],16:[function(r,n,l){function u(i){return Object.prototype.toString.call(i)}n.exports.isCanvas=function(i){var s=u(i);return s==="[object HTMLCanvasElement]"||s==="[object OffscreenCanvas]"||s==="[object Canvas]"},n.exports.isImage=function(i){return u(i)==="[object HTMLImageElement]"},n.exports.isImageBitmap=function(i){return u(i)==="[object ImageBitmap]"},n.exports.limiter=function(i){var s=0,c=[];function A(){s<i&&c.length&&(s++,c.shift()())}return function(o){return new Promise(function(a,p){c.push(function(){o().then(function(h){a(h),s--,A()},function(h){p(h),s--,A()})}),A()})}},n.exports.cib_quality_name=function(i){switch(i){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},n.exports.cib_support=function(i){return Promise.resolve().then(function(){if(typeof createImageBitmap>"u")return!1;var s=i(100,100);return createImageBitmap(s,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then(function(c){var A=c.width===10;return c.close(),s=null,A})}).catch(function(){return!1})},n.exports.worker_offscreen_canvas_support=function(){return new Promise(function(i,s){if(typeof OffscreenCanvas>"u"){i(!1);return}function c(a){if(typeof createImageBitmap>"u"){a.postMessage(!1);return}Promise.resolve().then(function(){var p=new OffscreenCanvas(10,10),h=p.getContext("2d");return h.rect(0,0,1,1),createImageBitmap(p,0,0,1,1)}).then(function(){return a.postMessage(!0)},function(){return a.postMessage(!1)})}var A=btoa("(".concat(c.toString(),")(self);")),o=new Worker("data:text/javascript;base64,".concat(A));o.onmessage=function(a){return i(a.data)},o.onerror=s}).then(function(i){return i},function(){return!1})},n.exports.can_use_canvas=function(i){var s=!1;try{var c=i(2,1),A=c.getContext("2d"),o=A.createImageData(2,1);o.data[0]=12,o.data[1]=23,o.data[2]=34,o.data[3]=255,o.data[4]=45,o.data[5]=56,o.data[6]=67,o.data[7]=255,A.putImageData(o,0,0),o=null,o=A.getImageData(0,0,2,1),o.data[0]===12&&o.data[1]===23&&o.data[2]===34&&o.data[3]===255&&o.data[4]===45&&o.data[5]===56&&o.data[6]===67&&o.data[7]===255&&(s=!0)}catch{}return s},n.exports.cib_can_use_region=function(){return new Promise(function(i){if(typeof Image>"u"||typeof createImageBitmap>"u"){i(!1);return}var s=new Image;s.src="data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z",s.onload=function(){createImageBitmap(s,0,0,s.width,s.height).then(function(c){c.width===s.width&&c.height===s.height?i(!0):i(!1)},function(){return i(!1)})},s.onerror=function(){return i(!1)}})}},{}],17:[function(r,n,l){n.exports=function(){var u=r("./mathlib"),i;onmessage=function(s){var c=s.data.opts;if(!c.src&&c.srcBitmap){var A=new OffscreenCanvas(c.width,c.height),o=A.getContext("2d");o.drawImage(c.srcBitmap,0,0),c.src=o.getImageData(0,0,c.width,c.height).data,A.width=A.height=0,A=null,c.srcBitmap.close(),c.srcBitmap=null}i||(i=new u(s.data.features));var a=i.resizeAndUnsharp(c);postMessage({data:a},[a.buffer])}}},{"./mathlib":1}],18:[function(r,n,l){var u,i,s,c,A,o,a,p;function h(f){f<.5&&(f=.5);var w=Math.exp(.726*.726)/f,B=Math.exp(-w),b=Math.exp(-2*w),E=(1-B)*(1-B)/(1+2*w*B-b);return u=E,i=E*(w-1)*B,s=E*(w+1)*B,c=-E*b,A=2*B,o=-b,a=(u+i)/(1-A-o),p=(s+c)/(1-A-o),new Float32Array([u,i,s,c,A,o,a,p])}function d(f,w,B,b,E,j){var D,x,I,k,U,M,R,P,L,T,m,C,y,_;for(L=0;L<j;L++){for(M=L*E,R=L,P=0,D=f[M],U=D*b[6],k=U,m=b[0],C=b[1],y=b[4],_=b[5],T=0;T<E;T++)x=f[M],I=x*m+D*C+k*y+U*_,U=k,k=I,D=x,B[P]=k,P++,M++;for(M--,P--,R+=j*(E-1),D=f[M],U=D*b[7],k=U,x=D,m=b[2],C=b[3],T=E-1;T>=0;T--)I=x*m+D*C+k*y+U*_,U=k,k=I,D=x,x=f[M],w[R]=B[P]+k,M--,P--,R-=j}}function g(f,w,B,b){if(b){var E=new Uint16Array(f.length),j=new Float32Array(Math.max(w,B)),D=h(b);d(f,E,j,D,w,B),d(E,f,j,D,B,w)}}n.exports=g},{}],19:[function(r,n,l){var u=r("object-assign"),i=r("./lib/base64decode"),s=r("./lib/wa_detect"),c={js:!0,wasm:!0};function A(o){if(!(this instanceof A))return new A(o);var a=u({},c,o||{});if(this.options=a,this.__cache={},this.__init_promise=null,this.__modules=a.modules||{},this.__memory=null,this.__wasm={},this.__isLE=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1,!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}A.prototype.has_wasm=s,A.prototype.use=function(o){return this.__modules[o.name]=o,this.options.wasm&&this.has_wasm()&&o.wasm_fn?this[o.name]=o.wasm_fn:this[o.name]=o.fn,this},A.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(new Error(`mathlib: only "wasm" was enabled, but it's not supported`));var o=this;return this.__init_promise=Promise.all(Object.keys(o.__modules).map(function(a){var p=o.__modules[a];return!o.options.wasm||!o.has_wasm()||!p.wasm_fn||o.__wasm[a]?null:WebAssembly.compile(o.__base64decode(p.wasm_src)).then(function(h){o.__wasm[a]=h})})).then(function(){return o}),this.__init_promise},A.prototype.__base64decode=i,A.prototype.__reallocate=function(o){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(o/(64*1024))}),this.__memory;var a=this.__memory.buffer.byteLength;return a<o&&this.__memory.grow(Math.ceil((o-a)/(64*1024))),this.__memory},A.prototype.__instance=function(o,a,p){if(a&&this.__reallocate(a),!this.__wasm[o]){var h=this.__modules[o];this.__wasm[o]=new WebAssembly.Module(this.__base64decode(h.wasm_src))}if(!this.__cache[o]){var d={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[o]=new WebAssembly.Instance(this.__wasm[o],{env:u(d,p||{})})}return this.__cache[o]},A.prototype.__align=function(o,a){a=a||8;var p=o%a;return o+(p?a-p:0)},n.exports=A},{"./lib/base64decode":20,"./lib/wa_detect":21,"object-assign":22}],20:[function(r,n,l){var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";n.exports=function(i){for(var s=i.replace(/[\r\n=]/g,""),c=s.length,A=new Uint8Array(c*3>>2),o=0,a=0,p=0;p<c;p++)p%4===0&&p&&(A[a++]=o>>16&255,A[a++]=o>>8&255,A[a++]=o&255),o=o<<6|u.indexOf(s.charAt(p));var h=c%4*6;return h===0?(A[a++]=o>>16&255,A[a++]=o>>8&255,A[a++]=o&255):h===18?(A[a++]=o>>10&255,A[a++]=o>>2&255):h===12&&(A[a++]=o>>4&255),A}},{}],21:[function(r,n,l){var u;n.exports=function(){if(typeof u<"u"||(u=!1,typeof WebAssembly>"u"))return u;try{var i=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),s=new WebAssembly.Module(i),c=new WebAssembly.Instance(s,{});return c.exports.test(4)!==0&&(u=!0),u}catch{}return u}},{}],22:[function(r,n,l){var u=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function c(o){if(o==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(o)}function A(){try{if(!Object.assign)return!1;var o=new String("abc");if(o[5]="de",Object.getOwnPropertyNames(o)[0]==="5")return!1;for(var a={},p=0;p<10;p++)a["_"+String.fromCharCode(p)]=p;var h=Object.getOwnPropertyNames(a).map(function(g){return a[g]});if(h.join("")!=="0123456789")return!1;var d={};return"abcdefghijklmnopqrst".split("").forEach(function(g){d[g]=g}),Object.keys(Object.assign({},d)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}n.exports=A()?Object.assign:function(o,a){for(var p,h=c(o),d,g=1;g<arguments.length;g++){p=Object(arguments[g]);for(var f in p)i.call(p,f)&&(h[f]=p[f]);if(u){d=u(p);for(var w=0;w<d.length;w++)s.call(p,d[w])&&(h[d[w]]=p[d[w]])}}return h}},{}],23:[function(r,n,l){var u=arguments[3],i=arguments[4],s=arguments[5],c=JSON.stringify;n.exports=function(A,o){for(var a,p=Object.keys(s),h=0,d=p.length;h<d;h++){var g=p[h],f=s[g].exports;if(f===A||f&&f.default===A){a=g;break}}if(!a){a=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var w={},h=0,d=p.length;h<d;h++){var g=p[h];w[g]=g}i[a]=["function(require,module,exports){"+A+"(self); }",w]}var B=Math.floor(Math.pow(16,8)*Math.random()).toString(16),b={};b[a]=a,i[B]=["function(require,module,exports){var f = require("+c(a)+");(f.default ? f.default : f)(self);}",b];var E={};j(B);function j(M){E[M]=!0;for(var R in i[M][1]){var P=i[M][1][R];E[P]||j(P)}}var D="("+u+")({"+Object.keys(E).map(function(M){return c(M)+":["+i[M][0]+","+c(i[M][1])+"]"}).join(",")+"},{},["+c(B)+"])",x=window.URL||window.webkitURL||window.mozURL||window.msURL,I=new Blob([D],{type:"text/javascript"});if(o&&o.bare)return I;var k=x.createObjectURL(I),U=new Worker(k);return U.objectURL=k,U}},{}],"/index.js":[function(r,n,l){function u(m,C){return o(m)||A(m,C)||s(m,C)||i()}function i(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s(m,C){if(m){if(typeof m=="string")return c(m,C);var y=Object.prototype.toString.call(m).slice(8,-1);if(y==="Object"&&m.constructor&&(y=m.constructor.name),y==="Map"||y==="Set")return Array.from(m);if(y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return c(m,C)}}function c(m,C){(C==null||C>m.length)&&(C=m.length);for(var y=0,_=new Array(C);y<C;y++)_[y]=m[y];return _}function A(m,C){var y=m==null?null:typeof Symbol<"u"&&m[Symbol.iterator]||m["@@iterator"];if(y!=null){var _=[],Q=!0,O=!1,S,F;try{for(y=y.call(m);!(Q=(S=y.next()).done)&&(_.push(S.value),!(C&&_.length===C));Q=!0);}catch(G){O=!0,F=G}finally{try{!Q&&y.return!=null&&y.return()}finally{if(O)throw F}}return _}}function o(m){if(Array.isArray(m))return m}var a=r("object-assign"),p=r("webworkify"),h=r("./lib/mathlib"),d=r("./lib/pool"),g=r("./lib/utils"),f=r("./lib/worker"),w=r("./lib/stepper"),B=r("./lib/tiler"),b=r("./lib/mm_resize/resize_filter_info"),E={},j=!1;try{typeof navigator<"u"&&navigator.userAgent&&(j=navigator.userAgent.indexOf("Safari")>=0)}catch{}var D=1;typeof navigator<"u"&&(D=Math.min(navigator.hardwareConcurrency||1,4));var x={tile:1024,concurrency:D,features:["js","wasm","ww"],idle:2e3,createCanvas:function(m,C){var y=document.createElement("canvas");return y.width=m,y.height=C,y}},I={filter:"mks2013",unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},k=!1,U=!1,M=!1,R=!1,P=!1;function L(){return{value:p(f),destroy:function(){if(this.value.terminate(),typeof window<"u"){var m=window.URL||window.webkitURL||window.mozURL||window.msURL;m&&m.revokeObjectURL&&this.value.objectURL&&m.revokeObjectURL(this.value.objectURL)}}}}function T(m){if(!(this instanceof T))return new T(m);this.options=a({},x,m||{});var C="lk_".concat(this.options.concurrency);this.__limit=E[C]||g.limiter(this.options.concurrency),E[C]||(E[C]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}T.prototype.init=function(){var m=this;if(this.__initPromise)return this.__initPromise;if(typeof ImageData<"u"&&typeof Uint8ClampedArray<"u")try{new ImageData(new Uint8ClampedArray(400),10,10),k=!0}catch{}typeof ImageBitmap<"u"&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?U=!0:this.debug("ImageBitmap does not support .close(), disabled"));var C=this.options.features.slice();if(C.indexOf("all")>=0&&(C=["cib","wasm","js","ww"]),this.__requested_features=C,this.__mathlib=new h(C),C.indexOf("ww")>=0&&typeof window<"u"&&"Worker"in window)try{var y=r("webworkify")(function(){});y.terminate(),this.features.ww=!0;var _="wp_".concat(JSON.stringify(this.options));E[_]?this.__workersPool=E[_]:(this.__workersPool=new d(L,this.options.idle),E[_]=this.__workersPool)}catch{}var Q=this.__mathlib.init().then(function(G){a(m.features,G.features)}),O;U?O=g.cib_support(this.options.createCanvas).then(function(G){if(m.features.cib&&C.indexOf("cib")<0){m.debug("createImageBitmap() resize supported, but disabled by config");return}C.indexOf("cib")>=0&&(m.features.cib=G)}):O=Promise.resolve(!1),M=g.can_use_canvas(this.options.createCanvas);var S;U&&k&&C.indexOf("ww")!==-1?S=g.worker_offscreen_canvas_support():S=Promise.resolve(!1),S=S.then(function(G){R=G});var F=g.cib_can_use_region().then(function(G){P=G});return this.__initPromise=Promise.all([Q,O,S,F]).then(function(){return m}),this.__initPromise},T.prototype.__invokeResize=function(m,C){var y=this;return C.__mathCache=C.__mathCache||{},Promise.resolve().then(function(){return y.features.ww?new Promise(function(_,Q){var O=y.__workersPool.acquire();C.cancelToken&&C.cancelToken.catch(function(F){return Q(F)}),O.value.onmessage=function(F){O.release(),F.data.err?Q(F.data.err):_(F.data)};var S=[];m.src&&S.push(m.src.buffer),m.srcBitmap&&S.push(m.srcBitmap),O.value.postMessage({opts:m,features:y.__requested_features,preload:{wasm_nodule:y.__mathlib.__}},S)}):{data:y.__mathlib.resizeAndUnsharp(m,C.__mathCache)}})},T.prototype.__extractTileData=function(m,C,y,_,Q){if(this.features.ww&&R&&(g.isCanvas(C)||P))return this.debug("Create tile for OffscreenCanvas"),createImageBitmap(_.srcImageBitmap||C,m.x,m.y,m.width,m.height).then(function(F){return Q.srcBitmap=F,Q});if(g.isCanvas(C))return _.srcCtx||(_.srcCtx=C.getContext("2d")),this.debug("Get tile pixel data"),Q.src=_.srcCtx.getImageData(m.x,m.y,m.width,m.height).data,Q;this.debug("Draw tile imageBitmap/image to temporary canvas");var O=this.options.createCanvas(m.width,m.height),S=O.getContext("2d");return S.globalCompositeOperation="copy",S.drawImage(_.srcImageBitmap||C,m.x,m.y,m.width,m.height,0,0,m.width,m.height),this.debug("Get tile pixel data"),Q.src=S.getImageData(0,0,m.width,m.height).data,O.width=O.height=0,Q},T.prototype.__landTileData=function(m,C,y){var _;if(this.debug("Convert raw rgba tile result to ImageData"),C.bitmap)return y.toCtx.drawImage(C.bitmap,m.toX,m.toY),null;if(k)_=new ImageData(new Uint8ClampedArray(C.data),m.toWidth,m.toHeight);else if(_=y.toCtx.createImageData(m.toWidth,m.toHeight),_.data.set)_.data.set(C.data);else for(var Q=_.data.length-1;Q>=0;Q--)_.data[Q]=C.data[Q];return this.debug("Draw tile"),j?y.toCtx.putImageData(_,m.toX,m.toY,m.toInnerX-m.toX,m.toInnerY-m.toY,m.toInnerWidth+1e-5,m.toInnerHeight+1e-5):y.toCtx.putImageData(_,m.toX,m.toY,m.toInnerX-m.toX,m.toInnerY-m.toY,m.toInnerWidth,m.toInnerHeight),null},T.prototype.__tileAndResize=function(m,C,y){var _=this,Q={srcCtx:null,srcImageBitmap:null,isImageBitmapReused:!1,toCtx:null},O=function(S){return _.__limit(function(){if(y.canceled)return y.cancelToken;var F={width:S.width,height:S.height,toWidth:S.toWidth,toHeight:S.toHeight,scaleX:S.scaleX,scaleY:S.scaleY,offsetX:S.offsetX,offsetY:S.offsetY,filter:y.filter,unsharpAmount:y.unsharpAmount,unsharpRadius:y.unsharpRadius,unsharpThreshold:y.unsharpThreshold};return _.debug("Invoke resize math"),Promise.resolve(F).then(function(G){return _.__extractTileData(S,m,y,Q,G)}).then(function(G){return _.debug("Invoke resize math"),_.__invokeResize(G,y)}).then(function(G){return y.canceled?y.cancelToken:(Q.srcImageData=null,_.__landTileData(S,G,Q))})})};return Promise.resolve().then(function(){if(Q.toCtx=C.getContext("2d"),g.isCanvas(m))return null;if(g.isImageBitmap(m))return Q.srcImageBitmap=m,Q.isImageBitmapReused=!0,null;if(g.isImage(m))return U?(_.debug("Decode image via createImageBitmap"),createImageBitmap(m).then(function(S){Q.srcImageBitmap=S}).catch(function(S){return null})):null;throw new Error('Pica: ".from" should be Image, Canvas or ImageBitmap')}).then(function(){if(y.canceled)return y.cancelToken;_.debug("Calculate tiles");var S=B({width:y.width,height:y.height,srcTileSize:_.options.tile,toWidth:y.toWidth,toHeight:y.toHeight,destTileBorder:y.__destTileBorder}),F=S.map(function(q){return O(q)});function G(q){q.srcImageBitmap&&(q.isImageBitmapReused||q.srcImageBitmap.close(),q.srcImageBitmap=null)}return _.debug("Process tiles"),Promise.all(F).then(function(){return _.debug("Finished!"),G(Q),C},function(q){throw G(Q),q})})},T.prototype.__processStages=function(m,C,y,_){var Q=this;if(_.canceled)return _.cancelToken;var O=m.shift(),S=u(O,2),F=S[0],G=S[1],q=m.length===0,K;q||b.q2f.indexOf(_.filter)<0?K=_.filter:_.filter==="box"?K="box":K="hamming",_=a({},_,{toWidth:F,toHeight:G,filter:K});var Y;return q||(Y=this.options.createCanvas(F,G)),this.__tileAndResize(C,q?y:Y,_).then(function(){return q?y:(_.width=F,_.height=G,Q.__processStages(m,Y,y,_))}).then(function(Pe){return Y&&(Y.width=Y.height=0),Pe})},T.prototype.__resizeViaCreateImageBitmap=function(m,C,y){var _=this,Q=C.getContext("2d");return this.debug("Resize via createImageBitmap()"),createImageBitmap(m,{resizeWidth:y.toWidth,resizeHeight:y.toHeight,resizeQuality:g.cib_quality_name(b.f2q[y.filter])}).then(function(O){if(y.canceled)return y.cancelToken;if(!y.unsharpAmount)return Q.drawImage(O,0,0),O.close(),Q=null,_.debug("Finished!"),C;_.debug("Unsharp result");var S=_.options.createCanvas(y.toWidth,y.toHeight),F=S.getContext("2d");F.drawImage(O,0,0),O.close();var G=F.getImageData(0,0,y.toWidth,y.toHeight);return _.__mathlib.unsharp_mask(G.data,y.toWidth,y.toHeight,y.unsharpAmount,y.unsharpRadius,y.unsharpThreshold),Q.putImageData(G,0,0),S.width=S.height=0,G=F=S=Q=null,_.debug("Finished!"),C})},T.prototype.resize=function(m,C,y){var _=this;this.debug("Start resize...");var Q=a({},I);if(isNaN(y)?y&&(Q=a(Q,y)):Q=a(Q,{quality:y}),Q.toWidth=C.width,Q.toHeight=C.height,Q.width=m.naturalWidth||m.width,Q.height=m.naturalHeight||m.height,Object.prototype.hasOwnProperty.call(Q,"quality")){if(Q.quality<0||Q.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(Q.quality));Q.filter=b.q2f[Q.quality]}if(C.width===0||C.height===0)return Promise.reject(new Error("Invalid output size: ".concat(C.width,"x").concat(C.height)));Q.unsharpRadius>2&&(Q.unsharpRadius=2),Q.canceled=!1,Q.cancelToken&&(Q.cancelToken=Q.cancelToken.then(function(S){throw Q.canceled=!0,S},function(S){throw Q.canceled=!0,S}));var O=3;return Q.__destTileBorder=Math.ceil(Math.max(O,2.5*Q.unsharpRadius|0)),this.init().then(function(){if(Q.canceled)return Q.cancelToken;if(_.features.cib){if(b.q2f.indexOf(Q.filter)>=0)return _.__resizeViaCreateImageBitmap(m,C,Q);_.debug("cib is enabled, but not supports provided filter, fallback to manual math")}if(!M){var S=new Error("Pica: cannot use getImageData on canvas, make sure fingerprinting protection isn't enabled");throw S.code="ERR_GET_IMAGE_DATA",S}var F=w(Q.width,Q.height,Q.toWidth,Q.toHeight,_.options.tile,Q.__destTileBorder);return _.__processStages(F,m,C,Q)})},T.prototype.resizeBuffer=function(m){var C=this,y=a({},I,m);if(Object.prototype.hasOwnProperty.call(y,"quality")){if(y.quality<0||y.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(y.quality));y.filter=b.q2f[y.quality]}return this.init().then(function(){return C.__mathlib.resizeAndUnsharp(y)})},T.prototype.toBlob=function(m,C,y){return C=C||"image/png",new Promise(function(_){if(m.toBlob){m.toBlob(function(G){return _(G)},C,y);return}if(m.convertToBlob){_(m.convertToBlob({type:C,quality:y}));return}for(var Q=atob(m.toDataURL(C,y).split(",")[1]),O=Q.length,S=new Uint8Array(O),F=0;F<O;F++)S[F]=Q.charCodeAt(F);_(new Blob([S],{type:C}))})},T.prototype.debug=function(){},n.exports=T},{"./lib/mathlib":1,"./lib/mm_resize/resize_filter_info":7,"./lib/pool":13,"./lib/stepper":14,"./lib/tiler":15,"./lib/utils":16,"./lib/worker":17,"object-assign":22,webworkify:23}]},{},[])("/index.js")})})(nt);var ir=nt.exports;const ar=Nt(ir);function it(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?it(Object(r),!0).forEach(function(n){cr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):it(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function or(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function at(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ot(n.key),n)}}function sr(e,t,r){return t&&at(e.prototype,t),r&&at(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function cr(e,t,r){return t=ot(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ae(){return Ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ae.apply(this,arguments)}function lr(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ot(e){var t=lr(e,"string");return typeof t=="symbol"?t:String(t)}var st={exports:{}};(function(e){typeof window>"u"||function(t){var r=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,n=t.Blob&&function(){try{return!!new Blob}catch{return!1}}(),l=n&&t.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),u=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,i=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,s=(n||u)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(c){var A,o,a,p,h,d,g,f,w;if(A=c.match(i),!A)throw new Error("invalid data URI");for(o=A[2]?A[1]:"text/plain"+(A[3]||";charset=US-ASCII"),a=!!A[4],p=c.slice(A[0].length),a?h=atob(p):h=decodeURIComponent(p),d=new ArrayBuffer(h.length),g=new Uint8Array(d),f=0;f<h.length;f+=1)g[f]=h.charCodeAt(f);return n?new Blob([l?g:d],{type:o}):(w=new u,w.append(d),w.getBlob(o))};t.HTMLCanvasElement&&!r.toBlob&&(r.mozGetAsFile?r.toBlob=function(c,A,o){var a=this;setTimeout(function(){o&&r.toDataURL&&s?c(s(a.toDataURL(A,o))):c(a.mozGetAsFile("blob",A))})}:r.toDataURL&&s&&(r.msToBlob?r.toBlob=function(c,A,o){var a=this;setTimeout(function(){(A&&A!=="image/png"||o)&&r.toDataURL&&s?c(s(a.toDataURL(A,o))):c(a.msToBlob(A))})}:r.toBlob=function(c,A,o){var a=this;setTimeout(function(){c(s(a.toDataURL(A,o)))})})),e.exports?e.exports=s:t.dataURLtoBlob=s}(window)})(st);var ct=st.exports,Ar=function(e){return typeof Blob>"u"?!1:e instanceof Blob||Object.prototype.toString.call(e)==="[object Blob]"},lt={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},hr=typeof window<"u"&&typeof window.document<"u",J=hr?window:{},he=function(e){return e>0&&e<1/0},ur=Array.prototype.slice;function Oe(e){return Array.from?Array.from(e):ur.call(e)}var dr=/^image\/.+$/;function Fe(e){return dr.test(e)}function fr(e){var t=Fe(e)?e.substr(6):"";return t==="jpeg"&&(t="jpg"),".".concat(t)}var At=String.fromCharCode;function gr(e,t,r){var n="",l;for(r+=t,l=t;l<r;l+=1)n+=At(e.getUint8(l));return n}var pr=J.btoa;function ht(e,t){for(var r=[],n=8192,l=new Uint8Array(e);l.length>0;)r.push(At.apply(null,Oe(l.subarray(0,n)))),l=l.subarray(n);return"data:".concat(t,";base64,").concat(pr(r.join("")))}function mr(e){var t=new DataView(e),r;try{var n,l,u;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var i=t.byteLength,s=2;s+1<i;){if(t.getUint8(s)===255&&t.getUint8(s+1)===225){l=s;break}s+=1}if(l){var c=l+4,A=l+10;if(gr(t,c,4)==="Exif"){var o=t.getUint16(A);if(n=o===18761,(n||o===19789)&&t.getUint16(A+2,n)===42){var a=t.getUint32(A+4,n);a>=8&&(u=A+a)}}}if(u){var p=t.getUint16(u,n),h,d;for(d=0;d<p;d+=1)if(h=u+d*12+2,t.getUint16(h,n)===274){h+=8,r=t.getUint16(h,n),t.setUint16(h,1,n);break}}}catch{r=1}return r}function wr(e){var t=0,r=1,n=1;switch(e){case 2:r=-1;break;case 3:t=-180;break;case 4:n=-1;break;case 5:t=90,n=-1;break;case 6:t=90;break;case 7:t=90,r=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:r,scaleY:n}}var Ir=/\.\d*(?:0|9){12}\d*$/;function ut(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Ir.test(e)?Math.round(e*t)/t:e}function ee(e){var t=e.aspectRatio,r=e.height,n=e.width,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",u=he(n),i=he(r);if(u&&i){var s=r*t;(l==="contain"||l==="none")&&s>n||l==="cover"&&s<n?r=n/t:n=r*t}else u?r=n/t:i&&(n=r*t);return{width:n,height:r}}function vr(e){for(var t=Oe(new Uint8Array(e)),r=t.length,n=[],l=0;l+3<r;){var u=t[l],i=t[l+1];if(u===255&&i===218)break;if(u===255&&i===216)l+=2;else{var s=t[l+2]*256+t[l+3],c=l+s+2,A=t.slice(l,c);n.push(A),l=c}}return n.reduce(function(o,a){return a[0]===255&&a[1]===225?o.concat(a):o},[])}function yr(e,t){var r=Oe(new Uint8Array(e));if(r[2]!==255||r[3]!==224)return e;var n=r[4]*256+r[5],l=[255,216].concat(t,r.slice(4+n));return new Uint8Array(l)}var br=J.ArrayBuffer,Le=J.FileReader,X=J.URL||J.webkitURL,Br=/\.\w+$/,Er=J.Compressor,xr=function(){function e(t,r){or(this,e),this.file=t,this.exif=[],this.image=new Image,this.options=le(le({},lt),r),this.aborted=!1,this.result=null,this.init()}return sr(e,[{key:"init",value:function(){var t=this,r=this.file,n=this.options;if(!Ar(r)){this.fail(new Error("The first argument must be a File or Blob object."));return}var l=r.type;if(!Fe(l)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!X||!Le){this.fail(new Error("The current browser does not support image compression."));return}br||(n.checkOrientation=!1,n.retainExif=!1);var u=l==="image/jpeg",i=u&&n.checkOrientation,s=u&&n.retainExif;if(X&&!i&&!s)this.load({url:X.createObjectURL(r)});else{var c=new Le;this.reader=c,c.onload=function(A){var o=A.target,a=o.result,p={},h=1;i&&(h=mr(a),h>1&&Ae(p,wr(h))),s&&(t.exif=vr(a)),i||s?!X||h>1?p.url=ht(a,l):p.url=X.createObjectURL(r):p.url=a,t.load(p)},c.onabort=function(){t.fail(new Error("Aborted to read the image with FileReader."))},c.onerror=function(){t.fail(new Error("Failed to read the image with FileReader."))},c.onloadend=function(){t.reader=null},i||s?c.readAsArrayBuffer(r):c.readAsDataURL(r)}}},{key:"load",value:function(t){var r=this,n=this.file,l=this.image;l.onload=function(){r.draw(le(le({},t),{},{naturalWidth:l.naturalWidth,naturalHeight:l.naturalHeight}))},l.onabort=function(){r.fail(new Error("Aborted to load the image."))},l.onerror=function(){r.fail(new Error("Failed to load the image."))},J.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(J.navigator.userAgent)&&(l.crossOrigin="anonymous"),l.alt=n.name,l.src=t.url}},{key:"draw",value:function(t){var r=this,n=t.naturalWidth,l=t.naturalHeight,u=t.rotate,i=u===void 0?0:u,s=t.scaleX,c=s===void 0?1:s,A=t.scaleY,o=A===void 0?1:A,a=this.file,p=this.image,h=this.options,d=document.createElement("canvas"),g=d.getContext("2d"),f=Math.abs(i)%180===90,w=(h.resize==="contain"||h.resize==="cover")&&he(h.width)&&he(h.height),B=Math.max(h.maxWidth,0)||1/0,b=Math.max(h.maxHeight,0)||1/0,E=Math.max(h.minWidth,0)||0,j=Math.max(h.minHeight,0)||0,D=n/l,x=h.width,I=h.height;if(f){var k=[b,B];B=k[0],b=k[1];var U=[j,E];E=U[0],j=U[1];var M=[I,x];x=M[0],I=M[1]}w&&(D=x/I);var R=ee({aspectRatio:D,width:B,height:b},"contain");B=R.width,b=R.height;var P=ee({aspectRatio:D,width:E,height:j},"cover");if(E=P.width,j=P.height,w){var L=ee({aspectRatio:D,width:x,height:I},h.resize);x=L.width,I=L.height}else{var T=ee({aspectRatio:D,width:x,height:I}),m=T.width;x=m===void 0?n:m;var C=T.height;I=C===void 0?l:C}x=Math.floor(ut(Math.min(Math.max(x,E),B))),I=Math.floor(ut(Math.min(Math.max(I,j),b)));var y=-x/2,_=-I/2,Q=x,O=I,S=[];if(w){var F=0,G=0,q=n,K=l,Y=ee({aspectRatio:D,width:n,height:l},{contain:"cover",cover:"contain"}[h.resize]);q=Y.width,K=Y.height,F=(n-q)/2,G=(l-K)/2,S.push(F,G,q,K)}if(S.push(y,_,Q,O),f){var Pe=[I,x];x=Pe[0],I=Pe[1]}d.width=x,d.height=I,Fe(h.mimeType)||(h.mimeType=a.type);var Tt="transparent";a.size>h.convertSize&&h.convertTypes.indexOf(h.mimeType)>=0&&(h.mimeType="image/jpeg");var Ot=h.mimeType==="image/jpeg";if(Ot&&(Tt="#fff"),g.fillStyle=Tt,g.fillRect(0,0,x,I),h.beforeDraw&&h.beforeDraw.call(this,g,d),!this.aborted&&(g.save(),g.translate(x/2,I/2),g.rotate(i*Math.PI/180),g.scale(c,o),g.drawImage.apply(g,[p].concat(S)),g.restore(),h.drew&&h.drew.call(this,g,d),!this.aborted)){var Ft=function(oe){if(!r.aborted){var Lt=function(se){return r.done({naturalWidth:n,naturalHeight:l,result:se})};if(oe&&Ot&&h.retainExif&&r.exif&&r.exif.length>0){var Gt=function(se){return Lt(ct(ht(yr(se,r.exif),h.mimeType)))};if(oe.arrayBuffer)oe.arrayBuffer().then(Gt).catch(function(){r.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var V=new Le;r.reader=V,V.onload=function(se){var Ln=se.target;Gt(Ln.result)},V.onabort=function(){r.fail(new Error("Aborted to read the compressed image with FileReader."))},V.onerror=function(){r.fail(new Error("Failed to read the compressed image with FileReader."))},V.onloadend=function(){r.reader=null},V.readAsArrayBuffer(oe)}}else Lt(oe)}};d.toBlob?d.toBlob(Ft,h.mimeType,h.quality):Ft(ct(d.toDataURL(h.mimeType,h.quality)))}}},{key:"done",value:function(t){var r=t.naturalWidth,n=t.naturalHeight,l=t.result,u=this.file,i=this.image,s=this.options;if(X&&i.src.indexOf("blob:")===0&&X.revokeObjectURL(i.src),l)if(s.strict&&!s.retainExif&&l.size>u.size&&s.mimeType===u.type&&!(s.width>r||s.height>n||s.minWidth>r||s.minHeight>n||s.maxWidth<r||s.maxHeight<n))l=u;else{var c=new Date;l.lastModified=c.getTime(),l.lastModifiedDate=c,l.name=u.name,l.name&&l.type!==u.type&&(l.name=l.name.replace(Br,fr(l.type)))}else l=u;this.result=l,s.success&&s.success.call(this,l)}},{key:"fail",value:function(t){var r=this.options;if(r.error)r.error.call(this,t);else throw t}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=Er,e}},{key:"setDefaults",value:function(t){Ae(lt,t)}}]),e}();function Cr(){return window.navigator.brave!=null?window.navigator.brave.isBrave.name=="isBrave":!1}let dt;rt=W.forwardRef((e,t)=>{const{imageSrc:r,imageType:n,onImageCropped:l,width:u,height:i}=e,[s,c]=W.useState({x:0,y:0}),[A,o]=W.useState(1),[a,p]=W.useState(null);W.useState(null);const h=W.useCallback((j,D)=>{p(D)},[]);W.useImperativeHandle(t,()=>({async showCroppedImage(){try{if(r){const j=await B(r,a),D=await f(j),x=Cr()?await g(j):await d(D),I=await f(x);l(I)}else return"Nothing"}catch(j){console.error(j)}}}));async function d(j){const D=ar();let x=await b(j);const I=document.createElement("canvas");return I.height=128,I.width=128,new Promise(k=>{k(D.resize(x,I,{unsharpAmount:100,unsharpRadius:.7,unsharpThreshold:2}).then(U=>D.toBlob(U,n,1)))})}async function g(j){return new Promise((D,x)=>{new xr(j,{quality:1,strict:!0,maxWidth:128,maxHeight:128,checkOrientation:!1,success:D,error:x})})}const f=async j=>await w(j),w=j=>new Promise((D,x)=>{const I=new FileReader;I.readAsDataURL(j),I.onload=()=>D(I.result),I.onerror=k=>x(k)});async function B(j,D){const x=await b(j),I=document.createElement("canvas");I.width=D.width,I.height=D.height;const k=I.getContext("2d"),U="none.jpg";return k.drawImage(x,D.x,D.y,D.width,D.height,0,0,D.width,D.height),new Promise((M,R)=>{I.toBlob(P=>{M(new File([P],U,{type:n,lastModified:Date.now()}))},n,1)})}const b=j=>new Promise((D,x)=>{const I=new Image;I.addEventListener("load",()=>D(I)),I.addEventListener("error",k=>x(k)),I.setAttribute("crossOrigin","anonymous"),I.src=j}),E=j=>{o(j)};return v.jsx(W.Fragment,{children:v.jsx(dt,{children:v.jsx(Nn,{image:r,crop:s,zoom:A,aspect:1,onCropChange:c,onCropComplete:h,onZoomChange:E,style:{containerStyle:{width:u||"250px",height:i||"250px",position:"relative",borderRadius:"20px"}}})})})}),dt=Wn.div`
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  `;var Ge={exports:{}},He={exports:{}},Qr=zn(),ft=qn().EventEmitter;He.exports=z,He.exports.default=z;function z(e){if(!(this instanceof z))return new z(e);ft.call(this),e=e||{},this.concurrency=e.concurrency||1/0,this.timeout=e.timeout||0,this.autostart=e.autostart||!1,this.results=e.results||null,this.pending=0,this.session=0,this.running=!1,this.jobs=[],this.timers={}}Qr(z,ft);var _r=["pop","shift","indexOf","lastIndexOf"];_r.forEach(function(e){z.prototype[e]=function(){return Array.prototype[e].apply(this.jobs,arguments)}}),z.prototype.slice=function(e,t){return this.jobs=this.jobs.slice(e,t),this},z.prototype.reverse=function(){return this.jobs.reverse(),this};var jr=["push","unshift","splice"];jr.forEach(function(e){z.prototype[e]=function(){var t=Array.prototype[e].apply(this.jobs,arguments);return this.autostart&&this.start(),t}}),Object.defineProperty(z.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),z.prototype.start=function(e){if(e&&Ur.call(this,e),this.running=!0,this.pending>=this.concurrency)return;if(this.jobs.length===0){this.pending===0&&Ne.call(this);return}var t=this,r=this.jobs.shift(),n=!0,l=this.session,u=null,i=!1,s=null,c=r.timeout||this.timeout;function A(a,p){n&&t.session===l&&(n=!1,t.pending--,u!==null&&(delete t.timers[u],clearTimeout(u)),a?t.emit("error",a,r):i===!1&&(s!==null&&(t.results[s]=Array.prototype.slice.call(arguments,1)),t.emit("success",p,r)),t.session===l&&(t.pending===0&&t.jobs.length===0?Ne.call(t):t.running&&t.start()))}c&&(u=setTimeout(function(){i=!0,t.listeners("timeout").length>0?t.emit("timeout",A,r):A()},c),this.timers[u]=u),this.results&&(s=this.results.length,this.results[s]=null),this.pending++,t.emit("start",r);var o=r(A);o&&o.then&&typeof o.then=="function"&&o.then(function(a){return A(null,a)}).catch(function(a){return A(a||!0)}),this.running&&this.jobs.length>0&&this.start()},z.prototype.stop=function(){this.running=!1},z.prototype.end=function(e){kr.call(this),this.jobs.length=0,this.pending=0,Ne.call(this,e)};function kr(){for(var e in this.timers){var t=this.timers[e];delete this.timers[e],clearTimeout(t)}}function Ur(e){var t=this;this.on("error",r),this.on("end",n);function r(l){t.end(l)}function n(l){t.removeListener("error",r),t.removeListener("end",n),e(l,this.results)}}function Ne(e){this.session++,this.running=!1,this.emit("end",e)}var Dr=He.exports,te={},ue={};Object.defineProperty(ue,"__esModule",{value:!0}),ue.BMP=void 0,ue.BMP={validate(e){return e.toString("ascii",0,2)==="BM"},calculate(e){return{height:Math.abs(e.readInt32LE(22)),width:e.readUInt32LE(18)}}};var de={},re={};Object.defineProperty(re,"__esModule",{value:!0}),re.ICO=void 0;const Mr=1,Pr=6,Sr=16;function gt(e,t){const r=e.readUInt8(t);return r===0?256:r}function pt(e,t){const r=Pr+t*Sr;return{height:gt(e,r+1),width:gt(e,r)}}re.ICO={validate(e){return e.readUInt16LE(0)!==0?!1:e.readUInt16LE(2)===Mr},calculate(e){const t=e.readUInt16LE(4),r=pt(e,0);if(t===1)return r;const n=[r];for(let l=1;l<t;l+=1)n.push(pt(e,l));return{height:r.height,images:n,width:r.width}}},Object.defineProperty(de,"__esModule",{value:!0}),de.CUR=void 0;const Rr=re,Tr=2;de.CUR={validate(e){return e.readUInt16LE(0)!==0?!1:e.readUInt16LE(2)===Tr},calculate(e){return Rr.ICO.calculate(e)}};var fe={};Object.defineProperty(fe,"__esModule",{value:!0}),fe.DDS=void 0,fe.DDS={validate(e){return e.readUInt32LE(0)===542327876},calculate(e){return{height:e.readUInt32LE(12),width:e.readUInt32LE(16)}}};var ge={};Object.defineProperty(ge,"__esModule",{value:!0}),ge.GIF=void 0;const Or=/^GIF8[79]a/;ge.GIF={validate(e){const t=e.toString("ascii",0,6);return Or.test(t)},calculate(e){return{height:e.readUInt16LE(8),width:e.readUInt16LE(6)}}};var pe={};Object.defineProperty(pe,"__esModule",{value:!0}),pe.ICNS=void 0;const Fr=8,Lr=4,Gr=4,Hr={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};function mt(e,t){const r=t+Gr;return[e.toString("ascii",t,r),e.readUInt32BE(r)]}function wt(e){const t=Hr[e];return{width:t,height:t,type:e}}pe.ICNS={validate(e){return e.toString("ascii",0,4)==="icns"},calculate(e){const t=e.length,r=e.readUInt32BE(Lr);let n=Fr,l=mt(e,n),u=wt(l[0]);if(n+=l[1],n===r)return u;const i={height:u.height,images:[u],width:u.width};for(;n<r&&n<t;)l=mt(e,n),u=wt(l[0]),n+=l[1],i.images.push(u);return i}};var me={};Object.defineProperty(me,"__esModule",{value:!0}),me.J2C=void 0,me.J2C={validate(e){return e.toString("hex",0,4)==="ff4fff51"},calculate(e){return{height:e.readUInt32BE(12),width:e.readUInt32BE(8)}}};var we={};Object.defineProperty(we,"__esModule",{value:!0}),we.JP2=void 0;const Ie={ftyp:"66747970",ihdr:"69686472",jp2h:"6a703268",jp__:"6a502020",rreq:"72726571",xml_:"786d6c20"},Nr=e=>{const t=e.readUInt8(0);let r=1+2*t;const n=e.readUInt16BE(r)*(2+t);r=r+2+n;const l=e.readUInt16BE(r)*(16+t);return r+2+l},It=e=>({height:e.readUInt32BE(4),width:e.readUInt32BE(8)});we.JP2={validate(e){const t=e.toString("hex",4,8),r=e.readUInt32BE(0);if(t!==Ie.jp__||r<1)return!1;const n=r+4,l=e.readUInt32BE(r);return e.slice(n,n+l).toString("hex",0,4)===Ie.ftyp},calculate(e){const t=e.readUInt32BE(0),r=e.readUInt16BE(t+2);let n=t+4+r;switch(e.toString("hex",n,n+4)){case Ie.rreq:return n=n+4+4+Nr(e.slice(n+4)),It(e.slice(n+8,n+24));case Ie.jp2h:return It(e.slice(n+8,n+24));default:throw new TypeError("Unsupported header found: "+e.toString("ascii",n,n+4))}}};var ve={},ne={};Object.defineProperty(ne,"__esModule",{value:!0}),ne.readUInt=void 0;function Wr(e,t,r,n){r=r||0;const l=n?"BE":"LE",u="readUInt"+t+l;return e[u].call(e,r)}ne.readUInt=Wr,Object.defineProperty(ve,"__esModule",{value:!0}),ve.JPG=void 0;const ie=ne,qr="45786966",zr=2,We=6,Yr=2,Jr="4d4d",Kr="4949",vt=12,Xr=2;function Zr(e){return e.toString("hex",2,6)===qr}function Vr(e,t){return{height:e.readUInt16BE(t),width:e.readUInt16BE(t+2)}}function $r(e,t){const r=We+8,n=ie.readUInt(e,16,r,t);for(let l=0;l<n;l++){const u=r+Xr+l*vt,i=u+vt;if(u>e.length)return;const s=e.slice(u,i);if(ie.readUInt(s,16,0,t)===274)return ie.readUInt(s,16,2,t)!==3||ie.readUInt(s,32,4,t)!==1?void 0:ie.readUInt(s,16,8,t)}}function en(e,t){const r=e.slice(zr,t),n=r.toString("hex",We,We+Yr),l=n===Jr;if(l||n===Kr)return $r(r,l)}function tn(e,t){if(t>e.length)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(e[t]!==255)throw new TypeError("Invalid JPG, marker table corrupted")}ve.JPG={validate(e){return e.toString("hex",0,2)==="ffd8"},calculate(e){e=e.slice(4);let t,r;for(;e.length;){const n=e.readUInt16BE(0);if(Zr(e)&&(t=en(e,n)),tn(e,n),r=e[n+1],r===192||r===193||r===194){const l=Vr(e,n+5);return t?{height:l.height,orientation:t,width:l.width}:l}e=e.slice(n+2)}throw new TypeError("Invalid JPG, no size found")}};var ye={};Object.defineProperty(ye,"__esModule",{value:!0}),ye.KTX=void 0;const rn="KTX 11";ye.KTX={validate(e){return rn===e.toString("ascii",1,7)},calculate(e){return{height:e.readUInt32LE(40),width:e.readUInt32LE(36)}}};var be={};Object.defineProperty(be,"__esModule",{value:!0}),be.PNG=void 0;const nn=`PNG\r

`,an="IHDR",yt="CgBI";be.PNG={validate(e){if(nn===e.toString("ascii",1,8)){let t=e.toString("ascii",12,16);if(t===yt&&(t=e.toString("ascii",28,32)),t!==an)throw new TypeError("Invalid PNG");return!0}return!1},calculate(e){return e.toString("ascii",12,16)===yt?{height:e.readUInt32BE(36),width:e.readUInt32BE(32)}:{height:e.readUInt32BE(20),width:e.readUInt32BE(16)}}};var Be={};Object.defineProperty(Be,"__esModule",{value:!0}),Be.PNM=void 0;const bt={P1:"pbm/ascii",P2:"pgm/ascii",P3:"ppm/ascii",P4:"pbm",P5:"pgm",P6:"ppm",P7:"pam",PF:"pfm"},on=Object.keys(bt),Bt={default:e=>{let t=[];for(;e.length>0;){const r=e.shift();if(r[0]!=="#"){t=r.split(" ");break}}if(t.length===2)return{height:parseInt(t[1],10),width:parseInt(t[0],10)};throw new TypeError("Invalid PNM")},pam:e=>{const t={};for(;e.length>0;){const r=e.shift();if(r.length>16||r.charCodeAt(0)>128)continue;const[n,l]=r.split(" ");if(n&&l&&(t[n.toLowerCase()]=parseInt(l,10)),t.height&&t.width)break}if(t.height&&t.width)return{height:t.height,width:t.width};throw new TypeError("Invalid PAM")}};Be.PNM={validate(e){const t=e.toString("ascii",0,2);return on.includes(t)},calculate(e){const t=e.toString("ascii",0,2),r=bt[t],n=e.toString("ascii",3).split(/[\r\n]+/);return(Bt[r]||Bt.default)(n)}};var Ee={};Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.PSD=void 0,Ee.PSD={validate(e){return e.toString("ascii",0,4)==="8BPS"},calculate(e){return{height:e.readUInt32BE(14),width:e.readUInt32BE(18)}}};var xe={};Object.defineProperty(xe,"__esModule",{value:!0}),xe.SVG=void 0;const Et=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,Ce={height:/\sheight=(['"])([^%]+?)\1/,root:Et,viewbox:/\sviewBox=(['"])(.+?)\1/,width:/\swidth=(['"])([^%]+?)\1/},qe=2.54,sn={cm:96/qe,em:16,ex:8,m:96/qe*100,mm:96/qe/10,pc:96/72/12,pt:96/72};function Qe(e){const t=/([0-9.]+)([a-z]*)/.exec(e);if(t)return Math.round(parseFloat(t[1])*(sn[t[2]]||1))}function cn(e){const t=e.split(" ");return{height:Qe(t[3]),width:Qe(t[2])}}function ln(e){const t=e.match(Ce.width),r=e.match(Ce.height),n=e.match(Ce.viewbox);return{height:r&&Qe(r[2]),viewbox:n&&cn(n[2]),width:t&&Qe(t[2])}}function An(e){return{height:e.height,width:e.width}}function hn(e,t){const r=t.width/t.height;return e.width?{height:Math.floor(e.width/r),width:e.width}:e.height?{height:e.height,width:Math.floor(e.height*r)}:{height:t.height,width:t.width}}xe.SVG={validate(e){const t=String(e);return Et.test(t)},calculate(e){const t=e.toString("utf8").match(Ce.root);if(t){const r=ln(t[0]);if(r.width&&r.height)return An(r);if(r.viewbox)return hn(r,r.viewbox)}throw new TypeError("Invalid SVG")}};var _e={};Object.defineProperty(_e,"__esModule",{value:!0}),_e.TIFF=void 0;const je=Wt,Z=ne;function un(e,t,r){const n=Z.readUInt(e,32,4,r);let l=1024;const u=je.statSync(t).size;n+l>u&&(l=u-n-10);const i=Re.alloc(l),s=je.openSync(t,"r");return je.readSync(s,i,0,l,n),je.closeSync(s),i.slice(2)}function dn(e,t){const r=Z.readUInt(e,16,8,t);return(Z.readUInt(e,16,10,t)<<16)+r}function fn(e){if(e.length>24)return e.slice(12)}function gn(e,t){const r={};let n=e;for(;n&&n.length;){const l=Z.readUInt(n,16,0,t),u=Z.readUInt(n,16,2,t),i=Z.readUInt(n,32,4,t);if(l===0)break;i===1&&(u===3||u===4)&&(r[l]=dn(n,t)),n=fn(n)}return r}function pn(e){const t=e.toString("ascii",0,2);if(t==="II")return"LE";if(t==="MM")return"BE"}const mn=["49492a00","4d4d002a"];_e.TIFF={validate(e){return mn.includes(e.toString("hex",0,4))},calculate(e,t){if(!t)throw new TypeError("Tiff doesn't support buffer");const r=pn(e)==="BE",n=un(e,t,r),l=gn(n,r),u=l[256],i=l[257];if(!u||!i)throw new TypeError("Invalid Tiff. Missing tags");return{height:i,width:u}}};var ke={};Object.defineProperty(ke,"__esModule",{value:!0}),ke.WEBP=void 0;function wn(e){return{height:1+e.readUIntLE(7,3),width:1+e.readUIntLE(4,3)}}function In(e){return{height:1+((e[4]&15)<<10|e[3]<<2|(e[2]&192)>>6),width:1+((e[2]&63)<<8|e[1])}}function vn(e){return{height:e.readInt16LE(8)&16383,width:e.readInt16LE(6)&16383}}ke.WEBP={validate(e){const t=e.toString("ascii",0,4)==="RIFF",r=e.toString("ascii",8,12)==="WEBP",n=e.toString("ascii",12,15)==="VP8";return t&&r&&n},calculate(e){const t=e.toString("ascii",12,16);if(e=e.slice(20,30),t==="VP8X"){const n=e[0],l=(n&192)===0,u=(n&1)===0;if(l&&u)return wn(e);throw new TypeError("Invalid WebP")}if(t==="VP8 "&&e[0]!==47)return vn(e);const r=e.toString("hex",3,6);if(t==="VP8L"&&r!=="9d012a")return In(e);throw new TypeError("Invalid WebP")}},Object.defineProperty(te,"__esModule",{value:!0}),te.typeHandlers=void 0;const yn=ue,bn=de,Bn=fe,En=ge,xn=pe,Cn=re,Qn=me,_n=we,jn=ve,kn=ye,Un=be,Dn=Be,Mn=Ee,Pn=xe,Sn=_e,Rn=ke;te.typeHandlers={bmp:yn.BMP,cur:bn.CUR,dds:Bn.DDS,gif:En.GIF,icns:xn.ICNS,ico:Cn.ICO,j2c:Qn.J2C,jp2:_n.JP2,jpg:jn.JPG,ktx:kn.KTX,png:Un.PNG,pnm:Dn.PNM,psd:Mn.PSD,svg:Pn.SVG,tiff:Sn.TIFF,webp:Rn.WEBP};var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.detector=void 0;const ze=te,Tn=Object.keys(ze.typeHandlers),xt={56:"psd",66:"bmp",68:"dds",71:"gif",73:"tiff",77:"tiff",82:"webp",105:"icns",137:"png",255:"jpg"};function On(e){const t=e[0];if(t in xt){const n=xt[t];if(ze.typeHandlers[n].validate(e))return n}const r=n=>ze.typeHandlers[n].validate(e);return Tn.find(r)}Ue.detector=On,function(e,t){var r=qt&&qt.__awaiter||function(d,g,f,w){function B(b){return b instanceof f?b:new f(function(E){E(b)})}return new(f||(f=Promise))(function(b,E){function j(I){try{x(w.next(I))}catch(k){E(k)}}function D(I){try{x(w.throw(I))}catch(k){E(k)}}function x(I){I.done?b(I.value):B(I.value).then(j,D)}x((w=w.apply(d,g||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.types=t.setConcurrency=t.imageSize=void 0;const n=Wt,l=Jn,u=Dr,i=te,s=Ue,c=512*1024,A=new u.default({concurrency:100,autostart:!0});function o(d,g){const f=s.detector(d);if(f&&f in i.typeHandlers){const w=i.typeHandlers[f].calculate(d,g);if(w!==void 0)return w.type=f,w}throw new TypeError("unsupported file type: "+f+" (file: "+g+")")}function a(d){return r(this,void 0,void 0,function*(){const g=yield n.promises.open(d,"r"),{size:f}=yield g.stat();if(f<=0)throw yield g.close(),new Error("Empty file");const w=Math.min(f,c),B=Re.alloc(w);return yield g.read(B,0,w,0),yield g.close(),B})}function p(d){const g=n.openSync(d,"r"),{size:f}=n.fstatSync(g);if(f<=0)throw n.closeSync(g),new Error("Empty file");const w=Math.min(f,c),B=Re.alloc(w);return n.readSync(g,B,0,w,0),n.closeSync(g),B}e.exports=t=h,t.default=h;function h(d,g){if(Re.isBuffer(d))return o(d);if(typeof d!="string")throw new TypeError("invalid invocation");const f=l.resolve(d);if(typeof g=="function")A.push(()=>a(f).then(w=>Yn.nextTick(g,null,o(w,f))).catch(g));else{const w=p(f);return o(w,f)}}t.imageSize=h,t.setConcurrency=d=>{A.concurrency=d},t.types=Object.keys(i.typeHandlers)}(Ge,Ge.exports);var Fn=Ge.exports;let Ct,Qt,De,_t,Me,jt,ae,Ye,kt,Ut,Dt,Mt,Pt,Je,St,Rt,Ke;Zt=Nt(Fn),Ct=gi().shape({channelName:et().required(tt("Channel Name")).max(32,Kt(32)),channelDesc:et().required(tt("Channel Description")).max(250,Kt(250)),channelURL:et().required(tt("Channel URL")).test("url","Please enter a valid channel url",e=>vi.test(e))}),Qt=({children:e,onSubmit:t})=>{const r=pi({initialValues:{channelName:"",channelDesc:"",channelURL:"",image:null},validationSchema:Ct,onSubmit:t});return v.jsx(mi,{value:r,children:e})},De=()=>{const e=wi();if(!e)throw new Error("useChainAliasFormikContext must be used within a FormikChainAliasProvider");return e},_t=({handleNextStep:e,setActiveStepKey:t})=>{const{values:r,touched:n,setFieldTouched:l,setFieldValue:u,errors:i,validateForm:s,setTouched:c}=De(),A=()=>{s().then(o=>{c({channelName:!0,channelDesc:!0,channelURL:!0}),Object.keys(o).length===0&&(e("uploadLogo"),t("uploadLogo"))})};return v.jsx(H,{display:"flex",flexDirection:"column",alignSelf:"stretch",children:v.jsxs(H,{display:"flex",flexDirection:"column",gap:"spacing-xl",alignSelf:"stretch",children:[v.jsxs(H,{display:"flex",flexDirection:"column",gap:"spacing-sm",alignSelf:"stretch",children:[v.jsx(zt,{required:!0,label:"Channel Name",value:r.channelName,onChange:o=>{const a=o.target.value;l("channelName",!0),u("channelName",a)},totalCount:32,error:n.channelName&&!!(i!=null&&i.channelName),errorMessage:n.channelName?i==null?void 0:i.channelName:""}),v.jsx(Kn,{required:!0,label:"Channel Description",placeholder:"Get notified about ...",description:"Enter a Brief description of the notifications the user will receive",value:r.channelDesc,onChange:o=>{const a=o.target.value;l("channelDesc",!0),u("channelDesc",a)},totalCount:250,error:n.channelDesc&&!!(i!=null&&i.channelDesc),errorMessage:n.channelURL?i==null?void 0:i.channelDesc:""}),v.jsx(zt,{required:!0,label:"Channel Website URL",value:r.channelURL,onChange:o=>{const a=o.target.value;l("channelURL",!0),u("channelURL",a)},error:n.channelURL&&!!(i!=null&&i.channelURL),errorMessage:n.channelURL?i==null?void 0:i.channelURL:""})]}),v.jsx(H,{display:"flex",justifyContent:"center",children:v.jsx($,{onClick:A,children:"Next"})})]})})},Me=50,jt=[{label:"Channel Info",value:"channelInfo"},{label:"Upload Logo",value:"uploadLogo"},{label:"Stake Fees",value:"stakeFees"}],ae={progress:null,progressInfo:"",processingInfo:""},Ye={txErrorStatus:0,txError:""},kt=()=>v.jsxs(H,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing-xxs",alignSelf:"stretch",children:[v.jsx(N,{variant:"h3-semibold",color:"text-primary",display:{ml:"none",dp:"block"},children:"Create Your Channel"}),v.jsx(N,{variant:"bs-regular",color:"text-tertiary",display:{ml:"none",dp:"block"},children:"Creating your own notification channel to manage, send and notify users."}),v.jsx(N,{variant:"h4-semibold",color:"text-primary",display:{ml:"block",dp:"none"},children:"Create Your Channel"}),v.jsx(N,{variant:"bes-regular",color:"text-tertiary",display:{ml:"block",dp:"none"},textAlign:"center",children:"Creating your own notification channel to manage, send and notify users."})]}),Ut=({progressState:e})=>v.jsxs(H,{display:"flex",flexDirection:"column",alignSelf:"stretch",gap:"spacing-xl",alignItems:"center",children:[v.jsx(H,{padding:"s6",backgroundColor:"surface-secondary",borderRadius:"radius-sm",width:"-webkit-fill-available",children:v.jsx(N,{textAlign:"center",variant:"h5-semibold",color:"text-brand-medium",children:e.progressInfo})}),v.jsx(H,{width:"400px",children:v.jsx(Xn,{percent:e.progress,color:"#D548EC",backgroundColor:"#F3AEFF",height:"4px"})}),v.jsxs(H,{display:"flex",flexDirection:"row",alignItems:"center",gap:"spacing-xxxs",children:[v.jsx(Zn,{type:Vn.PROCESSING,size:16,color:"#D548EC"}),v.jsx(N,{variant:"bs-semibold",color:"text-secondary",children:e.processingInfo})]})]}),Dt=()=>{const{switchChain:e}=Ve();return v.jsxs(v.Fragment,{children:[v.jsx(H,{display:"flex",flexDirection:"column",padding:"spacing-md",backgroundColor:"surface-secondary",borderRadius:"radius-sm",width:"-webkit-fill-available",children:v.jsx(N,{textAlign:"center",variant:"h5-semibold",color:"text-brand-medium",children:"Please select Ethereum Sepolia Network in your Wallet to create a channel."})}),v.jsx(H,{display:"flex",justifyContent:"center",children:v.jsx($,{onClick:()=>e($e.coreContractChain),children:"Change Network"})})]})},Mt=({mintPushToken:e,noOfPushTokensToCheck:t,mintingPush:r})=>{const n=$e.appEnv==="prod",{isModalOpen:l,showModal:u,ModalComponent:i}=$n();return v.jsxs(H,{display:"flex",padding:"spacing-sm spacing-md",backgroundColor:"surface-brand-subtle",borderRadius:"radius-none radius-none radius-sm radius-sm",justifyContent:"space-between",alignItems:"center",flexDirection:{ml:"column",initial:"row"},gap:"spacing-xs",children:[v.jsx(Te,{isLoading:r,children:v.jsx(N,{variant:"c-regular",color:"text-primary",children:n?"Your balance is low. Swap to get PUSH Tokens.":"Follow these steps to get Testnet PUSH."})}),n?v.jsx($,{size:"extraSmall",leadingIcon:v.jsx($t,{}),onClick:u,children:"Swap PUSH Token"}):v.jsxs(H,{display:"flex",gap:"spacing-xs",children:[v.jsx(Te,{isLoading:r,children:v.jsx(ei,{to:"https://chaindrop.org/?chainid=11155111&token=0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",target:"_blank",children:v.jsxs(H,{display:"flex",gap:"spacing-xxs",alignItems:"baseline",color:"text-brand-medium",cursor:"pointer",children:[v.jsx(H,{border:"border-sm solid stroke-brand-medium",width:"16px",height:"15px",borderRadius:"radius-xl",display:"flex",justifyContent:"center",children:v.jsx(N,{variant:"c-regular",children:"1"})}),v.jsx(N,{children:"Sepolia ETH Faucet"})]})})}),v.jsx(Te,{isLoading:r,children:v.jsxs(H,{display:"flex",gap:"spacing-xxs",alignItems:"baseline",color:"text-brand-medium",cursor:"pointer",onClick:()=>e(1e3),children:[v.jsx(H,{border:"border-sm solid stroke-brand-medium",width:"16px",height:"15px",borderRadius:"radius-xl",display:"flex",justifyContent:"center",children:v.jsx(N,{variant:"c-regular",children:"2"})}),v.jsx(N,{children:"Get Testnet Push"})]})})]}),l&&v.jsx(i,{InnerComponent:yi,InnerComponentProps:{defaultPushTokenAmount:t},modalPadding:"0px",modalPosition:ti.ON_ROOT})]})},Pt=({channelStakeFees:e,handleNextStep:t})=>{const r=Me,{provider:n,account:l,isWalletConnected:u,connect:i}=Ve(),[s,c]=W.useState(0),[A,o]=W.useState(!1),[a,p]=W.useState(!1),h=async E=>{if(u||i(),u){o(!0);try{const j=await bi({noOfTokens:E,provider:n,account:l});o(!1),c(j)}catch(j){console.log("Error >>",j),o(!1)}}},d=async()=>{p(!0);const E=await Bi({address:l,provider:n});p(!1),c(E)};W.useEffect(()=>{d()},[s,l]);const g=async()=>{u&&await Ei()},f=s<r,{handleSubmit:w,validateForm:B}=De(),b=()=>{B().then(E=>{(E.channelName||E.channelDesc||E.channelURL)&&t("channelInfo"),E.image&&t("uploadLogo"),Object.keys(E).length||w()})};return v.jsxs(H,{display:"flex",flexDirection:"column",alignSelf:"stretch",justifyContent:"center",gap:"spacing-xl",children:[v.jsxs(H,{display:"flex",flexDirection:"column",gap:"spacing-sm",children:[v.jsxs(H,{display:"flex",flexDirection:"column",alignSelf:"stretch",children:[v.jsxs(H,{display:"flex",flexDirection:"row",justifyContent:"space-between",backgroundColor:"surface-secondary",borderRadius:f?"radius-sm radius-sm radius-none radius-none":"radius-sm",padding:"spacing-sm spacing-md",alignItems:"center",children:[v.jsx(N,{variant:"h4-semibold",color:"text-primary",display:{ml:"none",dp:"block"},children:"Amount for Staking"}),v.jsx(N,{variant:"h5-semibold",color:"text-primary",display:{ml:"block",dp:"none"},children:"Amout For Staking"}),v.jsxs(H,{children:[v.jsxs(N,{variant:"h4-semibold",color:"text-brand-medium",children:[e," PUSH"]}),v.jsx(Te,{isLoading:a,children:v.jsxs(N,{variant:"bes-semibold",color:"text-tertiary",children:["Balance: ",s==null?void 0:s.toLocaleString()]})})]})]}),f&&v.jsx(Mt,{mintPushToken:h,noOfPushTokensToCheck:50,mintingPush:A})]}),v.jsxs(H,{display:"flex",flexDirection:"row",gap:"spacing-xxs",justifyContent:"center",children:[v.jsx(N,{variant:"bes-semibold",color:"text-tertiary",children:"Don't see Push token in your wallet?"}),v.jsx(N,{css:Yt`
              cursor: pointer;
            `,variant:"bes-semibold",color:"text-brand-medium",onClick:g,children:"Import Token"})]})]}),v.jsx(H,{display:"flex",justifyContent:"center",children:v.jsx($,{disabled:A,onClick:()=>{b()},children:"Create Channel"})})]})},Je=e=>e.type.startsWith("image/"),St=async({provider:e,account:t})=>{let r=await new Xe(ce.pushToken,Ze.pushToken,e).allowance(t,ce.epnscore);r=r==null?void 0:r.toString();const n=ri(r);return Number(n)},Rt=({view:e,setView:t,setActiveStepKey:r,handleNextStep:n})=>{const l=W.useRef(),{values:u,setFieldValue:i}=De(),s=async o=>{var p;const a=(p=o.currentTarget.files)==null?void 0:p[0];t(!1),a&&Je(a)&&await A(a)},c=async o=>{var p;o.preventDefault(),o.stopPropagation(),t(!1);const a=(p=o.dataTransfer.files)==null?void 0:p[0];a&&Je(a)&&await A(a)},A=async o=>{i("image",o);const a=new FileReader;a.readAsDataURL(o),a.onloadend=()=>{i("imageSrc",a.result),i("imageType",o.type)}};return v.jsxs(H,{display:"flex",flexDirection:"column",gap:"s8",alignItems:"center",alignSelf:"stretch",children:[v.jsxs(H,{display:"flex",flexDirection:"column",alignItems:"center",gap:"s8",children:[v.jsx(N,{variant:"bes-regular",color:"text-tertiary",children:"Upload a PNG, JPG upto 1MB. Crop the image to resize to 128px."}),v.jsx(ni,{hidden:!0,id:"file-upload",onChange:s,onDrop:c,children:v.jsxs(H,{width:{initial:"500px",ml:"325px"},padding:"spacing-xxl spacing-none",display:"flex",flexDirection:"column",alignItems:"center",border:{light:"1px dashed gray-300",dark:"1px dashed gray-700"},borderRadius:"r6",backgroundColor:"surface-secondary",gap:"s6",children:[u!=null&&u.image?e?v.jsx(H,{width:"128px",height:"128px",borderRadius:"r5",children:v.jsx("img",{style:{borderRadius:"inherit"},width:"100%",height:"100%",src:u.image,alt:"Cropped Img"})}):v.jsx(rt,{width:"200px",height:"200px",imageSrc:u.imageSrc,imageType:u.imageType,onImageCropped:o=>{t(!0),i("image",o)},ref:l}):v.jsx(Vt,{size:50}),v.jsxs(H,{display:"flex",gap:"s1",children:[v.jsx(N,{variant:"bs-semibold",color:"text-tertiary",children:" Drag and Drop or"}),v.jsx("label",{htmlFor:"file-upload",children:v.jsx(N,{variant:"bs-semibold",color:"text-brand-medium",css:Yt`cursor:pointer;`,children:"Browse to Choose"})})]})]})})]}),(u==null?void 0:u.image)&&(e?v.jsx(v.Fragment,{children:v.jsx($,{disabled:!e&&!(u!=null&&u.image),onClick:()=>{n("stakeFees"),r("stakeFees")},children:"Next"})}):v.jsx(v.Fragment,{children:v.jsx($,{onClick:()=>{l.current.showCroppedImage()},children:"Crop Image"})}))]})},Ke=ii(Me.toString(),18),Xt=()=>{const{account:e,provider:t,isWalletConnected:r,chainId:n,connect:l}=Ve(),u=$e.coreContractChain===n,{mutate:i}=rr(),{mutate:s}=nr(),[c,A]=W.useState("channelInfo"),[o,a]=W.useState(["channelInfo"]),p=I=>{a([...new Set([...o,I])]),A(I)},[h,d]=W.useState(!1),[g,f]=W.useState(ae),[w,B]=W.useState(Ye),b=(I,k,U)=>{f(M=>({...M,progress:I,progressInfo:k,processingInfo:U}))},E=(I,k)=>{B(U=>({...U,txErrorStatus:I,txError:k}))},j=(I,k)=>{i({noOfTokenToApprove:Ke,signer:I},{onSuccess:U=>{U.status===1&&(b(60,"Please complete the transaction in your wallet to continue.","Approving PUSH"),D(I,k))},onError:U=>(console.log("Error in approving PUSH Token",U),U.code===4001||U.code==="ACTION_REJECTED"?(console.log("Signature error ",U),E(1,"User Rejected Signature. Please try again.")):E(2,"Transaction failed due to one of the following reasons:"),f(ae),!1)})},D=(I,k)=>{let U=ci.GENERAL;const M="1+"+k,R=si(M);b(70,"Please complete the transaction in your wallet to continue.","Creating Channel..."),s({channelType:U,identityBytes:R,fees:Ke,signer:I},{onSuccess:P=>{P.status===0?E(2,"Transaction failed due to one of the following reasons:"):(b(80,"Please wait while we confirm the transaction..","Transaction Confirmed.."),setTimeout(()=>{b(90,"Creating your channel, Aligning pixels, adjusting padding... This may take some time.","Redirecting... Please do not refresh")},2e3),setTimeout(()=>{b(100,"Creating your channel, Aligning pixels, adjusting padding... This may take some time.","Redirecting... Please do not refresh"),window.location.reload()},3e3))},onError:P=>{console.log("Error in transaction from query >>>>",P),P.code===4001||P.code==="ACTION_REJECTED"?(console.log("Signature error ",P),E(1,"User Rejected Signature. Please try again."),f(ae)):(console.error("Error in creating channel--> %o",P),console.error({error:P}),b(0,"There was an error in creating the Channel","Kindly Contact support@epns.io to resolve the issue."))}})},x=async I=>{if(f(ae),B(Ye),!r){l();return}b(10,"Checking for PUSH Token Approval","Loading...");const k=await St({provider:t,account:e}),U=JSON.stringify({name:I.channelName,info:I.channelDesc,url:I.channelURL,icon:I.image});b(20,"Please wait, payload is getting uploaded to IPFS","Loading...");let M=await oi(U);console.debug("IPFS storagePointer:",M),b(40,"Please complete the transaction in your wallet to continue.","Payload Uploaded...");var R=t.getSigner(e);console.debug(R),k<50?j(R,M):D(R,M)};return v.jsx(Qt,{onSubmit:I=>x(I),children:v.jsxs(H,{padding:{initial:"spacing-lg",ml:"spacing-sm"},backgroundColor:"surface-primary",borderRadius:"radius-md",display:"flex",width:{initial:"648px",ml:"325px"},flexDirection:"column",alignItems:"center",gap:"spacing-xl",children:[v.jsx(kt,{}),!u&&v.jsx(Dt,{}),u&&v.jsxs(v.Fragment,{children:[w.txErrorStatus!==0&&v.jsx(ai,{variant:"error",icon:v.jsx(Ai,{color:"icon-state-danger-bold",size:24}),message:w.txError,width:"100%"}),g.progress?v.jsx(Ut,{progressState:g}):v.jsxs(H,{display:"flex",flexDirection:"column",gap:"spacing-lg",alignItems:"center",alignSelf:"stretch",children:[v.jsx(ui,{steps:jt,completedSteps:o,setActiveStepKey:I=>A(I)}),c=="channelInfo"&&v.jsx(_t,{handleNextStep:p,setActiveStepKey:A}),c==="uploadLogo"&&v.jsx(Rt,{view:h,setView:d,setActiveStepKey:A,handleNextStep:p}),c==="stakeFees"&&v.jsx(Pt,{channelStakeFees:Me,handleNextStep:p})]})]})]})})}});export{Xt as C,rt as I,Ci as __tla,Zt as v};

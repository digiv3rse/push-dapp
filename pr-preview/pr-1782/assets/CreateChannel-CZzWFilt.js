import{b1 as i,br as wn,bj as Xe,bk as je,bl as Ye,gh as jn,gi as bn,gj as Sn,cK as de,gk as $e,cy as Ze,gl as In,gm as Cn,bf as Pn,b2 as c,dM as Qe,dN as En,bY as D,bp as x,co as kn,cq as Un,gn as _n,aY as be,bi as Se,cm as Tn,e$ as he,dO as Ln,dv as Dn,cn as Mn,a$ as E,bq as et,bm as Nn,gg as Bn,bn as On,g7 as Fn,fU as Rn,fK as An,fP as Gn,__tla as Hn}from"./index-COqp_ji_.js";import{S as Jn,__tla as Vn}from"./Stepper-MFL-c-ur.js";import{S as Kn,I as Wn,u as qn,__tla as zn}from"./ImageClipper-B3kEH32d.js";import{u as Xn,__tla as Yn}from"./useMutation-BDfohhKy.js";import{c as $n,a as Ie,u as Zn,F as Qn,b as er,__tla as tr}from"./index.esm-0k9wI9EM.js";import{g as Ce,a as tt,U as nr}from"./Common.form-LPxQflxb.js";import{m as rr,c as ir,i as ar,__tla as sr}from"./PushTokenContractHelper-B6bHmcMl.js";let nt,rt,or=Promise.all([(()=>{try{return Hn}catch{}})(),(()=>{try{return Vn}catch{}})(),(()=>{try{return zn}catch{}})(),(()=>{try{return Yn}catch{}})(),(()=>{try{return tr}catch{}})(),(()=>{try{return sr}catch{}})()]).then(async()=>{const it=e=>{const{svgProps:t,...n}=e;return i.jsx(wn,{componentName:"CloudUpload",icon:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"inherit",height:"inherit",viewBox:"0 0 53 52",fill:"none",...t,children:[i.jsx("path",{d:"M16.1888 26.3978L26.7966 15.7901L37.4043 26.3978",stroke:"#C4CBD5","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"}),i.jsx("path",{d:"M27.0618 50.0001V16.8509",stroke:"#C4CBD5","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"}),i.jsx("path",{d:"M21.4927 35.4144H11.1502C8.05625 35.0608 1.86841 32.4972 1.86841 25.0718C1.86841 17.6464 8.05625 14.9061 11.1502 14.4641C11.769 10.3094 15.6585 2 26.2662 2C39.2607 2 41.0286 10.8398 41.9126 16.0553C45.0065 15.9669 51.4596 19.2906 51.4596 26.9282C51.2828 29.7569 49.6032 35.4144 44.2993 35.4144C38.9955 35.4144 34.1336 35.4144 32.3656 35.4144",stroke:"#C4CBD5","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"})]}),...n})},at=async e=>{const{channelType:t,identityBytes:n,fees:r,signer:a}=e;return(await new Xe(je.epnscore,Ye.epnscore,a).createChannelWithPUSH(t,n,r,0,{gasLimit:6e5})).wait()},st=()=>Xn({mutationKey:[jn],mutationFn:at});var ue={exports:{}},pe={exports:{}},ot=Sn(),Pe=bn().EventEmitter;pe.exports=I,pe.exports.default=I;function I(e){if(!(this instanceof I))return new I(e);Pe.call(this),e=e||{},this.concurrency=e.concurrency||1/0,this.timeout=e.timeout||0,this.autostart=e.autostart||!1,this.results=e.results||null,this.pending=0,this.session=0,this.running=!1,this.jobs=[],this.timers={}}ot(I,Pe);var lt=["pop","shift","indexOf","lastIndexOf"];lt.forEach(function(e){I.prototype[e]=function(){return Array.prototype[e].apply(this.jobs,arguments)}}),I.prototype.slice=function(e,t){return this.jobs=this.jobs.slice(e,t),this},I.prototype.reverse=function(){return this.jobs.reverse(),this};var ct=["push","unshift","splice"];ct.forEach(function(e){I.prototype[e]=function(){var t=Array.prototype[e].apply(this.jobs,arguments);return this.autostart&&this.start(),t}}),Object.defineProperty(I.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),I.prototype.start=function(e){if(e&&ht.call(this,e),this.running=!0,this.pending>=this.concurrency)return;if(this.jobs.length===0){this.pending===0&&ge.call(this);return}var t=this,n=this.jobs.shift(),r=!0,a=this.session,s=null,o=!1,p=null,j=n.timeout||this.timeout;function m(d,b){r&&t.session===a&&(r=!1,t.pending--,s!==null&&(delete t.timers[s],clearTimeout(s)),d?t.emit("error",d,n):o===!1&&(p!==null&&(t.results[p]=Array.prototype.slice.call(arguments,1)),t.emit("success",b,n)),t.session===a&&(t.pending===0&&t.jobs.length===0?ge.call(t):t.running&&t.start()))}j&&(s=setTimeout(function(){o=!0,t.listeners("timeout").length>0?t.emit("timeout",m,n):m()},j),this.timers[s]=s),this.results&&(p=this.results.length,this.results[p]=null),this.pending++,t.emit("start",n);var l=n(m);l&&l.then&&typeof l.then=="function"&&l.then(function(d){return m(null,d)}).catch(function(d){return m(d||!0)}),this.running&&this.jobs.length>0&&this.start()},I.prototype.stop=function(){this.running=!1},I.prototype.end=function(e){dt.call(this),this.jobs.length=0,this.pending=0,ge.call(this,e)};function dt(){for(var e in this.timers){var t=this.timers[e];delete this.timers[e],clearTimeout(t)}}function ht(e){var t=this;this.on("error",n),this.on("end",r);function n(a){t.end(a)}function r(a){t.removeListener("error",n),t.removeListener("end",r),e(a,this.results)}}function ge(e){this.session++,this.running=!1,this.emit("end",e)}var ut=pe.exports,M={},G={};Object.defineProperty(G,"__esModule",{value:!0}),G.BMP=void 0,G.BMP={validate(e){return e.toString("ascii",0,2)==="BM"},calculate(e){return{height:Math.abs(e.readInt32LE(22)),width:e.readUInt32LE(18)}}};var H={},N={};Object.defineProperty(N,"__esModule",{value:!0}),N.ICO=void 0;const pt=1,gt=6,ft=16;function Ee(e,t){const n=e.readUInt8(t);return n===0?256:n}function ke(e,t){const n=gt+t*ft;return{height:Ee(e,n+1),width:Ee(e,n)}}N.ICO={validate(e){return e.readUInt16LE(0)!==0?!1:e.readUInt16LE(2)===pt},calculate(e){const t=e.readUInt16LE(4),n=ke(e,0);if(t===1)return n;const r=[n];for(let a=1;a<t;a+=1)r.push(ke(e,a));return{height:n.height,images:r,width:n.width}}},Object.defineProperty(H,"__esModule",{value:!0}),H.CUR=void 0;const mt=N,xt=2;H.CUR={validate(e){return e.readUInt16LE(0)!==0?!1:e.readUInt16LE(2)===xt},calculate(e){return mt.ICO.calculate(e)}};var J={};Object.defineProperty(J,"__esModule",{value:!0}),J.DDS=void 0,J.DDS={validate(e){return e.readUInt32LE(0)===542327876},calculate(e){return{height:e.readUInt32LE(12),width:e.readUInt32LE(16)}}};var V={};Object.defineProperty(V,"__esModule",{value:!0}),V.GIF=void 0;const yt=/^GIF8[79]a/;V.GIF={validate(e){const t=e.toString("ascii",0,6);return yt.test(t)},calculate(e){return{height:e.readUInt16LE(8),width:e.readUInt16LE(6)}}};var K={};Object.defineProperty(K,"__esModule",{value:!0}),K.ICNS=void 0;const vt=8,wt=4,jt=4,bt={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};function Ue(e,t){const n=t+jt;return[e.toString("ascii",t,n),e.readUInt32BE(n)]}function _e(e){const t=bt[e];return{width:t,height:t,type:e}}K.ICNS={validate(e){return e.toString("ascii",0,4)==="icns"},calculate(e){const t=e.length,n=e.readUInt32BE(wt);let r=vt,a=Ue(e,r),s=_e(a[0]);if(r+=a[1],r===n)return s;const o={height:s.height,images:[s],width:s.width};for(;r<n&&r<t;)a=Ue(e,r),s=_e(a[0]),r+=a[1],o.images.push(s);return o}};var W={};Object.defineProperty(W,"__esModule",{value:!0}),W.J2C=void 0,W.J2C={validate(e){return e.toString("hex",0,4)==="ff4fff51"},calculate(e){return{height:e.readUInt32BE(12),width:e.readUInt32BE(8)}}};var q={};Object.defineProperty(q,"__esModule",{value:!0}),q.JP2=void 0;const z={ftyp:"66747970",ihdr:"69686472",jp2h:"6a703268",jp__:"6a502020",rreq:"72726571",xml_:"786d6c20"},St=e=>{const t=e.readUInt8(0);let n=1+2*t;const r=e.readUInt16BE(n)*(2+t);n=n+2+r;const a=e.readUInt16BE(n)*(16+t);return n+2+a},Te=e=>({height:e.readUInt32BE(4),width:e.readUInt32BE(8)});q.JP2={validate(e){const t=e.toString("hex",4,8),n=e.readUInt32BE(0);if(t!==z.jp__||n<1)return!1;const r=n+4,a=e.readUInt32BE(n);return e.slice(r,r+a).toString("hex",0,4)===z.ftyp},calculate(e){const t=e.readUInt32BE(0),n=e.readUInt16BE(t+2);let r=t+4+n;switch(e.toString("hex",r,r+4)){case z.rreq:return r=r+4+4+St(e.slice(r+4)),Te(e.slice(r+8,r+24));case z.jp2h:return Te(e.slice(r+8,r+24));default:throw new TypeError("Unsupported header found: "+e.toString("ascii",r,r+4))}}};var X={},B={};Object.defineProperty(B,"__esModule",{value:!0}),B.readUInt=void 0;function It(e,t,n,r){n=n||0;const a=r?"BE":"LE",s="readUInt"+t+a;return e[s].call(e,n)}B.readUInt=It,Object.defineProperty(X,"__esModule",{value:!0}),X.JPG=void 0;const O=B,Ct="45786966",Pt=2,fe=6,Et=2,kt="4d4d",Ut="4949",Le=12,_t=2;function Tt(e){return e.toString("hex",2,6)===Ct}function Lt(e,t){return{height:e.readUInt16BE(t),width:e.readUInt16BE(t+2)}}function Dt(e,t){const n=fe+8,r=O.readUInt(e,16,n,t);for(let a=0;a<r;a++){const s=n+_t+a*Le,o=s+Le;if(s>e.length)return;const p=e.slice(s,o);if(O.readUInt(p,16,0,t)===274)return O.readUInt(p,16,2,t)!==3||O.readUInt(p,32,4,t)!==1?void 0:O.readUInt(p,16,8,t)}}function Mt(e,t){const n=e.slice(Pt,t),r=n.toString("hex",fe,fe+Et),a=r===kt;if(a||r===Ut)return Dt(n,a)}function Nt(e,t){if(t>e.length)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(e[t]!==255)throw new TypeError("Invalid JPG, marker table corrupted")}X.JPG={validate(e){return e.toString("hex",0,2)==="ffd8"},calculate(e){e=e.slice(4);let t,n;for(;e.length;){const r=e.readUInt16BE(0);if(Tt(e)&&(t=Mt(e,r)),Nt(e,r),n=e[r+1],n===192||n===193||n===194){const a=Lt(e,r+5);return t?{height:a.height,orientation:t,width:a.width}:a}e=e.slice(r+2)}throw new TypeError("Invalid JPG, no size found")}};var Y={};Object.defineProperty(Y,"__esModule",{value:!0}),Y.KTX=void 0;const Bt="KTX 11";Y.KTX={validate(e){return Bt===e.toString("ascii",1,7)},calculate(e){return{height:e.readUInt32LE(40),width:e.readUInt32LE(36)}}};var $={};Object.defineProperty($,"__esModule",{value:!0}),$.PNG=void 0;const Ot=`PNG\r

`,Ft="IHDR",De="CgBI";$.PNG={validate(e){if(Ot===e.toString("ascii",1,8)){let t=e.toString("ascii",12,16);if(t===De&&(t=e.toString("ascii",28,32)),t!==Ft)throw new TypeError("Invalid PNG");return!0}return!1},calculate(e){return e.toString("ascii",12,16)===De?{height:e.readUInt32BE(36),width:e.readUInt32BE(32)}:{height:e.readUInt32BE(20),width:e.readUInt32BE(16)}}};var Z={};Object.defineProperty(Z,"__esModule",{value:!0}),Z.PNM=void 0;const Me={P1:"pbm/ascii",P2:"pgm/ascii",P3:"ppm/ascii",P4:"pbm",P5:"pgm",P6:"ppm",P7:"pam",PF:"pfm"},Rt=Object.keys(Me),Ne={default:e=>{let t=[];for(;e.length>0;){const n=e.shift();if(n[0]!=="#"){t=n.split(" ");break}}if(t.length===2)return{height:parseInt(t[1],10),width:parseInt(t[0],10)};throw new TypeError("Invalid PNM")},pam:e=>{const t={};for(;e.length>0;){const n=e.shift();if(n.length>16||n.charCodeAt(0)>128)continue;const[r,a]=n.split(" ");if(r&&a&&(t[r.toLowerCase()]=parseInt(a,10)),t.height&&t.width)break}if(t.height&&t.width)return{height:t.height,width:t.width};throw new TypeError("Invalid PAM")}};Z.PNM={validate(e){const t=e.toString("ascii",0,2);return Rt.includes(t)},calculate(e){const t=e.toString("ascii",0,2),n=Me[t],r=e.toString("ascii",3).split(/[\r\n]+/);return(Ne[n]||Ne.default)(r)}};var Q={};Object.defineProperty(Q,"__esModule",{value:!0}),Q.PSD=void 0,Q.PSD={validate(e){return e.toString("ascii",0,4)==="8BPS"},calculate(e){return{height:e.readUInt32BE(14),width:e.readUInt32BE(18)}}};var ee={};Object.defineProperty(ee,"__esModule",{value:!0}),ee.SVG=void 0;const Be=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,te={height:/\sheight=(['"])([^%]+?)\1/,root:Be,viewbox:/\sviewBox=(['"])(.+?)\1/,width:/\swidth=(['"])([^%]+?)\1/},me=2.54,At={cm:96/me,em:16,ex:8,m:96/me*100,mm:96/me/10,pc:96/72/12,pt:96/72};function ne(e){const t=/([0-9.]+)([a-z]*)/.exec(e);if(t)return Math.round(parseFloat(t[1])*(At[t[2]]||1))}function Gt(e){const t=e.split(" ");return{height:ne(t[3]),width:ne(t[2])}}function Ht(e){const t=e.match(te.width),n=e.match(te.height),r=e.match(te.viewbox);return{height:n&&ne(n[2]),viewbox:r&&Gt(r[2]),width:t&&ne(t[2])}}function Jt(e){return{height:e.height,width:e.width}}function Vt(e,t){const n=t.width/t.height;return e.width?{height:Math.floor(e.width/n),width:e.width}:e.height?{height:e.height,width:Math.floor(e.height*n)}:{height:t.height,width:t.width}}ee.SVG={validate(e){const t=String(e);return Be.test(t)},calculate(e){const t=e.toString("utf8").match(te.root);if(t){const n=Ht(t[0]);if(n.width&&n.height)return Jt(n);if(n.viewbox)return Vt(n,n.viewbox)}throw new TypeError("Invalid SVG")}};var re={};Object.defineProperty(re,"__esModule",{value:!0}),re.TIFF=void 0;const ie=$e,L=B;function Kt(e,t,n){const r=L.readUInt(e,32,4,n);let a=1024;const s=ie.statSync(t).size;r+a>s&&(a=s-r-10);const o=de.alloc(a),p=ie.openSync(t,"r");return ie.readSync(p,o,0,a,r),ie.closeSync(p),o.slice(2)}function Wt(e,t){const n=L.readUInt(e,16,8,t);return(L.readUInt(e,16,10,t)<<16)+n}function qt(e){if(e.length>24)return e.slice(12)}function zt(e,t){const n={};let r=e;for(;r&&r.length;){const a=L.readUInt(r,16,0,t),s=L.readUInt(r,16,2,t),o=L.readUInt(r,32,4,t);if(a===0)break;o===1&&(s===3||s===4)&&(n[a]=Wt(r,t)),r=qt(r)}return n}function Xt(e){const t=e.toString("ascii",0,2);if(t==="II")return"LE";if(t==="MM")return"BE"}const Yt=["49492a00","4d4d002a"];re.TIFF={validate(e){return Yt.includes(e.toString("hex",0,4))},calculate(e,t){if(!t)throw new TypeError("Tiff doesn't support buffer");const n=Xt(e)==="BE",r=Kt(e,t,n),a=zt(r,n),s=a[256],o=a[257];if(!s||!o)throw new TypeError("Invalid Tiff. Missing tags");return{height:o,width:s}}};var ae={};Object.defineProperty(ae,"__esModule",{value:!0}),ae.WEBP=void 0;function $t(e){return{height:1+e.readUIntLE(7,3),width:1+e.readUIntLE(4,3)}}function Zt(e){return{height:1+((e[4]&15)<<10|e[3]<<2|(e[2]&192)>>6),width:1+((e[2]&63)<<8|e[1])}}function Qt(e){return{height:e.readInt16LE(8)&16383,width:e.readInt16LE(6)&16383}}ae.WEBP={validate(e){const t=e.toString("ascii",0,4)==="RIFF",n=e.toString("ascii",8,12)==="WEBP",r=e.toString("ascii",12,15)==="VP8";return t&&n&&r},calculate(e){const t=e.toString("ascii",12,16);if(e=e.slice(20,30),t==="VP8X"){const r=e[0],a=(r&192)===0,s=(r&1)===0;if(a&&s)return $t(e);throw new TypeError("Invalid WebP")}if(t==="VP8 "&&e[0]!==47)return Qt(e);const n=e.toString("hex",3,6);if(t==="VP8L"&&n!=="9d012a")return Zt(e);throw new TypeError("Invalid WebP")}},Object.defineProperty(M,"__esModule",{value:!0}),M.typeHandlers=void 0;const en=G,tn=H,nn=J,rn=V,an=K,sn=N,on=W,ln=q,cn=X,dn=Y,hn=$,un=Z,pn=Q,gn=ee,fn=re,mn=ae;M.typeHandlers={bmp:en.BMP,cur:tn.CUR,dds:nn.DDS,gif:rn.GIF,icns:an.ICNS,ico:sn.ICO,j2c:on.J2C,jp2:ln.JP2,jpg:cn.JPG,ktx:dn.KTX,png:hn.PNG,pnm:un.PNM,psd:pn.PSD,svg:gn.SVG,tiff:fn.TIFF,webp:mn.WEBP};var se={};Object.defineProperty(se,"__esModule",{value:!0}),se.detector=void 0;const xe=M,xn=Object.keys(xe.typeHandlers),Oe={56:"psd",66:"bmp",68:"dds",71:"gif",73:"tiff",77:"tiff",82:"webp",105:"icns",137:"png",255:"jpg"};function yn(e){const t=e[0];if(t in Oe){const r=Oe[t];if(xe.typeHandlers[r].validate(e))return r}const n=r=>xe.typeHandlers[r].validate(e);return xn.find(n)}se.detector=yn,function(e,t){var n=Ze&&Ze.__awaiter||function(y,g,h,f){function P(w){return w instanceof h?w:new h(function(v){v(w)})}return new(h||(h=Promise))(function(w,v){function _(u){try{R(f.next(u))}catch(C){v(C)}}function ce(u){try{R(f.throw(u))}catch(C){v(C)}}function R(u){u.done?w(u.value):P(u.value).then(_,ce)}R((f=f.apply(y,g||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.types=t.setConcurrency=t.imageSize=void 0;const r=$e,a=Cn,s=ut,o=M,p=se,j=512*1024,m=new s.default({concurrency:100,autostart:!0});function l(y,g){const h=p.detector(y);if(h&&h in o.typeHandlers){const f=o.typeHandlers[h].calculate(y,g);if(f!==void 0)return f.type=h,f}throw new TypeError("unsupported file type: "+h+" (file: "+g+")")}function d(y){return n(this,void 0,void 0,function*(){const g=yield r.promises.open(y,"r"),{size:h}=yield g.stat();if(h<=0)throw yield g.close(),new Error("Empty file");const f=Math.min(h,j),P=de.alloc(f);return yield g.read(P,0,f,0),yield g.close(),P})}function b(y){const g=r.openSync(y,"r"),{size:h}=r.fstatSync(g);if(h<=0)throw r.closeSync(g),new Error("Empty file");const f=Math.min(h,j),P=de.alloc(f);return r.readSync(g,P,0,f,0),r.closeSync(g),P}e.exports=t=U,t.default=U;function U(y,g){if(de.isBuffer(y))return l(y);if(typeof y!="string")throw new TypeError("invalid invocation");const h=a.resolve(y);if(typeof g=="function")m.push(()=>d(h).then(f=>In.nextTick(g,null,l(f,h))).catch(g));else{const f=b(h);return l(f,h)}}t.imageSize=U,t.setConcurrency=y=>{m.concurrency=y},t.types=Object.keys(o.typeHandlers)}(ue,ue.exports);var vn=ue.exports;let Fe,Re,oe,Ae,le,Ge,F,ye,He,Je,Ve,Ke,We,ve,qe,ze,we;rt=Pn(vn),Fe=$n().shape({channelName:Ie().required(Ce("Channel Name")).max(32,tt(32)),channelDesc:Ie().required(Ce("Channel Description")).max(250,tt(250)),channelURL:Ie().required(Ce("Channel URL")).test("url","Please enter a valid channel url",e=>nr.test(e))}),Re=({children:e,onSubmit:t})=>{const n=Zn({initialValues:{channelName:"",channelDesc:"",channelURL:"",image:null},validationSchema:Fe,onSubmit:t});return i.jsx(Qn,{value:n,children:e})},oe=()=>{const e=er();if(!e)throw new Error("useChainAliasFormikContext must be used within a FormikChainAliasProvider");return e},Ae=({handleNextStep:e,setActiveStepKey:t})=>{const{values:n,touched:r,setFieldTouched:a,setFieldValue:s,errors:o,validateForm:p,setTouched:j}=oe(),m=()=>{p().then(l=>{j({channelName:!0,channelDesc:!0,channelURL:!0}),Object.keys(l).length===0&&(e("uploadLogo"),t("uploadLogo"))})};return i.jsx(c,{display:"flex",flexDirection:"column",alignSelf:"stretch",children:i.jsxs(c,{display:"flex",flexDirection:"column",gap:"spacing-xl",alignSelf:"stretch",children:[i.jsxs(c,{display:"flex",flexDirection:"column",gap:"spacing-sm",alignSelf:"stretch",children:[i.jsx(Qe,{required:!0,label:"Channel Name",value:n.channelName,onChange:l=>{const d=l.target.value;a("channelName",!0),s("channelName",d)},totalCount:32,error:r.channelName&&!!(o!=null&&o.channelName),errorMessage:r.channelName?o==null?void 0:o.channelName:""}),i.jsx(En,{required:!0,label:"Channel Description",placeholder:"Get notified about ...",description:"Enter a Brief description of the notifications the user will receive",value:n.channelDesc,onChange:l=>{const d=l.target.value;a("channelDesc",!0),s("channelDesc",d)},totalCount:250,error:r.channelDesc&&!!(o!=null&&o.channelDesc),errorMessage:r.channelURL?o==null?void 0:o.channelDesc:""}),i.jsx(Qe,{required:!0,label:"Channel Website URL",value:n.channelURL,onChange:l=>{const d=l.target.value;a("channelURL",!0),s("channelURL",d)},error:r.channelURL&&!!(o!=null&&o.channelURL),errorMessage:r.channelURL?o==null?void 0:o.channelURL:""})]}),i.jsx(c,{display:"flex",justifyContent:"center",children:i.jsx(D,{onClick:m,children:"Next"})})]})})},le=50,Ge=[{label:"Channel Info",value:"channelInfo"},{label:"Upload Logo",value:"uploadLogo"},{label:"Stake Fees",value:"stakeFees"}],F={progress:null,progressInfo:"",processingInfo:""},ye={txErrorStatus:0,txError:""},He=()=>i.jsxs(c,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing-xxs",alignSelf:"stretch",children:[i.jsx(x,{variant:"h3-semibold",color:"text-primary",display:{ml:"none",dp:"block"},children:"Create Your Channel"}),i.jsx(x,{variant:"bs-regular",color:"text-tertiary",display:{ml:"none",dp:"block"},children:"Creating your own notification channel to manage, send and notify users."}),i.jsx(x,{variant:"h4-semibold",color:"text-primary",display:{ml:"block",dp:"none"},children:"Create Your Channel"}),i.jsx(x,{variant:"bes-regular",color:"text-tertiary",display:{ml:"block",dp:"none"},textAlign:"center",children:"Creating your own notification channel to manage, send and notify users."})]}),Je=({progressState:e})=>i.jsxs(c,{display:"flex",flexDirection:"column",alignSelf:"stretch",gap:"spacing-xl",alignItems:"center",children:[i.jsx(c,{padding:"s6",backgroundColor:"surface-secondary",borderRadius:"radius-sm",width:"-webkit-fill-available",children:i.jsx(x,{textAlign:"center",variant:"h5-semibold",color:"text-brand-medium",children:e.progressInfo})}),i.jsx(c,{width:"400px",children:i.jsx(kn,{percent:e.progress,color:"#D548EC",backgroundColor:"#F3AEFF",height:"4px"})}),i.jsxs(c,{display:"flex",flexDirection:"row",alignItems:"center",gap:"spacing-xxxs",children:[i.jsx(Un,{type:_n.PROCESSING,size:16,color:"#D548EC"}),i.jsx(x,{variant:"bs-semibold",color:"text-secondary",children:e.processingInfo})]})]}),Ve=()=>{const{switchChain:e}=be();return i.jsxs(i.Fragment,{children:[i.jsx(c,{display:"flex",flexDirection:"column",padding:"spacing-md",backgroundColor:"surface-secondary",borderRadius:"radius-sm",width:"-webkit-fill-available",children:i.jsx(x,{textAlign:"center",variant:"h5-semibold",color:"text-brand-medium",children:"Please select Ethereum Sepolia Network in your Wallet to create a channel."})}),i.jsx(c,{display:"flex",justifyContent:"center",children:i.jsx(D,{onClick:()=>e(Se.coreContractChain),children:"Change Network"})})]})},Ke=({mintPushToken:e,noOfPushTokensToCheck:t,mintingPush:n})=>{const r=Se.appEnv==="prod",{isModalOpen:a,showModal:s,ModalComponent:o}=Tn();return i.jsxs(c,{display:"flex",padding:"spacing-sm spacing-md",backgroundColor:"surface-brand-subtle",borderRadius:"radius-none radius-none radius-sm radius-sm",justifyContent:"space-between",alignItems:"center",flexDirection:{ml:"column",initial:"row"},gap:"spacing-xs",children:[i.jsx(he,{isLoading:n,children:i.jsx(x,{variant:"c-regular",color:"text-primary",children:r?"Your balance is low. Swap to get PUSH Tokens.":"Follow these steps to get Testnet PUSH."})}),r?i.jsx(D,{size:"extraSmall",leadingIcon:i.jsx(Kn,{}),onClick:s,children:"Swap PUSH Token"}):i.jsxs(c,{display:"flex",gap:"spacing-xs",children:[i.jsx(he,{isLoading:n,children:i.jsx(Ln,{to:"https://chaindrop.org/?chainid=11155111&token=0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",target:"_blank",children:i.jsxs(c,{display:"flex",gap:"spacing-xxs",alignItems:"baseline",color:"text-brand-medium",cursor:"pointer",children:[i.jsx(c,{border:"border-sm solid stroke-brand-medium",width:"16px",height:"15px",borderRadius:"radius-xl",display:"flex",justifyContent:"center",children:i.jsx(x,{variant:"c-regular",children:"1"})}),i.jsx(x,{children:"Sepolia ETH Faucet"})]})})}),i.jsx(he,{isLoading:n,children:i.jsxs(c,{display:"flex",gap:"spacing-xxs",alignItems:"baseline",color:"text-brand-medium",cursor:"pointer",onClick:()=>e(1e3),children:[i.jsx(c,{border:"border-sm solid stroke-brand-medium",width:"16px",height:"15px",borderRadius:"radius-xl",display:"flex",justifyContent:"center",children:i.jsx(x,{variant:"c-regular",children:"2"})}),i.jsx(x,{children:"Get Testnet Push"})]})})]}),a&&i.jsx(o,{InnerComponent:Dn,InnerComponentProps:{defaultPushTokenAmount:t},modalPadding:"0px",modalPosition:Mn.ON_ROOT})]})},We=({channelStakeFees:e,handleNextStep:t})=>{const n=le,{provider:r,account:a,isWalletConnected:s,connect:o}=be(),[p,j]=E.useState(0),[m,l]=E.useState(!1),[d,b]=E.useState(!1),U=async v=>{if(s||o(),s){l(!0);try{const _=await rr({noOfTokens:v,provider:r,account:a});l(!1),j(_)}catch(_){console.log("Error >>",_),l(!1)}}},y=async()=>{b(!0);const v=await ir({address:a,provider:r});b(!1),j(v)};E.useEffect(()=>{y()},[p,a]);const g=async()=>{s&&await ar()},h=p<n,{handleSubmit:f,validateForm:P}=oe(),w=()=>{P().then(v=>{(v.channelName||v.channelDesc||v.channelURL)&&t("channelInfo"),v.image&&t("uploadLogo"),Object.keys(v).length||f()})};return i.jsxs(c,{display:"flex",flexDirection:"column",alignSelf:"stretch",justifyContent:"center",gap:"spacing-xl",children:[i.jsxs(c,{display:"flex",flexDirection:"column",gap:"spacing-sm",children:[i.jsxs(c,{display:"flex",flexDirection:"column",alignSelf:"stretch",children:[i.jsxs(c,{display:"flex",flexDirection:"row",justifyContent:"space-between",backgroundColor:"surface-secondary",borderRadius:h?"radius-sm radius-sm radius-none radius-none":"radius-sm",padding:"spacing-sm spacing-md",alignItems:"center",children:[i.jsx(x,{variant:"h4-semibold",color:"text-primary",display:{ml:"none",dp:"block"},children:"Amount for Staking"}),i.jsx(x,{variant:"h5-semibold",color:"text-primary",display:{ml:"block",dp:"none"},children:"Amout For Staking"}),i.jsxs(c,{children:[i.jsxs(x,{variant:"h4-semibold",color:"text-brand-medium",children:[e," PUSH"]}),i.jsx(he,{isLoading:d,children:i.jsxs(x,{variant:"bes-semibold",color:"text-tertiary",children:["Balance: ",p==null?void 0:p.toLocaleString()]})})]})]}),h&&i.jsx(Ke,{mintPushToken:U,noOfPushTokensToCheck:50,mintingPush:m})]}),i.jsxs(c,{display:"flex",flexDirection:"row",gap:"spacing-xxs",justifyContent:"center",children:[i.jsx(x,{variant:"bes-semibold",color:"text-tertiary",children:"Don't see Push token in your wallet?"}),i.jsx(x,{css:et`
              cursor: pointer;
            `,variant:"bes-semibold",color:"text-brand-medium",onClick:g,children:"Import Token"})]})]}),i.jsx(c,{display:"flex",justifyContent:"center",children:i.jsx(D,{disabled:m,onClick:()=>{w()},children:"Create Channel"})})]})},ve=e=>e.type.startsWith("image/"),qe=async({provider:e,account:t})=>{let n=await new Xe(je.pushToken,Ye.pushToken,e).allowance(t,je.epnscore);n=n==null?void 0:n.toString();const r=Nn(n);return Number(r)},ze=({view:e,setView:t,setActiveStepKey:n,handleNextStep:r})=>{const a=E.useRef(),{values:s,setFieldValue:o}=oe(),p=async l=>{var b;const d=(b=l.currentTarget.files)==null?void 0:b[0];t(!1),d&&ve(d)&&await m(d)},j=async l=>{var b;l.preventDefault(),l.stopPropagation(),t(!1);const d=(b=l.dataTransfer.files)==null?void 0:b[0];d&&ve(d)&&await m(d)},m=async l=>{o("image",l);const d=new FileReader;d.readAsDataURL(l),d.onloadend=()=>{o("imageSrc",d.result),o("imageType",l.type)}};return i.jsxs(c,{display:"flex",flexDirection:"column",gap:"s8",alignItems:"center",alignSelf:"stretch",children:[i.jsxs(c,{display:"flex",flexDirection:"column",alignItems:"center",gap:"s8",children:[i.jsx(x,{variant:"bes-regular",color:"text-tertiary",children:"Upload a PNG, JPG upto 1MB. Crop the image to resize to 128px."}),i.jsx(Bn,{hidden:!0,id:"file-upload",onChange:p,onDrop:j,children:i.jsxs(c,{width:{initial:"500px",ml:"325px"},padding:"spacing-xxl spacing-none",display:"flex",flexDirection:"column",alignItems:"center",border:{light:"1px dashed gray-300",dark:"1px dashed gray-700"},borderRadius:"r6",backgroundColor:"surface-secondary",gap:"s6",children:[s!=null&&s.image?e?i.jsx(c,{width:"128px",height:"128px",borderRadius:"r5",children:i.jsx("img",{style:{borderRadius:"inherit"},width:"100%",height:"100%",src:s.image,alt:"Cropped Img"})}):i.jsx(Wn,{width:"200px",height:"200px",imageSrc:s.imageSrc,imageType:s.imageType,onImageCropped:l=>{t(!0),o("image",l)},ref:a}):i.jsx(it,{size:50}),i.jsxs(c,{display:"flex",gap:"s1",children:[i.jsx(x,{variant:"bs-semibold",color:"text-tertiary",children:" Drag and Drop or"}),i.jsx("label",{htmlFor:"file-upload",children:i.jsx(x,{variant:"bs-semibold",color:"text-brand-medium",css:et`cursor:pointer;`,children:"Browse to Choose"})})]})]})})]}),(s==null?void 0:s.image)&&(e?i.jsx(i.Fragment,{children:i.jsx(D,{disabled:!e&&!(s!=null&&s.image),onClick:()=>{r("stakeFees"),n("stakeFees")},children:"Next"})}):i.jsx(i.Fragment,{children:i.jsx(D,{onClick:()=>{a.current.showCroppedImage()},children:"Crop Image"})}))]})},we=On(le.toString(),18),nt=()=>{const{account:e,provider:t,isWalletConnected:n,chainId:r,connect:a}=be(),s=Se.coreContractChain===r,{mutate:o}=qn(),{mutate:p}=st(),[j,m]=E.useState("channelInfo"),[l,d]=E.useState(["channelInfo"]),b=u=>{d([...new Set([...l,u])]),m(u)},[U,y]=E.useState(!1),[g,h]=E.useState(F),[f,P]=E.useState(ye),w=(u,C,S)=>{h(T=>({...T,progress:u,progressInfo:C,processingInfo:S}))},v=(u,C)=>{P(S=>({...S,txErrorStatus:u,txError:C}))},_=(u,C)=>{o({noOfTokenToApprove:we,signer:u},{onSuccess:S=>{S.status===1&&(w(60,"Please complete the transaction in your wallet to continue.","Approving PUSH"),ce(u,C))},onError:S=>(console.log("Error in approving PUSH Token",S),S.code===4001||S.code==="ACTION_REJECTED"?(console.log("Signature error ",S),v(1,"User Rejected Signature. Please try again.")):v(2,"Transaction failed due to one of the following reasons:"),h(F),!1)})},ce=(u,C)=>{let S=Gn.GENERAL;const T="1+"+C,A=An(T);w(70,"Please complete the transaction in your wallet to continue.","Creating Channel..."),p({channelType:S,identityBytes:A,fees:we,signer:u},{onSuccess:k=>{k.status===0?v(2,"Transaction failed due to one of the following reasons:"):(w(80,"Please wait while we confirm the transaction..","Transaction Confirmed.."),setTimeout(()=>{w(90,"Creating your channel, Aligning pixels, adjusting padding... This may take some time.","Redirecting... Please do not refresh")},2e3),setTimeout(()=>{w(100,"Creating your channel, Aligning pixels, adjusting padding... This may take some time.","Redirecting... Please do not refresh"),window.location.reload()},3e3))},onError:k=>{console.log("Error in transaction from query >>>>",k),k.code===4001||k.code==="ACTION_REJECTED"?(console.log("Signature error ",k),v(1,"User Rejected Signature. Please try again."),h(F)):(console.error("Error in creating channel--> %o",k),console.error({error:k}),w(0,"There was an error in creating the Channel","Kindly Contact support@epns.io to resolve the issue."))}})},R=async u=>{if(h(F),P(ye),!n){a();return}w(10,"Checking for PUSH Token Approval","Loading...");const C=await qe({provider:t,account:e}),S=JSON.stringify({name:u.channelName,info:u.channelDesc,url:u.channelURL,icon:u.image});w(20,"Please wait, payload is getting uploaded to IPFS","Loading...");let T=await Rn(S);console.debug("IPFS storagePointer:",T),w(40,"Please complete the transaction in your wallet to continue.","Payload Uploaded...");var A=t.getSigner(e);console.debug(A),C<50?_(A,T):ce(A,T)};return i.jsx(Re,{onSubmit:u=>R(u),children:i.jsxs(c,{padding:{initial:"spacing-lg",ml:"spacing-sm"},backgroundColor:"surface-primary",borderRadius:"radius-md",display:"flex",width:{initial:"648px",ml:"325px"},flexDirection:"column",alignItems:"center",gap:"spacing-xl",children:[i.jsx(He,{}),!s&&i.jsx(Ve,{}),s&&i.jsxs(i.Fragment,{children:[f.txErrorStatus!==0&&i.jsx(Fn,{variant:"error",heading:f.txError,showIcon:!0}),g.progress?i.jsx(Je,{progressState:g}):i.jsxs(c,{display:"flex",flexDirection:"column",gap:"spacing-lg",alignItems:"center",alignSelf:"stretch",children:[i.jsx(Jn,{steps:Ge,completedSteps:l,setActiveStepKey:u=>m(u)}),j=="channelInfo"&&i.jsx(Ae,{handleNextStep:b,setActiveStepKey:m}),j==="uploadLogo"&&i.jsx(ze,{view:U,setView:y,setActiveStepKey:m,handleNextStep:b}),j==="stakeFees"&&i.jsx(We,{channelStakeFees:le,handleNextStep:b})]})]})]})})}});export{nt as C,or as __tla,rt as v};

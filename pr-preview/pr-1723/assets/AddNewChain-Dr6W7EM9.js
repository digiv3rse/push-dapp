import{m as e,D as i,eh as h,fv as Y,fw as q,r as g,de as b,eH as K,fx as M,fh as R,fy as Z,ei as j,es as H,eK as V,x as L,db as U,eY as G,A as J,E as Q,fz as W,fA as X,__tla as $}from"./index-htEh1Ze7.js";import{c as ee,a as se,u as ae,__tla as te}from"./index.esm-iK2lp9eT.js";import{u as O,__tla as ne}from"./useMutation-DDAYArKv.js";import{i as ie,__tla as le}from"./ValidationHelper-xcar2R7Y.js";import{C as re,__tla as oe}from"./ContentLayout-CU9ZIgUh.js";let z,ce=Promise.all([(()=>{try{return $}catch{}})(),(()=>{try{return te}catch{}})(),(()=>{try{return ne}catch{}})(),(()=>{try{return le}catch{}})(),(()=>{try{return oe}catch{}})()]).then(async()=>{let S,w,_,I,C,v,A,k,T,D,N,P,y,E;S=({steps:s,setActiveStepIndex:n,completedSteps:t})=>{const l=a=>{t!=null&&t.includes(a)&&n(a)};return e.jsx(i,{display:"flex",gap:"spacing-lg",children:s.map((a,o)=>e.jsxs(i,{display:"flex",flexDirection:"column",gap:"spacing-xs",width:"180px",cursor:"pointer",onClick:()=>l(o),children:[e.jsx(h,{textAlign:"center",color:t.includes(o)?"text-brand-medium":"text-tertiary",variant:"h5-semibold",display:{ml:"none",dp:"block"},children:a.label}),e.jsx(h,{textAlign:"center",variant:"h6-semibold",display:{ml:"block",dp:"none"},children:a.label}),e.jsx(i,{height:"4px",borderRadius:"r2",backgroundColor:t.includes(o)?"stroke-brand-medium":"stroke-tertiary"})]}))})},w=s=>s,_=s=>s,I=({userPushSDKInstance:s,alias:n})=>s.channel.alias.initiate(n).then(w),C=({userPushSDKInstance:s,alias:n})=>s.channel.alias.verify(n).then(_),v=()=>O({mutationKey:[Y],mutationFn:I}),A=()=>O({mutationKey:[q],mutationFn:C}),k=[{label:"New Address"},{label:"Change Network"},{label:"Verify Alias Chain"}],T={1:"Ethereum",11155111:"Ethereum Testnet",137:"Polygon",80002:"Polygon Testnet",97:"BNB Testnet",56:"BNB",42161:"Arbitrum",421614:"Arbitrum Testnet",11155420:"Optimisim Testnet",10:"Optimisim",2442:"PolygonZK",1101:"PolygonZK Mainnet",111557560:"Cyber",7560:"Cyber Testnet",122:"Fuse",123:"Fuse Testnet"},D=({setAddress:s,handleNextStep:n})=>{const[t,l]=g.useState("80002"),{userPushSDKInstance:a}=b(r=>r.user),o=K(),{mutate:u,isPending:m,isError:c}=v(),p=Object.keys(M).map(r=>{const x=parseInt(r,10),f=M[x];return{value:r,label:T[x],icon:e.jsx(f,{})}});console.debug(p,"chain");const B=ee().shape({alias:se().required("Address is required").test("is-valid-address","Invalid wallet address",ie)}),d=ae({initialValues:{alias:""},validationSchema:B,onSubmit:r=>{s(H(r.alias,parseInt(t))),F(r.alias)}}),F=r=>{u({userPushSDKInstance:a,alias:r},{onSuccess:()=>{n()},onError:x=>{x&&o.showMessageToast({toastTitle:"Error",toastMessage:x.message,toastType:"ERROR",getToastIcon:f=>e.jsx(V,{size:f,color:"red"})})}})};return e.jsx(i,{width:"100%",children:e.jsx("form",{onSubmit:d.handleSubmit,children:e.jsxs(i,{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",gap:"spacing-xl",children:[e.jsxs(i,{display:"flex",flexDirection:{ml:"column",dp:"row"},alignItems:"center",gap:"spacing-xs",width:"100%",justifyContent:"center",children:[e.jsx(R,{label:"Your Address on New Chain",description:"Make sure you own this alias as verification will take place.",value:d.values.alias,onChange:d.handleChange("alias"),error:d.touched.alias&&!!d.errors.alias,errorMessage:d.touched.alias?d.errors.alias:""}),e.jsx(i,{width:{dp:"auto",ml:"100%"},margin:"spacing-xxxs spacing-none spacing-none spacing-none",children:e.jsx(Z,{options:p,selectedValue:t,onSelect:r=>{l(r)}})})]}),e.jsx(j,{disabled:!d.values.alias||m&&!c,variant:"primary",children:m&&!c?"Initiating":"Next"})]})})})},N=({handleNextStep:s,alias:n})=>{const{switchChain:t,chainId:l}=L(),a=parseInt(n.split(":")[1]);return g.useEffect(()=>{l===a&&s()},[l]),e.jsxs(i,{display:"flex",flexDirection:"column",gap:"spacing-xl",alignItems:"center",children:[e.jsx(h,{variant:"bs-semibold",color:"text-primary",children:"Switch to the desired chain in your wallet to add it to your channel."}),e.jsx(j,{onClick:()=>t(a),children:"Change Network"})]})},P=({alias:s})=>{const{userPushSDKInstance:n}=b(c=>c.user),{mutate:t,isPending:l}=A(),a=K(),o=U(),u=s.split(":"),m=()=>{t({userPushSDKInstance:n,alias:s},{onSuccess:c=>{a.showMessageToast({toastTitle:"Success",toastMessage:"Verification Successful",toastType:"SUCCESS",getToastIcon:p=>e.jsx(G,{size:p,color:"green"})}),o(J.Dashboard)},onError:c=>{c&&a.showMessageToast({toastTitle:"Error",toastMessage:c.message,toastType:"ERROR",getToastIcon:p=>e.jsx(V,{size:p,color:"red"})})}})};return e.jsxs(i,{display:"flex",flexDirection:"column",gap:"spacing-xl",alignItems:"center",children:[e.jsxs(i,{display:"flex",flexDirection:"column",gap:"spacing-sm",children:[e.jsxs(h,{variant:"bs-semibold",textAlign:"center",color:"text-primary",children:["You\u2019re almost there!",e.jsx("br",{})," Verify the address on the new chain to send notifications."]}),e.jsx(R,{disabled:!0,value:u[2]})]}),e.jsx(j,{onClick:m,disabled:l,children:l?"Verifying":"Verify New Address"})]})},y=[0],E=()=>{const[s,n]=g.useState(0),[t,l]=g.useState(""),{userPushSDKInstance:a}=b(u=>u.user),o=()=>{s<2&&(y.push(s+1),n(s+1))};return e.jsxs(i,{display:"flex",flexDirection:"column",alignItems:"center",margin:{ml:"spacing-lg spacing-md",dp:"spacing-lg spacing-none spacing-none spacing-none"},padding:{dp:"spacing-lg",ml:"spacing-sm"},gap:"spacing-lg",borderRadius:"radius-lg",backgroundColor:"surface-primary",children:[e.jsxs(i,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing-xxxs",children:[e.jsx(h,{color:"text-primary",variant:"h3-semibold",display:{ml:"none",dp:"block"},children:"Add New Chain to Channel"}),e.jsx(h,{color:"text-primary",variant:"h4-semibold",display:{ml:"block",dp:"none"},children:"Add New Chain to Channel"}),e.jsx(h,{color:"text-tertiary",variant:"bs-regular",display:{ml:"none",dp:"block"},children:"Add an alias chain to your channel to enable notifications to that chain."}),e.jsx(h,{display:{ml:"block",dp:"none"},color:"text-tertiary",variant:"bes-regular",children:"Add an alias chain to your channel to enable notifications to that chain."})]}),e.jsx(S,{steps:k,completedSteps:y,setActiveStepIndex:n}),s===0&&e.jsx(D,{setAddress:l,handleNextStep:o}),s===1&&e.jsx(N,{handleNextStep:o,alias:t}),s===2&&e.jsx(P,{alias:t}),a&&(a==null?void 0:a.readmode())&&e.jsx(i,{display:"flex",justifyContent:"center",width:"-webkit-fill-available",alignItems:"center",css:Q`
            z-index: 99999;
          `,children:e.jsx(W,{type:X.MODAL,showConnectModal:!0})})]})},z=()=>e.jsx(re,{children:e.jsx(E,{})})});export{ce as __tla,z as default};

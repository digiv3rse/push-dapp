var ut=Object.defineProperty;var ke=g=>{throw TypeError(g)};var gt=(g,x,b)=>x in g?ut(g,x,{enumerable:!0,configurable:!0,writable:!0,value:b}):g[x]=b;var ee=(g,x,b)=>gt(g,typeof x!="symbol"?x+"":x,b),te=(g,x,b)=>x.has(g)||ke("Cannot "+b);var f=(g,x,b)=>(te(g,x,"read from private field"),b?b.call(g):x.get(g)),z=(g,x,b)=>x.has(g)?ke("Cannot add the same private member more than once"):x instanceof WeakSet?x.add(g):x.set(g,b),$=(g,x,b,B)=>(te(g,x,"write to private field"),B?B.call(g,b):x.set(g,b),b),K=(g,x,b)=>(te(g,x,"access private method"),b);import{gk as xt,gl as Pe,gm as ft,gn as yt,go as mt,gp as bt,gq as Le,gr as vt,gs as Se,gt as jt,r as y,gu as wt,gv as Ct,gw as kt,m as t,ep as se,Z as Ie,gx as F,gy as ie,gz as Pt,gA as Lt,gB as St,gC as It,gD as Tt,gE as Et,eR as Te,dn as Mt,gF as Ot,gG as Dt,gH as Rt,x as re,eo as ae,gI as G,er as l,et as h,ev as V,gJ as T,B as D,gK as Ee,es as At,gL as S,R as Nt,F as Wt,fP as _t,em as zt,M as $t,N as Kt,gM as Ft,H as Ht,D as Y,Y as Vt,A as Bt,gN as Ut,gO as qt,gP as Me,gQ as Oe,__tla as Zt}from"./index-D-XcfI2a.js";import{P as Gt,__tla as Yt}from"./Points-ZIL7KJ0O.js";let De,Jt=Promise.all([(()=>{try{return Zt}catch{}})(),(()=>{try{return Yt}catch{}})()]).then(async()=>{var R,A,k,E,M,J,oe,Ce;var g=class extends xt{constructor(s,e){super(s,e)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(s,e){super.setOptions({...s,behavior:Pe()},e)}getOptimisticResult(s){return s.behavior=Pe(),super.getOptimisticResult(s)}fetchNextPage(s){return this.fetch({...s,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(s){return this.fetch({...s,meta:{fetchMore:{direction:"backward"}}})}createResult(s,e){var m,L;const{state:i}=s,r=super.createResult(s,e),{isFetching:a,isRefetching:c,isError:d,isRefetchError:o}=r,u=(L=(m=i.fetchMeta)==null?void 0:m.fetchMore)==null?void 0:L.direction,n=d&&u==="forward",p=a&&u==="forward",v=d&&u==="backward",w=a&&u==="backward";return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:ft(e,i.data),hasPreviousPage:yt(e,i.data),isFetchNextPageError:n,isFetchingNextPage:p,isFetchPreviousPageError:v,isFetchingPreviousPage:w,isRefetchError:o&&!n&&!v,isRefetching:c&&!p&&!w}}},x=(Ce=class extends mt{constructor(e,i){super();z(this,M);z(this,R);z(this,A);z(this,k);z(this,E);$(this,R,e),this.setOptions(i),this.bindMethods(),K(this,M,J).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var r;const i=this.options;this.options=f(this,R).defaultMutationOptions(e),bt(this.options,i)||f(this,R).getMutationCache().notify({type:"observerOptionsUpdated",mutation:f(this,k),observer:this}),i!=null&&i.mutationKey&&this.options.mutationKey&&Le(i.mutationKey)!==Le(this.options.mutationKey)?this.reset():((r=f(this,k))==null?void 0:r.state.status)==="pending"&&f(this,k).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||((e=f(this,k))==null||e.removeObserver(this))}onMutationUpdate(e){K(this,M,J).call(this),K(this,M,oe).call(this,e)}getCurrentResult(){return f(this,A)}reset(){var e;(e=f(this,k))==null||e.removeObserver(this),$(this,k,void 0),K(this,M,J).call(this),K(this,M,oe).call(this)}mutate(e,i){var r;return $(this,E,i),(r=f(this,k))==null||r.removeObserver(this),$(this,k,f(this,R).getMutationCache().build(f(this,R),this.options)),f(this,k).addObserver(this),f(this,k).execute(e)}},R=new WeakMap,A=new WeakMap,k=new WeakMap,E=new WeakMap,M=new WeakSet,J=function(){var i;const e=((i=f(this,k))==null?void 0:i.state)??vt();$(this,A,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},oe=function(e){Se.batch(()=>{var i,r,a,c,d,o,u,n;if(f(this,E)&&this.hasListeners()){const p=f(this,A).variables,v=f(this,A).context;(e==null?void 0:e.type)==="success"?((r=(i=f(this,E)).onSuccess)==null||r.call(i,e.data,p,v),(c=(a=f(this,E)).onSettled)==null||c.call(a,e.data,null,p,v)):(e==null?void 0:e.type)==="error"&&((o=(d=f(this,E)).onError)==null||o.call(d,e.error,p,v),(n=(u=f(this,E)).onSettled)==null||n.call(u,void 0,e.error,p,v))}this.listeners.forEach(p=>{p(f(this,A))})})},Ce);function b(s,e){const i=jt(),[r]=y.useState(()=>new x(i,s));y.useEffect(()=>{r.setOptions(s)},[r,s]);const a=y.useSyncExternalStore(y.useCallback(d=>r.subscribe(Se.batchCalls(d)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),c=y.useCallback((d,o)=>{r.mutate(d,o).catch(wt)},[r]);if(a.error&&Ct(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:c,mutateAsync:a.mutate}}function B(s,e){return kt(s,g)}const Re=s=>{const{svgProps:e,...i}=s;return t.jsx(se,{componentName:"Copy",icon:t.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[t.jsxs("g",{"clip-path":"url(#clip0_3130_4650)",children:[t.jsx("path",{d:"M15.75 15.75H17.25C18.9069 15.75 20.25 14.4069 20.25 12.75V6.75C20.25 5.09315 18.9069 3.75 17.25 3.75H11.25C9.59315 3.75 8.25 5.09315 8.25 6.75V8.25",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),t.jsx("path",{d:"M12.75 8.25H6.75C5.09315 8.25 3.75 9.59315 3.75 11.25V17.25C3.75 18.9069 5.09315 20.25 6.75 20.25H12.75C14.4069 20.25 15.75 18.9069 15.75 17.25V11.25C15.75 9.59315 14.4069 8.25 12.75 8.25Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]}),t.jsx("defs",{children:t.jsx("clipPath",{id:"clip0_3130_4650",children:t.jsx("rect",{width:"18",height:"18",fill:"white",transform:"translate(3 3)"})})})]}),...i})},ne=s=>{const{svgProps:e,...i}=s;return t.jsx(se,{componentName:"Refresh",icon:t.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[t.jsx("path",{d:"M25.6146 10.9474C23.0882 5.89476 19.0525 5.26318 16.1409 5.26318C9.86228 5.26318 4.77246 10.353 4.77246 16.6316C4.77246 22.9102 9.86228 28 16.1409 28C21.5512 28 26.0788 24.2206 27.2276 19.1579",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),t.jsx("path",{d:"M18.6675 11.5789H26.2464V4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]}),...i})},Ae=s=>{const{svgProps:e,...i}=s;return t.jsx(se,{componentName:"UserSwitch",icon:t.jsxs("svg",{width:"inherit",height:"inherit",viewBox:"0 0 49 49",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[t.jsxs("g",{"clip-path":"url(#clip0_3429_11288)",children:[t.jsx("path",{d:"M24.5 29.0636C28.0899 29.0636 31 26.1535 31 22.5636C31 18.9738 28.0899 16.0636 24.5 16.0636C20.9101 16.0636 18 18.9738 18 22.5636C18 26.1535 20.9101 29.0636 24.5 29.0636Z",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"}),t.jsx("path",{d:"M14 36.0637C14.9844 33.9576 16.4866 32.1888 18.3399 30.9532C20.1932 29.7177 22.3254 29.0637 24.5 29.0637C26.6746 29.0637 28.8068 29.7177 30.6601 30.9532C32.5134 32.1888 34.0156 33.9576 35 36.0637",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"}),t.jsx("path",{d:"M36 24.0636L40 28.0636L44 24.0636",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"}),t.jsx("path",{d:"M5 24.0637L9 20.0637L13 24.0637",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"}),t.jsx("path",{d:"M9 20.0637V24.0625C8.99878 27.449 10.0357 30.7485 11.9613 33.4858C13.887 36.2231 16.6021 38.257 19.7155 39.2945C22.8289 40.332 26.18 40.3196 29.2862 39.2591C32.3924 38.1985 35.0933 36.1446 37 33.393",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"}),t.jsx("path",{d:"M40 28.0637V24.0649C40.0012 20.6783 38.9643 17.3788 37.0387 14.6415C35.113 11.9042 32.3979 9.8703 29.2845 8.8328C26.1711 7.7953 22.82 7.80772 19.7138 8.86827C16.6076 9.92881 13.9067 11.9828 12 14.7343",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"})]}),t.jsx("defs",{children:t.jsx("clipPath",{id:"clip0_3429_11288",children:t.jsx("rect",{width:"48",height:"48",fill:"white",transform:"translate(0.5 0.0636597)"})})})]}),...i})},le=s=>{const{svgProps:e,...i}=s;return t.jsx(Ie,{componentName:"Discord",illustration:t.jsxs("svg",{width:(i==null?void 0:i.width)??"24",height:(i==null?void 0:i.height)??"24",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[t.jsx("path",{d:"M0 24C0 10.7452 10.7452 0 24 0V0C37.2548 0 48 10.7452 48 24V24C48 37.2548 37.2548 48 24 48V48C10.7452 48 0 37.2548 0 24V24Z",fill:"#5865F2"}),t.jsx("path",{d:"M33.3567 15.416C31.6358 14.6264 29.7904 14.0446 27.8609 13.7114C27.8258 13.705 27.7907 13.7211 27.7726 13.7532C27.5352 14.1753 27.2724 14.726 27.0883 15.1588C25.013 14.8481 22.9484 14.8481 20.9157 15.1588C20.7315 14.7164 20.4591 14.1753 20.2207 13.7532C20.2026 13.7221 20.1675 13.706 20.1323 13.7114C18.204 14.0435 16.3586 14.6253 14.6366 15.416C14.6217 15.4224 14.6089 15.4331 14.6004 15.4471C11.1001 20.6765 10.1412 25.7773 10.6116 30.815C10.6137 30.8396 10.6276 30.8632 10.6467 30.8782C12.9561 32.5742 15.1932 33.6038 17.3887 34.2863C17.4238 34.297 17.461 34.2841 17.4834 34.2552C18.0027 33.546 18.4657 32.7981 18.8626 32.0117C18.886 31.9657 18.8637 31.911 18.8158 31.8928C18.0814 31.6143 17.3822 31.2746 16.7096 30.8889C16.6564 30.8579 16.6521 30.7818 16.7011 30.7453C16.8427 30.6393 16.9843 30.5289 17.1194 30.4175C17.1439 30.3971 17.178 30.3929 17.2067 30.4057C21.6254 32.4231 26.4092 32.4231 30.7758 30.4057C30.8045 30.3918 30.8386 30.3961 30.8641 30.4164C30.9993 30.5278 31.1409 30.6392 31.2834 30.7453C31.3324 30.7817 31.3292 30.8578 31.276 30.8889C30.6034 31.2821 29.9042 31.6142 29.1688 31.8917C29.1209 31.9099 29.0996 31.9656 29.1231 32.0117C29.5286 32.797 29.9915 33.5448 30.5012 34.2541C30.5225 34.2841 30.5608 34.297 30.596 34.2862C32.8021 33.6038 35.0392 32.5741 37.3486 30.8781C37.3688 30.8632 37.3816 30.8406 37.3837 30.816C37.9467 24.992 36.4408 19.9329 33.3917 15.4481C33.3843 15.4331 33.3716 15.4224 33.3567 15.416ZM19.5226 27.7476C18.1922 27.7476 17.0961 26.5262 17.0961 25.0263C17.0961 23.5263 18.1709 22.3049 19.5226 22.3049C20.8848 22.3049 21.9703 23.537 21.949 25.0263C21.949 26.5262 20.8741 27.7476 19.5226 27.7476ZM28.4941 27.7476C27.1638 27.7476 26.0677 26.5262 26.0677 25.0263C26.0677 23.5263 27.1425 22.3049 28.4941 22.3049C29.8564 22.3049 30.9419 23.537 30.9206 25.0263C30.9206 26.5262 29.8564 27.7476 28.4941 27.7476Z",fill:"white"})]}),...i})},Ne=s=>{const{svgProps:e,...i}=s;return t.jsx(Ie,{componentName:"Twitter",illustration:t.jsxs("svg",{width:(i==null?void 0:i.width)??"24",height:(i==null?void 0:i.height)??"24",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[t.jsx("path",{d:"M0 24C0 10.7452 10.7452 0 24 0V0C37.2548 0 48 10.7452 48 24V24C48 37.2548 37.2548 48 24 48V48C10.7452 48 0 37.2548 0 24V24Z",fill:"black"}),t.jsx("path",{d:"M26.093 22.3155L34.283 13H32.3422L25.2308 21.0885L19.551 13H13L21.589 25.2313L13 35H14.9409L22.4507 26.4583L28.449 35H35L26.093 22.3155ZM23.4347 25.339L22.5644 24.1211L15.6402 14.4296H18.6213L24.2092 22.2509L25.0795 23.4689L32.3431 33.6354H29.3621L23.4347 25.339Z",fill:"white"})]}),...i})},We=s=>s,_e=s=>s,ze=s=>s,$e=s=>s,Ke=s=>s,Fe=s=>({users:s.users.map(e=>({userId:e.userId,userWallet:e.userWallet,totalPoints:e.totalPoints,rank:e.rank})),page:s.page,pageSize:s.pageSize,total:s.total}),He=()=>F({method:"GET",url:"https://us-east1-push-dev-apps.cloudfunctions.net/helloWorld/activities/all"}).then(s=>We(s.data)),Ve=(s,e)=>F({method:"GET",url:`https://us-east1-push-dev-apps.cloudfunctions.net/helloWorld/users/${s}/activity/${e}`}).then(i=>_e(i.data)),Be=s=>F({method:"GET",url:"https://discord.com/api/users/@me",headers:{Authorization:`Bearer ${s}`}}).then(e=>ze(e.data)),Ue=s=>F({method:"POST",url:`https://us-east1-push-dev-apps.cloudfunctions.net/helloWorld/users/${s.userId}/activity/${s.activityTypeId}`,data:{data:s.data,verificationProof:s.verificationProof},headers:{"Content-Type":"application/json"}}).then(e=>$e(e.data)),qe="https://us-east1-push-dev-apps.cloudfunctions.net/helloWorld/users/",Ze=s=>F({method:"POST",url:`${qe}`,data:{userWallet:s.userWallet,pgpPublicKey:s.pgpPublicKey,verificationProof:s.verificationProof,refPrimary:s.refPrimary},headers:{"Content-Type":"application/json"}}).then(e=>Ke(e.data)),Ge="https://us-east1-push-dev-apps.cloudfunctions.net/helloWorld/users/leaderboard",Ye=async({order:s,pageSize:e,pageNumber:i})=>F({method:"GET",url:Ge,params:{order:s||"desc",pageSize:e||20,pageNumber:i||1}}).then(r=>Fe(r.data)),Je=()=>ie({queryKey:[Pt],queryFn:He}),Qe=({userId:s,activityId:e},i)=>ie({queryKey:[Lt,s,e],queryFn:()=>Ve(s,e),...i}),Xe=s=>ie({queryKey:[St,s],queryFn:()=>Be(s),enabled:!!s}),et=s=>b({mutationKey:[It,s.userId,s.activityTypeId],mutationFn:Ue}),tt=()=>b({mutationKey:[Tt],mutationFn:Ze}),st=({order:s,pageSize:e})=>B({queryKey:[Et],initialPageParam:1,queryFn:({pageParam:i})=>Ye({order:s,pageSize:e,pageNumber:i}),getNextPageParam:({page:i,total:r,pageSize:a})=>a*i>=r?null:i+1}),U=[{value:"dashboard",label:"Dashboard"},{value:"activities",label:"Reward Activities"},{value:"leaderboard",label:"Leaderboard"}],q={DISCORD:{Id:"66728043459873cd345735e3",image:le},TWITTER:{Id:"66728043459873cd345735e1",image:Ne}},it=()=>{const[s,e]=y.useState(U[0].value),i=Te(),r=Mt();return y.useEffect(()=>{(i.pathname==="/rewards"||i.pathname==="/rewards/")&&(e("dashboard"),r("/rewards/dashboard"))},[]),y.useEffect(()=>{const a=i.pathname.split("/")[2];a&&a!==s?e(a):!a&&s!==U[0].value&&e(U[0].value)},[i,s]),{activeTab:s,handleSetActiveTab:a=>{a!==s&&(e(a),r(`/rewards/${a}`))}}},de=async(s,e)=>{if(e&&!(e!=null&&e.readmode())){const i=JSON.stringify(s),r=await Ot({text:i}),a=await Dt({armoredKey:e.decryptedPgpPvtKey});return await Rt({message:r,signingKeys:a,detached:!0})}},rt=()=>{const s=y.useRef(null),[e,i]=y.useState(!1),{isWalletConnected:r,chainId:a,account:c,connect:d}=re();let o=ae({account:c});const{data:u,isSuccess:n,isLoading:p,isFetching:v,error:w}=G({walletAddress:o}),m=p||v,L=()=>{d()},P=()=>{if(s.current){const I=s.current.innerText;navigator.clipboard.writeText(I).then(()=>{i(!0),setTimeout(()=>{i(!1)},2e3)}).catch(j=>{console.error("Failed to copy text: ",j)})}};return t.jsxs(l,{display:"flex",flexDirection:"column",gap:"s9",padding:"s12",borderRadius:"r6",backgroundColor:{light:"white",dark:"gray-900"},children:[t.jsxs(l,{children:[t.jsx(h,{variant:"h3-bold",color:{light:"gray-1000",dark:"gray-100"},children:"Onboard Users on Push."}),t.jsx(h,{variant:"h3-bold",color:{light:"gray-1000",dark:"gray-100"},children:"Earn Points."}),t.jsx(h,{variant:"bm-regular",color:"gray-500",children:"Earn +12% of any Points your invites earn, and +2% of any Points your invite\u2019s invites earn."})]}),r&&n&&!m&&t.jsxs(l,{display:"flex",gap:"s2",flexDirection:{tb:"column",initial:"row"},children:[t.jsx(l,{width:{tb:"-webkit-fill-available",initial:"344px"},display:"flex",alignItems:"center",padding:"s3",borderRadius:"r3",border:{light:"1.5px solid gray-200",dark:"none"},backgroundColor:{light:"transparent",dark:"gray-800"},children:t.jsxs(h,{variant:"bs-regular",ref:s,color:{light:"gray-1000",dark:"gray-100"},children:["https://app.push.org/rewards/dashboard?ref=",u==null?void 0:u.userId]})}),t.jsx(V,{leadingIcon:t.jsx(Re,{}),onClick:P,children:e?"Copied":"Copy Link"})]}),r&&m&&t.jsx(T,{isLoading:m,height:"40px",width:{tb:"-webkit-fill-available",initial:"344px"},css:D`
            margin-top: var(--s6);
          `,children:t.jsx(l,{})}),!r&&t.jsx(l,{children:t.jsx(V,{size:"small",onClick:L,children:"Connect Wallet"})})]})},at=({activeTab:s,handleSetActiveTab:e})=>{const{mode:i}=Ee();return t.jsx(l,{display:"flex",gap:"s3",css:D`
        border-bottom: 1px solid var(--${i==="dark"?"gray-800":"gray-200"});
      `,justifyContent:{ml:"space-between",initial:"flex-start"},children:U.map(r=>t.jsxs(l,{padding:{ml:"s0 s0 s3 s0",initial:"s0 s4 s4 s4"},cursor:"pointer",onClick:()=>e(r.value),css:D`
            margin-bottom: -1px;
            border-bottom: ${r.value===s?"2px solid var(--pink-400)":"0px"};
          `,children:[t.jsx(h,{variant:"h5-semibold",display:{ml:"none",dp:"block"},color:{light:"gray-1000",dark:"gray-200"},children:r.label}),t.jsx(h,{variant:"h6-semibold",display:{ml:"block",dp:"none"},color:{light:"gray-1000",dark:"gray-200"},children:r.label})]},`${r.value}`))})},ot=({onGetStarted:s})=>{const{isWalletConnected:e,account:i}=re();let r=ae({account:i});const{data:a,refetch:c,isSuccess:d,isLoading:o,isFetching:u}=G({walletAddress:r}),n=o||u,p=()=>{c()};return t.jsx(t.Fragment,{children:t.jsxs(l,{display:"flex",flexDirection:"column",gap:"s4",children:[t.jsx(h,{variant:"h4-bold",color:{light:"gray-1000",dark:"gray-100"},children:"Dashboard"}),t.jsx(l,{borderRadius:"r6",display:"flex",padding:{tb:"s4",initial:"s6"},alignItems:"center",justifyContent:"space-between",flexDirection:{tb:"column",initial:"row"},css:D`
            background: radial-gradient(circle, rgba(222, 190, 255, 1) 0%, rgba(192, 255, 247, 1) 85%);
          `,children:t.jsxs(l,{width:"-webkit-fill-available",display:"flex",flexDirection:{tb:"column",initial:"row"},gap:{tb:"s4"},alignItems:{tb:"stretch",initial:"center"},justifyContent:"space-between",children:[t.jsxs(l,{gap:"s3",display:"flex",alignItems:"center",children:[t.jsx(Gt,{}),t.jsxs(l,{display:"flex",flexDirection:"column",children:[t.jsx(h,{variant:"h4-semibold",children:"Earn Rewards for Exploring!"}),t.jsxs(h,{variant:"bl-regular",children:["Discover, participate, and earn rewards with every step you take in Push."," "]})]})]}),t.jsx(V,{variant:"tertiary",size:"small",onClick:s,children:"Get started"})]})}),t.jsxs(l,{display:"flex",gap:"s6",flexDirection:{tb:"column",initial:"row"},children:[t.jsxs(l,{width:"-webkit-fill-available",display:"flex",flexDirection:"column",padding:"s6",borderRadius:"r6",gap:"s3",border:{light:"1px solid gray-200",dark:"1px solid gray-800"},children:[t.jsxs(l,{width:"-webkit-fill-available",display:"flex",justifyContent:"space-between",alignItems:"center",children:[t.jsx(h,{variant:"h5-bold",color:{light:"gray-1000",dark:"gray-100"},children:"TOTAL POINTS"}),e&&t.jsxs(l,{display:"flex",alignItems:"center",cursor:"pointer",onClick:p,children:[t.jsx(At,{defaultBackground:"pink-200",hoverBackground:"pink-200",padding:"s1",borderRadius:"r4",icon:t.jsx(ne,{color:"pink-400"})}),t.jsx(l,{margin:"s0 s0 s0 s1",children:t.jsx(h,{variant:"bs-semibold",color:"gray-500",children:"Update"})})]})]}),e&&d&&!n?t.jsxs(l,{children:[t.jsx(h,{variant:"h1-bold",color:{light:"gray-1000",dark:"gray-100"},children:a==null?void 0:a.totalPoints}),t.jsxs(h,{variant:"h5-bold",color:"gray-500",children:["Rank #",(a==null?void 0:a.rank)>0?a==null?void 0:a.rank:"-"]})]}):e&&n?t.jsx(T,{isLoading:n,height:"40px",width:"100px",margin:"s6 s0 s0 s0",children:t.jsx(l,{})}):t.jsx(l,{children:t.jsx(h,{variant:"h1-bold",color:{light:"gray-1000",dark:"gray-100"},children:"0"})})]}),t.jsxs(l,{width:"-webkit-fill-available",display:"flex",flexDirection:"column",padding:"s6",borderRadius:"r6",gap:"s3",border:{light:"1px solid gray-200",dark:"1px solid gray-800"},children:[t.jsx(h,{variant:"h5-bold",color:{light:"gray-1000",dark:"gray-100"},children:"REFFERAL POINTS"}),e&&d&&!n?t.jsxs(l,{children:[t.jsx(h,{variant:"h1-bold",color:{light:"gray-1000",dark:"gray-100"},children:a==null?void 0:a.referralPoints}),t.jsxs(h,{variant:"h5-bold",color:"gray-500",children:[a==null?void 0:a.usersInvited," ",(a==null?void 0:a.usersInvited)>1?"Users":"User"," Invited"]})]}):e&&n?t.jsx(T,{isLoading:n,height:"40px",margin:"s6 s0 s0 s0",width:"100px",children:t.jsx(l,{})}):t.jsx(l,{children:t.jsx(h,{variant:"h1-bold",color:{light:"gray-1000",dark:"gray-100"},children:"0"})})]})]})]})})};class Q extends y.Component{constructor(e){super(e),this.scrollListener=this.scrollListener.bind(this),this.eventListenerOptions=this.eventListenerOptions.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this)}componentDidMount(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}componentDidUpdate(){if(this.props.isReverse&&this.loadMore){const e=this.getParentElement(this.scrollComponent);e.scrollTop=e.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}componentWillUnmount(){this.detachScrollListener(),this.detachMousewheelListener()}isPassiveSupported(){let e=!1;const i={get passive(){e=!0}};try{document.addEventListener("test",null,i),document.removeEventListener("test",null,i)}catch{}return e}eventListenerOptions(){let e=this.props.useCapture;return this.isPassiveSupported()?e={useCapture:this.props.useCapture,passive:!0}:e={passive:!1},e}setDefaultLoader(e){this.defaultLoader=e}detachMousewheelListener(){let e=window;this.props.useWindow===!1&&(e=this.scrollComponent.parentNode),e.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}detachScrollListener(){let e=window;this.props.useWindow===!1&&(e=this.getParentElement(this.scrollComponent)),e.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),e.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}getParentElement(e){return(this.props.getScrollParent&&this.props.getScrollParent())??(e&&e.parentNode)}filterProps(e){return e}attachScrollListener(){const e=this.getParentElement(this.scrollComponent);if(!this.props.hasMore||!e)return;let i=window;this.props.useWindow===!1&&(i=e),i.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),i.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),i.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}mousewheelListener(e){e.deltaY===1&&!this.isPassiveSupported()&&e.preventDefault()}scrollListener(){const e=this.scrollComponent,i=window,r=this.getParentElement(e);let a;if(this.props.useWindow){const c=document.documentElement||document.body.parentNode||document.body,d=i.pageYOffset!==void 0?i.pageYOffset:c.scrollTop;this.props.isReverse?a=d:a=this.calculateOffset(e,d)}else this.props.isReverse?a=r.scrollTop:a=e.scrollHeight-r.scrollTop-r.clientHeight;a<Number(this.props.threshold)&&e&&e.offsetParent!==null&&(this.detachScrollListener(),this.beforeScrollHeight=r.scrollHeight,this.beforeScrollTop=r.scrollTop,typeof this.props.loadMore=="function"&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}calculateOffset(e,i){return e?this.calculateTopPosition(e)+(e.offsetHeight-i-window.innerHeight):0}calculateTopPosition(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}render(){const e=this.filterProps(this.props),{children:i,element:r,hasMore:a,initialLoad:c,isReverse:d,loader:o,loadMore:u,pageStart:n,ref:p,threshold:v,useCapture:w,useWindow:m,getScrollParent:L,...P}=e;P.ref=j=>{this.scrollComponent=j,p&&p(j)};const I=[i];return a&&(o?d?I.unshift(o):I.push(o):this.defaultLoader&&(d?I.unshift(this.defaultLoader):I.push(this.defaultLoader))),Nt.createElement(r,P,I)}}ee(Q,"propTypes",{children:S.node.isRequired,element:S.node,hasMore:S.bool,initialLoad:S.bool,isReverse:S.bool,loader:S.node,loadMore:S.func.isRequired,pageStart:S.number,ref:S.func,getScrollParent:S.func,threshold:S.number,useCapture:S.bool,useWindow:S.bool}),ee(Q,"defaultProps",{element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null});function nt(s,e){var i={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(i[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(s);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(s,r[a])&&(i[r[a]]=s[r[a]]);return i}const C=new Array(4);function lt(s){C.fill(0);for(let e=0;e<s.length;e++)C[e%4]=(C[e%4]<<5)-C[e%4]+s.charCodeAt(e)}function N(){const s=C[0]^C[0]<<11;return C[0]=C[1],C[1]=C[2],C[2]=C[3],C[3]=C[3]^C[3]>>19^s^s>>8,(C[3]>>>0)/(1<<31>>>0)}function X(){const s=Math.floor(N()*360),e=(N()*60+40).toFixed(1)+"%",i=((N()+N()+N()+N())*25).toFixed(1)+"%";return"hsl("+s+","+e+","+i+")"}function dt(s){const e=s,i=s,r=Math.ceil(e/2),a=e-r,c=[];for(let d=0;d<i;d++){let o=[];for(let n=0;n<r;n++)o[n]=Math.floor(N()*2.3);const u=o.slice(0,a);u.reverse(),o=o.concat(u);for(let n=0;n<o.length;n++)c.push(o[n])}return c}function ct(s){return lt(s.seed),{seed:s.seed,size:s.size||8,scale:s.scale||10,color:X(),bgcolor:X(),spotcolor:X()}}const H=Object.create(null);function ht(s){let{address:e,size:i=8,scale:r=10,caseSensitive:a=!1,defaultBackgroundColor:c="black"}=s,d=nt(s,["address","size","scale","caseSensitive","defaultBackgroundColor"]);const o=i*r,[u,n]=y.useState(null),[p,v]=y.useState(null);return!a&&e&&(e=e.toLowerCase()),y.useEffect(()=>{if(e)if(H[e]&&H[e].opts.size===i)n(H[e].opts),v(H[e].imageData);else{const w=ct({seed:e,size:i,scale:r}),m=dt(w.size);n(w),v(m),H[e]={opts:w,imageData:m}}},[e]),e?u&&p?t.jsxs("svg",Object.assign({},d,{width:o,height:o,viewBox:`0 0 ${o} ${o}`,xmlns:"http://www.w3.org/2000/svg"},{children:[t.jsx("rect",{width:o,height:o,fill:u.bgcolor}),t.jsx("g",Object.assign({fill:u.color},{children:p==null?void 0:p.map((w,m)=>{if(w===1){const L=m%i*r,P=Math.floor(m/i)*r;return t.jsx("rect",{width:r,height:r,x:L,y:P},`${e}-${m}`)}})})),t.jsx("g",Object.assign({fill:u.spotcolor},{children:p==null?void 0:p.map((w,m)=>{if(w===2){const L=m%i*r,P=Math.floor(m/i)*r;return t.jsx("rect",{width:r,height:r,x:L,y:P},`${e}-${m}`)}})}))]})):t.jsx("svg",Object.assign({},d,{width:o,height:o,viewBox:`0 0 ${o} ${o}`,xmlns:"http://www.w3.org/2000/svg"},{children:t.jsx("rect",{width:o,height:o,fill:"black"})})):t.jsx("svg",Object.assign({},d,{width:o,height:o,viewBox:`0 0 ${o} ${o}`,xmlns:"http://www.w3.org/2000/svg"},{children:t.jsx("rect",{width:o,height:o,fill:c})}))}let ce,he,pe,ue,ge,Z,xe,fe,ye,me,be,ve,je,we;ce=({rank:s,address:e,points:i,isLoading:r})=>{const{mode:a}=Ee(),{web3NameList:c}=y.useContext(Wt);_t(e);const d=c[e],o=d||zt(e,10,10);return t.jsxs(l,{height:"56px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",css:D`
        border-bottom: 1px solid var(--${a==="dark"?"gray-800":"gray-200"});
      `,children:[t.jsx(T,{isLoading:r,children:t.jsxs(l,{display:"flex",gap:"s3",alignItems:"center",children:[t.jsx(l,{width:"34px",justifyContent:"center",display:"flex",children:t.jsx(h,{variant:"bm-bold",color:{light:"gray-1000",dark:"gray-100"},children:s})}),t.jsxs(l,{display:"flex",gap:"s3",alignItems:"center",children:[t.jsx(l,{width:"32px",height:"32px",borderRadius:"r10",overflow:"hidden",children:t.jsx(ht,{address:e,size:8,scale:4})}),t.jsx(h,{variant:"bm-bold",display:{ml:"none",dp:"block"},color:{light:"gray-1000",dark:"gray-100"},children:o}),t.jsx(h,{variant:"bs-bold",display:{ml:"block",dp:"none"},color:{light:"gray-1000",dark:"gray-100"},children:o})]})]})}),t.jsx(T,{isLoading:r,children:t.jsxs(l,{width:"88px",minWidth:"88px",minHeight:"22px",display:"flex",justifyContent:"center",children:[t.jsx(h,{variant:"bm-bold",display:{ml:"none",dp:"block"},color:{light:"gray-1000",dark:"gray-100"},children:i}),t.jsx(h,{variant:"bs-bold",display:{ml:"block",dp:"none"},color:{light:"gray-1000",dark:"gray-100"},children:i})]})})]})},he=({heading:s,subHeading:e,error:i=!1,refetchLeaderboard:r})=>t.jsxs(l,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"s4",padding:"s15",height:"200px",children:[t.jsx(Ae,{size:48,color:"gray-300"}),t.jsxs(l,{display:"flex",flexDirection:"column",alignItems:"center",gap:"s1",children:[s&&t.jsx(h,{textAlign:"center",variant:"h5-bold",color:{light:"black",dark:"white"},children:s}),e&&t.jsx(h,{textAlign:"center",variant:"bs-regular",color:{light:"gray-600",dark:"gray-500"},children:e})]}),i&&t.jsx(V,{onClick:()=>r==null?void 0:r(),variant:"tertiary",size:"small",leadingIcon:t.jsx(ne,{}),children:"Refresh"})]}),pe=()=>t.jsxs(l,{display:"flex",justifyContent:"space-between",children:[t.jsxs(l,{display:"flex",gap:"s3",children:[t.jsx(h,{variant:"c-bold",color:{light:"gray-500",dark:"gray-600"},children:"RANK"}),t.jsx(h,{variant:"c-bold",color:{light:"gray-500",dark:"gray-600"},children:"USER"})]}),t.jsx(h,{variant:"c-bold",color:{light:"gray-500",dark:"gray-600"},children:"TOTAL POINTS"})]}),ue=()=>{const{data:s,isError:e,refetch:i,fetchNextPage:r,hasNextPage:a,isLoading:c,isFetchingNextPage:d}=st({pageSize:20}),o=c?Array(5).fill(0):(s==null?void 0:s.pages.flatMap(n=>n.users))||[],u=!d&&a;return o.length?!!o.length&&t.jsxs(l,{gap:"s4",display:"flex",flexDirection:"column",children:[t.jsx(pe,{}),t.jsx(l,{height:"calc(100vh - 356px)",overflow:"auto",children:t.jsx(Q,{pageStart:0,loadMore:()=>r(),hasMore:u,loader:t.jsx(l,{margin:"s3",children:t.jsx($t,{spinnerSize:24,type:Kt.SEAMLESS})},"loader-spinner"),useWindow:!1,threshold:150,children:o.map((n,p)=>t.jsx(ce,{rank:n.rank,address:Ft(n.userWallet),points:n.totalPoints,isLoading:c},`${p}`))})})]}):t.jsx(he,{refetchLeaderboard:e?i:void 0,heading:"No Users Found",error:e,subHeading:e?"Please refresh to view the Leaderboard":""})},ge=()=>t.jsxs(l,{display:"flex",flexDirection:"column",gap:"s4",backgroundColor:{dark:"gray-900",light:"white"},children:[t.jsx(h,{variant:"h4-bold",display:{ml:"none",dp:"block"},color:{light:"gray-1000",dark:"gray-100"},children:"Leaderboard"}),t.jsx(h,{variant:"h5-bold",display:{ml:"block",dp:"none"},color:{light:"gray-1000",dark:"gray-100"},children:"Leaderboard"}),t.jsx(ue,{})]}),Z=({label:s,isLoading:e,onClick:i,disabled:r=!1})=>t.jsx(l,{display:"flex",alignItems:{ml:"flex-start",initial:"center"},flexDirection:"column",minWidth:"100px",children:t.jsx(T,{isLoading:e,width:"100%",children:t.jsx(V,{variant:"tertiary",size:"small",css:D`
      width: 100%;
    `,disabled:r,onClick:i,children:s})})}),xe=({userId:s,activityTypeId:e,refetchActivity:i})=>{const r=sessionStorage.getItem("access_token"),[a,c]=y.useState(r),d=Ht(5e3),{userPushSDKInstance:o}=Y(j=>j.user),u=window.location.origin,n=()=>{const j="1253697881211277333",O=`${u}${Bt.RewardsActivities}`,W=`https://discord.com/api/oauth2/authorize?client_id=${j}&redirect_uri=${O}&response_type=token&scope=identify email guilds.members.read`;window.location.href=W},p=()=>{a?I(o):n()};y.useEffect(()=>{const j=window.location.hash;if(j){const O=new URLSearchParams(j.substring(1)),W=O.get("access_token"),_=O.get("expires_in");W&&_&&(sessionStorage.setItem("access_token",W),sessionStorage.setItem("expires_in",_),c(W)),window.history.replaceState({},"",window.location.pathname)}},[]);const{data:v,isLoading:w}=Xe(a);y.useEffect(()=>{a&&v&&I(o)},[a,v]);const{mutate:m}=et({userId:s,activityTypeId:e}),[L,P]=y.useState(!1),I=async j=>{if(v&&a){P(!0);const O={discord:v.global_name,discord_token:a},W=await de(O,j);m({userId:s,activityTypeId:e,pgpPublicKey:j.pgpPublicKey,data:O,verificationProof:W},{onSuccess:_=>{_.status==="COMPLETED"&&(i(),P(!1))},onError:_=>{console.log("Error in creating activiy",_),P(!1),d.showMessageToast({toastTitle:"Error",toastMessage:`${_.response.data.error}`,toastType:"ERROR",getToastIcon:pt=>t.jsx(Vt,{size:pt,color:"red"})})}})}};return t.jsx(Z,{label:"Verify",onClick:p,isLoading:w||L})},fe=({userId:s,activityTypeId:e,refetchActivity:i})=>{console.log("userId, activityTypeId, refetchActivity",s,e,i);const r=()=>{console.log(" Verification is called")};return t.jsx(Z,{label:"Verify",onClick:r})},ye=s=>new Date(s*1e3).getDate(),me=({userId:s,activity:e,isLoadingItem:i})=>{var d;const{data:r,isLoading:a,refetch:c}=Qe({userId:s,activityId:e.id},{enabled:!!s});return t.jsx(T,{isLoading:i,children:t.jsxs(l,{display:"flex",flexDirection:"row",padding:{ml:"s3",lp:"s4 s2",initial:"s6"},backgroundColor:{light:"gray-100",dark:"gray-1000"},borderRadius:"r4",alignItems:{ml:"flex-start",initial:"center"},gap:"s4",children:[e.id===q.DISCORD.Id&&t.jsx(le,{width:48,height:48}),t.jsxs(l,{display:"flex",flexDirection:{ml:"column",initial:"row"},gap:"s6",css:D`
            flex: 1;
          `,alignItems:{ml:"baseline",initial:"center"},children:[t.jsxs(l,{display:"flex",flexDirection:{ml:"column",initial:"row"},gap:{ml:"s1",initial:"s4"},alignItems:{ml:"flex-start",initial:"center"},justifyContent:"space-between",css:D`
              flex: 1;
            `,children:[t.jsxs(l,{display:"flex",flexDirection:"column",gap:"s1",children:[t.jsxs(l,{display:"flex",flexDirection:{lp:"column-reverse",initial:"row"},gap:{lp:"s1",initial:"s4"},children:[t.jsx(T,{isLoading:a,children:t.jsx(h,{variant:"bl-semibold",color:{light:"gray-1000",dark:"gray-100"},children:e.activityTitle})}),!!e.expiryType&&t.jsx(l,{display:"flex",children:t.jsxs(Ut,{size:"small",children:["Expires in ",ye(e.expiryType)," days"]})})]}),t.jsx(T,{isLoading:a,children:t.jsx(h,{variant:"h5-regular",color:"gray-500",children:e.activityDesc})})]}),t.jsx(l,{display:"flex",minWidth:"160px",flexDirection:"row",gap:"s2",alignItems:"center",children:t.jsxs(T,{isLoading:a,children:[t.jsx(qt,{width:32,height:32}),t.jsxs(h,{variant:"h4-semibold",color:{light:"gray-1000",dark:"gray-100"},css:D`
                    margin-right: 24px;
                  `,children:[(d=e.points)==null?void 0:d.toLocaleString()," points"]})]})})]}),(r==null?void 0:r.status)==="COMPLETED"&&t.jsx(Z,{label:"Claimed",onClick:()=>{},disabled:!0}),r&&(r==null?void 0:r.status)!=="COMPLETED"&&t.jsxs(l,{display:"flex",children:[e.id===q.DISCORD.Id&&t.jsx(xe,{userId:s,activityTypeId:e.id,refetchActivity:c}),e.id!==q.DISCORD.Id&&t.jsx(fe,{userId:s,activityTypeId:e.id,refetchActivity:c})]})]})]})})},be=()=>{const{userPushSDKInstance:s}=Y(n=>n.user),{data:e,isLoading:i}=Je(),r=[...(e==null?void 0:e.activities)??[]].filter(n=>n.id!==q.TWITTER.Id),a=`eip155:${s.account}`,{data:c,isLoading:d}=G({walletAddress:a}),o=d||i,u=o?Array(3).fill(0):r||[];return t.jsx(l,{display:"flex",flexDirection:"column",gap:{ml:"s4",initial:"s1"},children:u.map(n=>t.jsx(me,{userId:(c==null?void 0:c.userId)||"",activity:n,isLoadingItem:o}))})},ve=()=>t.jsxs(l,{display:"flex",flexDirection:"column",gap:"s4",children:[t.jsx(h,{variant:"h4-bold",color:{light:"gray-1000",dark:"gray-100"},children:"Activities"}),t.jsx(be,{})]}),je=({activeTab:s,handleSetActiveTab:e})=>{const{userPushSDKInstance:i}=Y(c=>c.user),[r,a]=y.useState(!1);return y.useEffect(()=>{s==="activities"&&i&&i.readmode()&&a(!0)},[s,i]),t.jsx(l,{backgroundColor:{dark:"gray-900",light:"white"},borderRadius:"r4",display:"flex",flexDirection:"column",padding:{ml:"s4 s3",initial:"s6"},children:t.jsxs(l,{gap:"s6",display:"flex",flexDirection:"column",color:{light:"gray-900",dark:"gray-100"},children:[t.jsx(at,{activeTab:s,handleSetActiveTab:e}),s==="dashboard"&&t.jsx(ot,{onGetStarted:()=>e("activities")}),s==="activities"&&i&&!i.readmode()&&t.jsx(ve,{}),s==="leaderboard"&&t.jsx(ge,{}),i&&(i==null?void 0:i.readmode())&&r&&t.jsx(Me,{type:Oe.MODAL,showConnectModal:r})]})})},we=()=>{const s=I().get("ref"),{isWalletConnected:e,account:i}=re();let r=ae({account:i});const[a,c]=y.useState(!1),{activeTab:d,handleSetActiveTab:o}=it(),u=d==="leaderboard"?"Push Reward Points":"Introducing Push Reward Points Program",{userPushSDKInstance:n}=Y(j=>j.user),{data:p,refetch:v}=G({walletAddress:r}),w={refPrimary:s,userWallet:r},m={userWallet:r},{mutate:L}=tt(),P=async()=>{if(!n||p!=null&&p.userId)return;const j=await de(s?w:m,n);(j==null||j==null)&&d==="dashboard"&&n&&n.readmode()&&c(!0),L({pgpPublicKey:n==null?void 0:n.pgpPublicKey,userWallet:r,verificationProof:j,refPrimary:w.refPrimary},{onSuccess:()=>{v()},onError:O=>{console.error("Error",O)}})};y.useEffect(()=>{!r||!e||P()},[e,r,n,d]);function I(){return new URLSearchParams(Te().search)}return t.jsxs(l,{flexDirection:"column",display:"flex",margin:{initial:"s4 s6 s4 s6",ml:"s4"},gap:"s6",height:"100%",children:[t.jsx(h,{variant:"h3-bold",display:{ml:"none",dp:"block"},color:{light:"gray-1000",dark:"gray-100"},children:u}),t.jsx(h,{variant:"h4-semibold",display:{ml:"block",dp:"none"},color:{light:"gray-1000",dark:"gray-100"},children:u}),t.jsx(je,{activeTab:d,handleSetActiveTab:o}),n&&(n==null?void 0:n.readmode())&&a&&t.jsx(Me,{type:Oe.MODAL,showConnectModal:a}),d==="dashboard"&&t.jsx(rt,{})]})},De=()=>t.jsx(we,{})});export{Jt as __tla,De as default};
